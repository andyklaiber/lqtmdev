import{r as v,o as r,c as a,a as e,F as u,b as h,d as $,w as R,n as w,t as c,e as L,R as N,f as g,g as b,_ as x,h as C,i as S,j as B}from"./vendor.544943fd.js";const D=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))_(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&_(d)}).observe(document,{childList:!0,subtree:!0});function i(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function _(t){if(t.ep)return;t.ep=!0;const o=i(t);fetch(t.href,o)}};D();var y=(l,s)=>{const i=l.__vccOpts||l;for(const[_,t]of s)i[_]=t;return i};const M={props:["races"],data(){return{count:0}},computed:{}},V={class:"navbar navbar-expand-lg navbar-light bg-light"},O={class:"container-fluid"},P=e("div",{class:"navbar-brand",href:"#"},"2022 Prairie City Race Series",-1),T={class:"collapse navbar-collapse",id:"navbarSupportedContent"},A={class:"navbar-nav me-auto mb-2 mb-lg-0"},j={class:"nav-item dropdown"},F=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Races ",-1),H={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},q={key:1,class:"dropdown-item disabled"},E=e("div",{class:"nav-item"},[e("a",{class:"nav-link active","aria-current":"page",href:"https://racemtb.com/"},"RaceMtb Home")],-1);function I(l,s,i,_,t,o){const d=v("RouterLink");return r(),a("nav",V,[e("div",O,[P,e("div",T,[e("ul",A,[e("li",j,[F,e("ul",H,[(r(!0),a(u,null,h(i.races,n=>(r(),a("li",{key:n.raceid},[n.active?(r(),$(d,{key:0,class:w(["dropdown-item",{active:l.$route.params.raceid===n.raceid}]),to:`/race/${n.raceid}`},{default:R(()=>[L(c(n.displayName+` - ${n.formattedStartDate}`),1)]),_:2},1032,["class","to"])):(r(),a("div",q,c(n.displayName+` - ${n.formattedStartDate}`),1))]))),128))])])])]),E])])}var U=y(M,[["render",I]]);let z="/api/races/";const K={components:{RouterView:N,NavBar:U},data(){return{races:[]}},mounted:function(){fetch(z).then(l=>l.json()).then(l=>{this.races=l;let s=this.races.find(i=>i.defaultRace===!0);s&&window.location.hash.indexOf("race/")==-1&&this.$router.push(`/race/${s.raceid}`)})},computed:{raceMeta(){return this.races.find(l=>l.raceid===this.$route.params.raceid)}}},W={key:0,class:"text-center"},G={class:"mt-5"};function J(l,s,i,_,t,o){var m;const d=v("NavBar"),n=v("RouterView");return r(),a(u,null,[g(d,{races:t.races,id:"top"},null,8,["races"]),o.raceMeta?(r(),a("div",W,[e("h2",G,"Race Results - "+c((m=o.raceMeta)==null?void 0:m.formattedStartDate),1)])):b("",!0),g(n)],64)}var Q=y(K,[["render",J]]);const X={props:["data","Pos","totLaps"],data(){return{count:0}},computed:{incompleteLaps(){return new Array(this.totLaps-this.data.laps.length).fill("-")}}};function Y(l,s,i,_,t,o){return r(),a(u,null,[e("td",null,c(i.Pos+1),1),e("td",null,c(i.data.Bib),1),e("td",null,c(i.data.Name),1),e("td",null,c(i.data.Sponsor),1),(r(!0),a(u,null,h(i.data.laps,(d,n)=>(r(),a("td",{key:n},c(d.timeString),1))),128)),i.totLaps-i.data.laps.length>0?(r(!0),a(u,{key:0},h(o.incompleteLaps,d=>(r(),a("td",null,c(d),1))),256)):b("",!0),e("td",null,c(i.data.Time),1),e("td",null,c(i.data.back||"-"),1)],64)}var Z=y(X,[["render",Y]]);const ee={components:{ResultRow:Z},data(){return{categories:{},loading:!1,error:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(l){var s=document.querySelector(`#${l}`);s.scrollIntoView({behavior:"smooth"})},fetchData(){this.error=null,this.loading=!0;let l=`/api/races/results/${this.$route.params.raceid}`;fetch(l).then(s=>s.json()).then(s=>{this.loading=!1,this.categories=s.categories}).catch(s=>{console.error(s),this.categories={},this.error=s.toString()})}},computed:{sortedCats(){return x.orderBy(this.categories,"disporder")},haveResults(){return this.categories?Object.keys(this.categories).length>0:!1}}},te={key:0,class:"loading"},re={key:1},ae={key:0,class:"error"},se={key:1},oe={class:"container text-center mt-5"},ne={class:"list-inline"},ie=["onClick"],le={class:"container-fluid"},ce=["id"],de={class:"table table-striped table-hover"},ue={key:2},_e=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No results yet...")],-1),he=[_e];function pe(l,s,i,_,t,o){const d=v("ResultRow");return t.loading?(r(),a("div",te,"Loading...")):(r(),a("div",re,[t.error?(r(),a("div",ae,c(t.error),1)):b("",!0),o.haveResults?(r(),a("div",se,[e("div",oe,[e("ul",ne,[(r(!0),a(u,null,h(o.sortedCats,(n,m)=>(r(),a("li",{key:n.id,class:"list-inline-item"},[e("a",{role:"button",onClick:p=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,ie)]))),128))])]),e("div",le,[(r(!0),a(u,null,h(o.sortedCats,(n,m)=>(r(),a("div",{key:n.id,class:"mt-5"},[e("h3",{id:n.id},c(n.catdispname),9,ce),e("table",de,[e("thead",null,[e("tr",null,[(r(!0),a(u,null,h(n.columns,(p,f)=>(r(),a("th",{scope:"col",key:f},c(p),1))),128))])]),e("tbody",null,[(r(!0),a(u,null,h(n.results,(p,f)=>(r(),a("tr",{key:f},[g(d,{totLaps:n.laps,Pos:f,data:p},null,8,["totLaps","Pos","data"])]))),128))])]),e("a",{role:"button",onClick:s[0]||(s[0]=p=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(r(),a("div",ue,he))]))}var me=y(ee,[["render",pe]]);const fe=C({history:S("/"),routes:[{path:"/race/:raceid",component:me}]});const k=B(Q);k.use(fe);k.mount("#app");
