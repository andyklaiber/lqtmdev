import{_ as D,R as N,o as r,c as a,a as p,r as k,b as e,d as b,t as l,e as h,w as S,f as R,n as w,p as O,g as L,h as $,i as u,F as g,j as v,k as x,l as V,m as A,q as U,s as Y,u as j,v as q}from"./main-f493fa7a.js";const H={components:{RouterView:N},data(){return{races:[]}},mounted:function(){},computed:{}},W={class:"container"};function K(t,s,c,m,i,o){const y=k("RouterView");return r(),a("div",W,[p(y)])}const z=D(H,[["render",K]]),G={props:["url"],created(){(function(t,s,c){var m,i=t.getElementsByTagName(s)[0];t.getElementById(c)||(m=t.createElement(s),m.id=c,m.src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v15.0",i.parentNode.insertBefore(m,i))})(document,"script","facebook-jssdk")},mounted(){window.FB&&FB.XFBML.parse()}},J={id:"1"},X=e("div",{id:"fb-root"},null,-1),Q=["data-href"];function Z(t,s,c,m,i,o){return r(),a("div",J,[X,e("div",{class:"fb-share-button","data-href":this.url,"data-layout":"button","data-size":"large"},null,8,Q)])}const ee=D(G,[["render",Z]]),te={components:{FbShareComponent:ee},props:["details","raceid","compactMode"],data(){return{}},computed:{isRosterPage(){return this.$route.path.includes("/roster/")},isRegPage(){return this.$route.name==="register"},regDisabled(){return b().isBefore(this.details.regOpenDate)},regEnded(){return b().isAfter(this.details.regCloseDate)},regTimeToOpen(){return b().to(this.details.regOpenDate)},regTimeToClose(){return b().to(this.details.regCloseDate)},imgWidth(){return this.compactMode?150:225}}},se={class:"container mb-4"},re={class:"row p-1 pb-0 pe-lg-0 pt-lg-3 align-items-center rounded-3 border shadow"},ae={class:"col-sm-3 offset-sm-1 p-0"},oe=["href"],ie=["src","width"],ne={class:"col-lg-7 p-3 p-lg-3 pt-lg-3"},le={class:"row"},ce={class:"col col-md-auto"},de={class:"display-7 fw-bold lh-3"},ue={key:0,class:"lead mb-0 fw-bold"},he={class:"display-9"},me={key:0,class:"d-grid gap-2 d-md-flex justify-content-md mb-4 mb-lg-3"},_e={class:"col-md-auto"},pe=["href"],ge={class:"col col-lg-2"},ye={key:0},fe={key:1,class:"fw-bold"},ve={key:2,class:"row"},be={key:0,class:"fw-bold"},ke={key:0,class:"fw-bold"},De={key:1,class:"fw-bold"},Ce={key:1,class:"col col-md-auto"},$e={key:2,class:"col"};function Se(t,s,c,m,i,o){var n;const y=k("FbShareComponent"),_=k("RouterLink");return r(),a("div",se,[e("div",re,[e("div",ae,[e("a",{href:c.details.homepageUrl},[e("img",{class:"pb-1",src:c.details.logoUrl,alt:"",width:o.imgWidth},null,8,ie)],8,oe)]),e("div",ne,[e("div",le,[e("div",ce,[e("h3",de,l(c.details.name),1),c.compactMode?h("",!0):(r(),a("p",ue,l(c.details.tagline),1))])]),e("p",he,l(c.details.formattedDates),1),c.details.homepageUrl&&!c.compactMode?(r(),a("div",me,[e("div",_e,[e("a",{class:"btn btn-sm btn-success",href:c.details.homepageUrl},"Event Homepage",8,pe)]),e("div",ge,[c.details.facebookShare?(r(),a("div",ye,[p(y,{url:c.details.homepageUrl},null,8,["url"])])):h("",!0)])])):h("",!0),o.regDisabled?(r(),a("div",fe," Registration will open "+l(o.regTimeToOpen),1)):(r(),a("div",ve,[(n=c.details)!=null&&n.regCloseDate?(r(),a("div",be,[o.regEnded?(r(),a("div",ke," Registration is closed ")):(r(),a("div",De," Registration will close "+l(o.regTimeToClose),1))])):h("",!0),!o.isRegPage&&!o.regEnded?(r(),a("div",Ce,[p(_,{class:"btn btn-success",to:{name:"register",params:{raceid:c.raceid}}},{default:S(()=>[R("Register")]),_:1},8,["to"])])):h("",!0),o.isRosterPage?h("",!0):(r(),a("div",$e,[p(_,{class:"btn btn-secondary",to:{name:"roster",params:{raceid:c.raceid}}},{default:S(()=>[R("See who is signed up ")]),_:1},8,["to"])]))]))])])])}const T=D(te,[["render",Se]]);const Re={props:["races"],data(){return{count:0,loggedIn:!1}},computed:{}},I=t=>(O("data-v-2f3c77b1"),t=t(),L(),t),we={class:"navbar navbar-expand-md navbar-dark bg-dark fixed-top"},xe={class:"container-fluid"},Te=I(()=>e("a",{class:"navbar-brand",href:"/"},"Signup.bike",-1)),Pe=I(()=>e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarsExample04","aria-controls":"navbarsExample04","aria-expanded":"false","aria-label":"Toggle navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),Ee={class:"collapse navbar-collapse",id:"navbarsExample04"},Fe={class:"navbar-nav me-auto mb-4 mb-md-0 px-5"},Be={class:"nav-item"};function Me(t,s,c,m,i,o){const y=k("RouterLink");return r(),a("nav",we,[e("div",xe,[Te,Pe,e("div",Ee,[e("ul",Fe,[e("li",Be,[p(y,{class:w(["nav-link",{active:t.$route.name=="home"}]),to:{name:"home"}},{default:S(()=>[R(" Upcoming Races ")]),_:1},8,["class"])])]),i.loggedIn?(r(),a("button",{key:0,type:"button",class:"btn btn-secondary",onClick:s[0]||(s[0]=_=>t.$emit("logout"))},"Logout")):h("",!0)])])])}const P=D(Re,[["render",Me],["__scopeId","data-v-2f3c77b1"]]);const Ne={emits:["logout"],components:{MainNav:P,RouterView:N,EventDetailsComponent:T},data(){return{count:0,races:[],loading:!0}},created(){this.$watch(()=>this.$route.query,()=>{this.fetchData()},{immediate:!0})},methods:{fetchData(){if(this.error=null,this.loading=!0,console.log("fetch plz"),this.$route)return $("/api/races/").then(t=>{this.races=t.data,this.loading=!1,console.log("fetched"),console.log(this.races)}).catch(t=>{this.loading=!1,this.error=t.toString(),console.error(t)})}},computed:{displayRaces(){return u.filter(this.races,s=>{let c=b().isBefore(b(`${b(s.eventDate).format("YYYY-MM-DD")} 12:00`));return!(s.isTestData&&!this.$route.query.test||!c&&!this.$route.query.past)})},loggedIn(){return!1}}},Ie={key:0},Oe={key:1};function Le(t,s,c,m,i,o){const y=k("MainNav"),_=k("EventDetailsComponent");return r(),a(g,null,[p(y),i.loading?(r(),a("div",Ie," Plz wait, loading... ")):(r(),a("div",Oe,[(r(!0),a(g,null,v(o.displayRaces,(n,f)=>(r(),a("div",{key:f},[p(_,{details:n.eventDetails,raceid:n.raceid,"compact-mode":"true"},null,8,["details","raceid"])]))),128))]))],64)}const B=D(Ne,[["render",Le],["__scopeId","data-v-8750fd74"]]);let Ve=t=>{const s=new Date(Date.UTC(0,0,0,0,0,0,t));let m=[s.getUTCMinutes(),s.getUTCSeconds()].map(i=>String(i).padStart(2,"0")).join(":");return s.getUTCHours()&&(m=s.getUTCHours()+":"+m),m};const Ae={props:["data","Pos","totLaps"],data(){return{count:0}},computed:{incompleteLaps(){return new Array(this.totLaps-this.data.laps.length).fill("-")},formattedTime(){return Ve(this.data.duration)}}};function Ue(t,s,c,m,i,o){return r(),a(g,null,[e("td",null,l(c.Pos+1),1),e("td",null,l(c.data.Bib),1),e("td",null,l(c.data.Name),1),e("td",null,l(c.data.Sponsor),1),(r(!0),a(g,null,v(c.data.laps,(y,_)=>(r(),a("td",{key:_},l(y.timeString),1))),128)),c.totLaps-c.data.laps.length>0?(r(!0),a(g,{key:0},v(o.incompleteLaps,y=>(r(),a("td",null,l(y),1))),256)):h("",!0),e("td",null,l(o.formattedTime),1),e("td",null,l(c.data.back||"-"),1)],64)}const Ye=D(Ae,[["render",Ue]]),je={props:["series"],data(){return{count:0,seriesData:{}}},created(){this.$watch(()=>this.series,function(){if(!this.series)return;let t=`/api/series/${this.series}/races`;$(t).then(({data:s})=>{this.seriesData=s})})},computed:{isPcrs(){return this.series&&this.series.indexOf("pcrs")>-1}}},qe={id:"top",class:"navbar navbar-light bg-light"},He={class:"container-fluid"},We={class:"navbar-brand",href:"#"},Ke={key:0,class:"nav-item"},ze=["href"],Ge=e("p",{class:"mt-3"},"View Weekly lap times:",-1),Je={class:"nav nav-tabs mt-1 justify-content-center"},Xe={key:0,class:"nav-item"},Qe={key:1,class:"nav-item"},Ze={key:2,class:"nav-item"};function et(t,s,c,m,i,o){const y=k("RouterLink");return r(),a(g,null,[e("nav",qe,[e("div",He,[e("div",We,l(i.seriesData.displayName),1),i.seriesData.homepage?(r(),a("div",Ke,[e("a",{class:"nav-link active","aria-current":"page",href:i.seriesData.homepage.url},l(i.seriesData.homepage.linkString),9,ze)])):h("",!0)])]),Ge,e("ul",Je,[(r(!0),a(g,null,v(i.seriesData.races,_=>(r(),a("li",{key:_.raceid,class:"nav-item"},[p(y,{class:w(["nav-link",{active:t.$route.params.raceid===_.raceid}]),to:`/race/${_.raceid}`},{default:S(()=>[R(l(_.displayName+` - ${_.formattedStartDate}`),1)]),_:2},1032,["class","to"])]))),128)),o.isPcrs?(r(),a("li",Xe,[p(y,{class:w(["nav-link",{active:t.$route.path=="/series/pcrs_2022"}]),to:"/series/pcrs_2022"},{default:S(()=>[R("Series Standings")]),_:1},8,["class"])])):h("",!0),o.isPcrs?(r(),a("li",Qe,[p(y,{class:w(["nav-link",{active:t.$route.path=="/series/grom/pcrs_2022"}]),to:"/series/grom/pcrs_2022"},{default:S(()=>[R("Grom Series Standings")]),_:1},8,["class"])])):h("",!0),o.isPcrs?(r(),a("li",Ze,[p(y,{class:w(["nav-link",{active:t.$route.path=="/teamcomp/pcrs_2022"}]),to:"/teamcomp/pcrs_2022"},{default:S(()=>[R("Team Competition")]),_:1},8,["class"])])):h("",!0)])],64)}const E=D(je,[["render",et]]);const tt={components:{ResultRow:Ye,SeriesNavBar:E},data(){return{categories:{},loading:!1,error:null,formattedStartDate:"",series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(t){var s=document.querySelector(`#${t}`);s.scrollIntoView({behavior:"smooth"})},fetchData(){if(this.error=null,this.loading=!0,this.$route.params.raceid){let t=`/api/races/results/${this.$route.params.raceid}`;$(t).then(({data:s})=>{this.formattedStartDate=s.raceMeta.formattedStartDate,this.series=s.series,this.loading=!1,this.categories=s.categories}).catch(s=>{console.error(s),this.categories={},this.error=s.toString()})}}},computed:{sortedCats(){return u.orderBy(this.categories,"disporder")},expertCats(){return u.filter(this.sortedCats,{laps:4})},sportCats(){return u.filter(this.sortedCats,{laps:3})},beginnerCats(){return u.filter(this.sortedCats,{laps:2})},gromCats(){return u.filter(this.categories,t=>t.id.indexOf("grom")>-1)},haveResults(){return this.categories?Object.keys(this.categories).length>0:!1}}},st={key:0,class:"text-center"},rt={class:"mt-5"},at={key:1,class:"loading"},ot={key:2},it={key:0,class:"error"},nt={key:1},lt={class:"container text-center mt-5"},ct={class:"list-inline"},dt=["onClick"],ut={class:"list-inline"},ht=["onClick"],mt={class:"list-inline"},_t=["onClick"],pt={class:"list-inline"},gt=["onClick"],yt={class:"container-fluid"},ft=["id"],vt={class:"table table-striped table-hover"},bt={key:2},kt=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No results yet...")],-1),Dt=[kt];function Ct(t,s,c,m,i,o){const y=k("SeriesNavBar"),_=k("ResultRow");return r(),a(g,null,[p(y,{series:i.series},null,8,["series"]),i.formattedStartDate?(r(),a("div",st,[e("h2",rt,"Race Results - "+l(i.formattedStartDate),1)])):h("",!0),i.loading?(r(),a("div",at,"Loading...")):(r(),a("div",ot,[i.error?(r(),a("div",it,l(i.error),1)):h("",!0),o.haveResults?(r(),a("div",nt,[e("div",lt,[e("ul",ct,[(r(!0),a(g,null,v(o.expertCats,(n,f)=>(r(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:d=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,dt)]))),128))]),e("ul",ut,[(r(!0),a(g,null,v(o.sportCats,(n,f)=>(r(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:d=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,ht)]))),128))]),e("ul",mt,[(r(!0),a(g,null,v(o.beginnerCats,(n,f)=>(r(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:d=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,_t)]))),128))]),e("ul",pt,[(r(!0),a(g,null,v(o.gromCats,(n,f)=>(r(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:d=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,gt)]))),128))])]),e("div",yt,[(r(!0),a(g,null,v(o.sortedCats,(n,f)=>(r(),a("div",{key:n.id,class:"mt-5"},[e("h3",{id:n.id},l(n.catdispname),9,ft),e("table",vt,[e("thead",null,[e("tr",null,[(r(!0),a(g,null,v(n.columns,(d,C)=>(r(),a("th",{scope:"col",key:C},l(d),1))),128))])]),e("tbody",null,[(r(!0),a(g,null,v(n.results,(d,C)=>(r(),a("tr",{key:C},[p(_,{totLaps:n.laps,Pos:C,data:d},null,8,["totLaps","Pos","data"])]))),128))])]),e("a",{role:"button",onClick:s[0]||(s[0]=d=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(r(),a("div",bt,Dt))]))],64)}const $t=D(tt,[["render",Ct]]),St={props:["categories","raceDate"],data(){return{}},methods:{formatStartTime(t){return b(`${b(this.raceDate).format("YYYY-MM-DD")} ${t}`).format("h:mm A")}},computed:{groupByStartTimes(){return u.groupBy(u.orderBy(this.categories,["startTime","disporder"]),"startTime")},hasStartTimes(){return!!u.some(this.categories,"startTime")}}},Rt={key:0},wt=e("h5",null,"Race Start Times:",-1),xt={class:"row gap-5 mb-3"},Tt={class:""},Pt={class:"row g-2 px-4 gx-4 border bg-light"};function Et(t,s,c,m,i,o){return c.categories.length&&o.hasStartTimes?(r(),a("div",Rt,[wt,e("div",xt,[(r(!0),a(g,null,v(o.groupByStartTimes,(y,_)=>(r(),a("div",{key:_,class:"col-md-5"},[e("h6",Tt,l(o.formatStartTime(_))+":",1),e("div",Pt,[(r(!0),a(g,null,v(o.groupByStartTimes[_],n=>(r(),a("div",{key:n.id,class:"col-lg text-nowrap my-1"},l(n.catdispname),1))),128))])]))),128))])])):h("",!0)}const Ft=D(St,[["render",Et]]);let Bt=u.debounce((t,s)=>{window.localStorage.setItem(`race-reg-form-data-${s}`,JSON.stringify(t))},3500),Mt=t=>{let s=window.localStorage.getItem(`race-reg-form-data-${t}`);return s?JSON.parse(s):null},Nt=t=>{window.localStorage.removeItem(`race-reg-form-data-${t}`)};function It(t){if(t===0)return 0;let s=t*100,c=s*.04;return c>600&&(c=600),Math.round((s+c+30)/(1-.029))-s}const Ot={components:{MainNav:P,EventDetailsComponent:T,EventCategoryScheduleComponent:Ft},data(){return{categories:{},loading:!1,error:null,formError:[],formInputData:{},raceData:{},payment:"",birthdate:"",submitted:!1,waiverAccepted:!1,couponError:[],prevBibError:[],seriesRaces:{},seriesRaceIdx:0,previousReg:!1,prevAge:null}},created(){this.$watch(()=>this.$route.params.raceid,()=>{this.fetchData()},{immediate:!0})},watch:{formInputData:{handler(t,s){this.previousReg==!1&&Bt(t,this.$route.params.raceid)},deep:!0}},methods:{dollas(t){return t.toLocaleString("en-US",{style:"currency",currency:"USD"})},fetchData(){this.error=null,this.loading=!0,this.$route.params.raceid&&$(`/api/races/${this.$route.params.raceid}`).then(async t=>{var c;this.raceData=t.data;let s=Mt(this.$route.params.raceid);s&&(u.find((c=this.raceData)==null?void 0:c.regCategories,{id:s.category})||delete s.category,s.waiverAccepted=!1,this.formInputData=s),this.raceData.series&&this.raceData.toString().length>1&&await $(`/api/series/${this.raceData.series}/registration`).then(({data:m})=>{this.seriesRaces=m;let i=b();this.seriesRaceIdx=0,u.some(m,({eventDate:o,raceid:y},_)=>b(o).add(21,"hour").isBefore(i)?(console.log(b(o).add(21,"hour").format()),console.log(i.format()),!1):(this.seriesRaceIdx=_,this.$router.push(`/register/${y}`),!0))}),this.loading=!1,this.payment=this.raceData.paymentOptions[0].type}).catch(t=>{this.loading=!1,this.error=t.toString(),console.error(t)})},findPrevBib(t){$.post("/api/racers/bib",{series:`${this.raceData.series}`,bibNumber:t}).then(({data:s})=>{if(console.log("prevbib"),console.log(s),s.paytype==="season"){this.prevBibError=["You are already registered for the whole season"];return}s.prevPaymentId=s.paymentId,delete s.paymentId,this.formInputData=s,this.prevAge=s.racerAge}).catch(({response:s})=>{console.dir(s),s.status==404&&(this.prevBibError=[s.data.message])})},onPrevBibChange(t){t?this.findPrevBib(t):(this.prevBibError=[],this.prevAge=null)},getCouponPricing(t){$.post("/api/payments/pricing",{raceid:`${this.$route.params.raceid}`,couponCode:t}).then(({data:s})=>{if(this.raceData.paymentOptions=s.paymentOptions,s.validCoupon)this.couponError=[];else{if(s.reason)return this.couponError=[s.reason];this.couponError=["Invalid Coupon Code"]}})},onCouponChange(t){t?this.getCouponPricing(t):this.couponError=[]},submitForm(t){t.preventDefault(),this.$formkit.submit("race-registration")},async submit(t){console.log(t),t.birthdate=void 0,t.racerAge=this.racerAge,t.paytype=this.payment,t.timestamp=b().format(),await $.post(`/api/payments/start-registration?race=${this.raceData.raceid}`,t).then(s=>{if(s.data){if(console.log("response data"),console.log(s.data),s.data.redirect)return this.submitted=!0,Nt(this.$route.params.raceid),new Promise(c=>setTimeout(()=>{window.location.href=s.data.redirect,c()},2e3));s.data.message&&(this.formError=[s.data.message])}}).catch(s=>{var c,m;if((m=(c=s.response)==null?void 0:c.data)!=null&&m.message)return this.formError=[s.response.data.message];this.formError=["Error submitting request"]})},getEventTimeObj(t){return b(`${b(this.raceData.eventDate).format("YYYY-MM-DD")} ${t}`)}},computed:{startTimes(){return this.hasStartTimes?u.map(u.uniqBy(this.raceData.regCategories,"startTime"),"startTime"):null},hasStartTimes(){return!!u.some(this.raceData.regCategories,"startTime")},currentTime(){return b().local().format()},firstRaceTime(){return this.hasStartTimes?b.min(u.map(this.startTimes,t=>b(`${this.eventDateFormatted} ${t}`))):null},lastRaceTime(){return this.hasStartTimes?b.max(u.map(this.startTimes,t=>b(`${this.eventDateFormatted} ${t}`))):null},sortedCats(){const t=u.filter(this.raceData.regCategories,c=>!0);let s={};return u.forEach(u.orderBy(t,"disporder"),c=>{s[c.id]=c.catdispname}),s},loaded(){return!!this.raceData},submitLabel(){return this.payment=="cash"?"Sign Up!":"Go to Payment"},cashEnabled(){return!this.raceData.cashPaymentsEnabled||!this.lastRaceTime?!1:b().isAfter(this.firstRaceTime.subtract(6,"hour"))},eventDateFormatted(){return b(this.raceData.eventDate).format("YYYY-MM-DD")},regDisabled(){return this.$route.query.test!==void 0?!1:this.eventFull||b().isBefore(this.raceData.eventDetails.regOpenDate)||this.raceData.eventDetails.regCloseDate&&b().isAfter(this.raceData.eventDetails.regCloseDate)?!0:this.lastRaceTime?b().isAfter(this.lastRaceTime.subtract(5,"minute")):!1},eventFull(){return!!(this.raceData.entryCountMax&&this.raceData.entryCountMax>1&&this.raceData.entryCount>=this.raceData.entryCountMax)},paymentOptions(){let t={};return u.forEach(this.raceData.paymentOptions,s=>{t[s.type]=s.name}),this.cashEnabled&&(t.cash="Cash Payment (Today's Race)"),t},paymentCostDets(){var o,y;if(this.sponsoredCategorySelected)return this.payment="season",{cost:this.dollas(0),regFee:this.dollas(0),tot:this.dollas(0)};let t;this.payment==="cash"?t="single":t=this.payment;const s=u.find((o=this.raceData)==null?void 0:o.paymentOptions,_=>_.type===t);if(!s)return null;const c=parseFloat(s.amount);let m=0;c>0&&this.payment!=="cash"&&(m=(s.regFee+s.stripeFee)/100);const i={};if(u.assign(i,s,{name:s.name,cost:this.dollas(c),regFee:this.dollas(m),tot:this.dollas(parseFloat(s.amount)+parseFloat(m))}),(y=this.raceData)!=null&&y.optionalPurchases&&this.formInputData.optionalPurchases){let _=c;this.raceData.optionalPurchases.forEach(({id:n,label:f,description:d,amount:C})=>{this.formInputData.optionalPurchases[n]&&(i.options||(i.options=[]),i.options.push({description:d,label:f,id:n,amount:this.dollas(parseFloat(C))}),_+=parseFloat(C))}),m=It(_)/100,i.regFee=this.dollas(m),i.tot=this.dollas(_+m)}return i},showPaymentOption(){return this.sponsoredCategorySelected?!1:this.cashEnabled?!0:!(this.raceData.paymentOptions&&this.raceData.paymentOptions.length<2)},sponsoredCategorySelected(){var t;return!!((t=this.selectedCategory)!=null&&t.sponsored)},selectedCategory(){var t,s;return this.formInputData&&this.formInputData.category?u.find((t=this.raceData)==null?void 0:t.regCategories,{id:(s=this.formInputData)==null?void 0:s.category}):null},racerAge(){if(this.prevAge)return this.prevAge;if(this.birthdate){const t=b(),s=b(this.birthdate);return t.year()-s.year()}}}},Lt={key:0,class:"loading"},Vt={key:1},At={key:0,class:"error"},Ut={key:1},Yt={key:0,class:"h5"},jt={key:1},qt=e("h3",null,"Registration is closed.",-1),Ht=[qt],Wt={key:2,class:"mb-5"},Kt={key:0},zt={class:"row"},Gt={class:"col-md-6 order-md-1 mb-3"},Jt=e("h4",{class:"d-flex justify-content-between align-items-center mb-3"},[e("h5",null,"Registration Info"),e("span",{class:"badge badge-secondary badge-pill"},"3")],-1),Xt={class:"form-group pt-3"},Qt={class:"form-group pt-3"},Zt={key:0,class:"col-md-5 order-md-2 mb-4"},es=e("h4",{class:"d-flex justify-content-between align-items-center mb-3"},[e("h5",null,"Payment Detail")],-1),ts={class:"list-group mb-3"},ss={class:"list-group mb-3"},rs={key:0},as={class:"list-group mb-3"},os=["innerHTML"],is={class:"list-group mb-3 formkit-fieldset"},ns={class:"list-group-item d-flex justify-content-between lh-condensed"},ls=e("h6",{class:"my-0"},"Event Entry:",-1),cs={class:"text-muted"},ds={key:0,class:"mx-3 text-decoration-line-through text-danger"},us={class:"list-group-item d-flex justify-content-between lh-condensed"},hs={class:"my-0"},ms={key:0,class:"text-muted"},_s={class:"list-group-item d-flex justify-content-between lh-condensed"},ps=e("div",null,[e("h6",{class:"my-0"},"Online Processing Fee:"),e("small",{class:"text-muted"},"Credit Card Processing and Online Registration")],-1),gs={class:"text-muted"},ys={class:"list-group-item d-flex justify-content-between"},fs=e("span",null,"Total (USD)",-1),vs={key:0},bs=e("h2",{class:"text-danger"},"Your registration will not be active until payment is received at the event",-1),ks=[bs],Ds={key:1},Cs={key:2},$s={key:1},Ss=e("h2",null,"Submission successful, redirecting",-1),Rs=[Ss],ws={key:2},xs=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"Race not available for registration...")],-1),Ts=[xs];function Ps(t,s,c,m,i,o){const y=k("MainNav"),_=k("EventDetailsComponent"),n=k("FormKit"),f=k("EventCategoryScheduleComponent");return r(),a(g,null,[p(y),i.loading?(r(),a("div",Lt,"Loading...")):(r(),a("div",Vt,[i.error?(r(),a("div",At,l(i.error),1)):h("",!0),o.loaded?(r(),a("div",Ut,[p(_,{details:i.raceData.eventDetails,raceid:i.raceData.raceid},null,8,["details","raceid"]),o.eventFull?(r(),a("div",Yt,"This event has reached the registration entry max of "+l(i.raceData.entryCountMax),1)):h("",!0),o.regDisabled?(r(),a("div",jt,Ht)):(r(),a("div",Wt,[i.seriesRaceIdx>0?(r(),a("div",Kt,[p(n,{"label-class":"text-danger fw-bold fs-5",type:"checkbox",name:"prevBibLookup",label:"I have a bib number!",help:"Look up your information from a previous race",modelValue:i.previousReg,"onUpdate:modelValue":s[0]||(s[0]=d=>i.previousReg=d)},null,8,["modelValue"]),i.previousReg?(r(),x(n,{key:0,type:"number",name:"bibNumber",label:"Bib Number:",help:"Enter your Bib Number from your previous race to pre-fill your info",delay:1500,onInput:o.onPrevBibChange,errors:i.prevBibError,validation:"required"},null,8,["onInput","errors"])):h("",!0)])):h("",!0),p(n,{type:"form",id:"race-registration",modelValue:i.formInputData,"onUpdate:modelValue":s[4]||(s[4]=d=>i.formInputData=d),"form-class":i.submitted?"hide":"show",errors:i.formError,actions:!1,onSubmit:o.submit},{default:S(()=>[e("div",zt,[e("div",Gt,[Jt,p(n,{type:"text",name:"first_name",label:"First name",help:"What is your first name",validation:"required"}),p(n,{type:"text",name:"last_name",label:"Last name",help:"What is your last name",validation:"required"}),e("div",Xt,[i.previousReg?h("",!0):(r(),x(n,{key:0,type:"email",name:"email",label:"Your email",help:"Enter an email address",validation:"required|email"}))]),p(n,{type:"text",name:"sponsor",label:"Your Team or Sponsor",help:"Enter an optional Team or Sponsor name"}),i.previousReg?h("",!0):(r(),x(n,{key:0,type:"date",value:"2001-01-01",name:"birthdate",label:"Birthday",modelValue:i.birthdate,"onUpdate:modelValue":s[1]||(s[1]=d=>i.birthdate=d),help:"Enter your birthdate",validation:"required|before:2020-01-01","validation-visibility":"live"},null,8,["modelValue"])),e("div",null,"Age: "+l(o.racerAge),1),e("div",Qt,[p(n,{type:"select",id:"category",label:"Category:",placeholder:"Select a category",name:"category",options:o.sortedCats,validation:"required","validation-visibility":"dirty","validation-messages":{is:"You must select a category"}},null,8,["options"])])]),o.paymentCostDets?(r(),a("div",Zt,[es,e("fieldset",ts,[e("div",null,[i.raceData.couponsEnabled?(r(),x(n,{key:0,type:"text",name:"coupon",label:"Coupon Code",help:"",delay:1e3,onInput:o.onCouponChange,errors:i.couponError},null,8,["onInput","errors"])):h("",!0)])]),e("fieldset",ss,[e("div",null,[o.showPaymentOption?(r(),x(n,{key:0,type:"radio",name:"paytype",label:"Payment option",options:o.paymentOptions,validation:"required",modelValue:i.payment,"onUpdate:modelValue":s[2]||(s[2]=d=>i.payment=d)},null,8,["options","modelValue"])):h("",!0)])]),i.raceData.optionalPurchases?(r(),a("div",rs,[p(n,{type:"group",name:"optionalPurchases"},{default:S(()=>[(r(!0),a(g,null,v(i.raceData.optionalPurchases,(d,C)=>(r(),a("div",as,[e("h6",{innerHTML:d.description},null,8,os),p(n,{type:"checkbox",label:`${d.label} - ${o.dollas(parseFloat(d.amount))}`,name:d.id},null,8,["label","name"]),d.options&&i.formInputData.optionalPurchases[d.id]?(r(),x(n,{key:0,type:"select",options:d.options,label:d.optionsLabel,name:`${d.id}-option`},null,8,["options","label","name"])):h("",!0)]))),256))]),_:1})])):h("",!0),e("ul",is,[e("li",ns,[e("div",null,[ls,e("small",cs,l(o.paymentCostDets.name),1)]),e("div",null,[o.paymentCostDets.discounted?(r(),a("span",ds,l(o.dollas(o.paymentCostDets.orig)),1)):h("",!0),e("span",{class:w({"text-success":o.paymentCostDets.discounted})},l(o.paymentCostDets.cost),3)])]),o.paymentCostDets.options?(r(!0),a(g,{key:0},v(o.paymentCostDets.options,(d,C)=>(r(),a("li",us,[e("div",null,[e("h6",hs,l(d.label),1),d.option?(r(),a("small",ms,l(d.option),1)):h("",!0)]),e("div",null,[e("span",null,l(d.amount),1)])]))),256)):h("",!0),e("li",_s,[ps,e("span",gs,l(o.paymentCostDets.regFee),1)]),e("li",ys,[fs,e("strong",null,l(o.paymentCostDets.tot),1)])])])):h("",!0)]),i.payment==="cash"?(r(),a("div",vs,ks)):h("",!0),i.raceData.waiver?(r(),a("div",Ds,[e("h5",null,l(i.raceData.waiver.header),1),e("p",null,l(i.raceData.waiver.text),1),p(n,{type:"checkbox",modelValue:i.waiverAccepted,"onUpdate:modelValue":s[3]||(s[3]=d=>i.waiverAccepted=d),label:"I HAVE READ AND UNDERSTAND THIS WAIVER",help:"I acknowledge that I have read, understand, and accepted the above release of liability.",name:"waiverAccepted",validation:"accepted","validation-messages":{accepted:"You must agree to the terms of the liability release above"},"validation-visibility":"live"},null,8,["modelValue"])])):h("",!0),o.sponsoredCategorySelected?(r(),a("div",Cs,[e("h5",null,"Your "+l(o.selectedCategory.catdispname)+" race entry is sponsored by "+l(o.selectedCategory.sponsorName),1),p(n,{type:"submit",label:"Sign Up!",onClick:o.submitForm},null,8,["onClick"])])):h("",!0),o.sponsoredCategorySelected?h("",!0):(r(),x(n,{key:3,type:"submit",label:o.submitLabel,onClick:o.submitForm},null,8,["label","onClick"]))]),_:1},8,["modelValue","form-class","errors","onSubmit"]),i.submitted?(r(),a("div",$s,Rs)):h("",!0)])),p(f,{categories:i.raceData.regCategories,raceDate:i.raceData.eventDate},null,8,["categories","raceDate"])])):(r(),a("div",ws,Ts))]))],64)}const Es=D(Ot,[["render",Ps]]);const Fs={components:{EventDetailsComponent:T,MainNav:P},data(){return{categories:{},loading:!1,error:null,raceData:{},regData:{},payment:"",payStatus:!1}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{fetchData(){this.error=null,this.loading=!0,this.$route.params.raceid&&this.$route.params.payment_id&&$(`/api/races/${this.$route.params.raceid}`).then(t=>(this.raceData=t.data,$(`/api/payments/status?payment_id=${this.$route.params.payment_id}`).then(s=>{var c;this.loading=!1,this.payStatus=s.data.status,this.paymentUrl=(c=s.data.stripePayment)==null?void 0:c.url,this.regData=s.data.regData,this.payment=s.data.regData.paytype}))).catch(t=>{this.error="Failed to load race "+this.$route.params.raceid,console.error(t)})}},computed:{sortedCats(){let t={};return u.forEach(u.orderBy(this.raceData.regCategories,"disporder"),s=>{t[s.id]=s.catdispname}),t},loaded(){return!!this.raceData},paymentOptions(){let t={};return u.forEach(this.raceData.paymentOptions,s=>{t[s.type]=s.name}),t},pendingPayment(){return!!(this.regData.raceid!=this.$route.params.raceid||this.payStatus&&this.payStatus!="paid")},sponsoredCategorySelected(){var t;return!!((t=this.selectedCategory)!=null&&t.sponsored)},selectedCategory(){return u.find(this.raceData.regCategories,{id:this.regData.category})}}},Bs={key:0,class:"loading"},Ms={key:1},Ns={key:0,class:"error"},Is={key:1},Os={class:"row"},Ls={class:"col-md-6 order-md-1"},Vs={key:0},As=e("div",{class:"d-flex justify-content-between align-items-center mb-3"},[e("h4",null,"Your Registration is Confirmed")],-1),Us=[As],Ys={key:1,class:"mb-5"},js=e("div",{class:"d-flex justify-content-between align-items-center mb-3"},[e("h4",null,"Your Registration is Incomplete")],-1),qs={key:0},Hs=e("p",{class:"text-danger h5"},"Please make your cash payment at the event to complete your registration.",-1),Ws=e("p",null,'Your name will not show up on the "Who is signed up" list until payment is completed.',-1),Ks=[Hs,Ws],zs={key:1},Gs=["href"],Js={class:"col"},Xs={class:"row"},Qs={class:"form-group pt-3"},Zs={class:"form-group pt-3"},er={key:2},tr=e("a",{href:"mailto:support@signup.bike"},"support@signup.bike",-1),sr={key:2},rr={class:"text-center"},ar={class:"mt-5"};function or(t,s,c,m,i,o){const y=k("MainNav"),_=k("EventDetailsComponent"),n=k("FormKit");return r(),a(g,null,[p(y),i.loading?(r(),a("div",Bs,"Loading...")):(r(),a("div",Ms,[i.error?(r(),a("div",Ns,l(i.error),1)):h("",!0),o.loaded?(r(),a("div",Is,[p(_,{details:i.raceData.eventDetails,raceid:i.raceData.raceid},null,8,["details","raceid"]),p(n,{type:"form",id:"race-registration",disabled:"",actions:!1,modelValue:i.regData,"onUpdate:modelValue":s[0]||(s[0]=f=>i.regData=f)},{default:S(()=>[e("div",Os,[e("div",Ls,[o.pendingPayment?h("",!0):(r(),a("div",Vs,Us)),o.pendingPayment?(r(),a("div",Ys,[js,i.payment==="cash"?(r(),a("div",qs,Ks)):(r(),a("div",zs,[e("a",{href:t.paymentUrl},"Complete your payment",8,Gs)]))])):h("",!0),e("div",Js,[e("div",Xs,[p(n,{type:"text",name:"first_name",label:"First name"}),p(n,{type:"text",name:"last_name",label:"Last name"})])]),e("div",Qs,[p(n,{type:"email",name:"email",label:"Email"})]),e("div",Zs,[p(n,{type:"text",name:"sponsor",label:"Your Team or Sponsor"}),p(n,{type:"select",label:"Race Category:",name:"category",options:o.sortedCats},null,8,["options"])]),o.sponsoredCategorySelected?(r(),a("div",er,[e("h5",null," Your "+l(o.selectedCategory.catdispname)+" race entry is sponsored by "+l(o.selectedCategory.sponsorName),1)])):h("",!0)])])]),_:1},8,["modelValue"]),R(" Please send any corrections or questions to "),tr])):(r(),a("div",sr,[e("div",rr,[e("h2",ar," Unable to load requested information "+l(t.$route.params.raceid)+" payment: "+l(t.$route.params.payment_id),1)])]))]))],64)}const ir=D(Fs,[["render",or]]);const nr={props:["data","Pos"],data(){return{count:0}},computed:{}};function lr(t,s,c,m,i,o){return r(),a(g,null,[e("td",null,l(c.Pos+1),1),e("td",null,l(c.data.Bib),1),e("td",null,l(c.data.Name),1),e("td",null,l(c.data.Age),1),e("td",null,l(c.data.Sponsor),1),(r(!0),a(g,null,v(c.data.results,(y,_)=>(r(),a("td",{class:w({"text-danger":y.dropped}),key:_},l(y.resultString),3))),128)),e("td",null,l(c.data.seriesPoints),1)],64)}const cr=D(nr,[["render",lr]]);const dr={components:{SeriesResultRow:cr,SeriesNavBar:E},data(){return{categories:{},loading:!1,error:null,displayName:"",series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(t){var s=document.querySelector(`#${t}`);s.scrollIntoView({behavior:"smooth"})},fetchData(){if(!this.$route.params.seriesid)return;this.error=null,this.loading=!0;let t=`/api/series/results/${this.$route.params.seriesid}`;$(t).then(({data:s})=>{this.loading=!1,this.categories=s.categories,this.displayName=s.displayName,this.series=this.$route.params.seriesid;let c=u.map(s.categories,m=>u.omit(m,["results","columns"]));console.log("temp:",u.orderBy(c,"disporder"))}).catch(s=>{console.error(s),this.categories={},this.error=s.toString()})}},computed:{sortedCats(){let t;return this.$route.path.indexOf("grom")>-1?t=u.filter(this.categories,s=>s.id.indexOf("grom")>-1):t=u.filter(this.categories,s=>s.id.indexOf("grom")==-1),u.orderBy(t,"disporder")},expertCats(){return u.filter(this.sortedCats,{laps:4})},sportCats(){return u.filter(this.sortedCats,{laps:3})},beginnerCats(){return u.filter(this.sortedCats,{laps:2})},gromCats(){return this.$route.path.indexOf("grom")>-1?u.filter(this.categories,t=>t.id.indexOf("grom")>-1):[]},haveResults(){return this.categories?Object.keys(this.categories).length>0:!1}}},ur={key:0,class:"loading"},hr={key:1},mr={key:0,class:"error"},_r={class:"container-fluid text-center mt-5"},pr=e("h3",null,"Series Standings",-1),gr=e("p",null,[R("Glossary of terms below:"),e("br"),R(" 1/50 = 1st Place/50 Points -/- = Did not race")],-1),yr={key:1},fr={class:"container-fluid text-center mt-5"},vr={class:"list-inline"},br=["onClick"],kr={class:"list-inline"},Dr=["onClick"],Cr={class:"list-inline"},$r=["onClick"],Sr={class:"list-inline"},Rr=["onClick"],wr={class:"container-fluid"},xr=["id"],Tr={class:"table table-striped table-hover"},Pr={key:2},Er=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No results yet...")],-1),Fr=[Er];function Br(t,s,c,m,i,o){const y=k("SeriesNavBar"),_=k("SeriesResultRow");return r(),a(g,null,[p(y,{series:i.series},null,8,["series"]),i.loading?(r(),a("div",ur,"Loading...")):(r(),a("div",hr,[i.error?(r(),a("div",mr,l(i.error),1)):h("",!0),e("div",_r,[e("h2",null,l(i.displayName),1),pr,gr]),o.haveResults?(r(),a("div",yr,[e("div",fr,[e("ul",vr,[(r(!0),a(g,null,v(o.expertCats,n=>(r(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:f=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,br)]))),128))]),e("ul",kr,[(r(!0),a(g,null,v(o.sportCats,n=>(r(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:f=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,Dr)]))),128))]),e("ul",Cr,[(r(!0),a(g,null,v(o.beginnerCats,n=>(r(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:f=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,$r)]))),128))]),e("ul",Sr,[(r(!0),a(g,null,v(o.gromCats,n=>(r(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:f=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,Rr)]))),128))])]),e("div",wr,[(r(!0),a(g,null,v(o.sortedCats,n=>(r(),a("div",{key:n.id,class:"mt-5"},[e("h3",{id:n.id},l(n.catdispname),9,xr),e("table",Tr,[e("thead",null,[e("tr",null,[(r(!0),a(g,null,v(n.columns,(f,d)=>(r(),a("th",{scope:"col",key:d},l(f),1))),128))])]),e("tbody",null,[(r(!0),a(g,null,v(n.results,(f,d)=>(r(),a("tr",{key:d},[p(_,{Pos:d,data:f},null,8,["Pos","data"])]))),128))])]),e("a",{role:"button",onClick:s[0]||(s[0]=f=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(r(),a("div",Pr,Fr))]))],64)}const M=D(dr,[["render",Br]]),Mr={props:["data","Pos"],data(){return{count:0,dates:["5/4","5/11","5/18","5/25"]}},computed:{}};function Nr(t,s,c,m,i,o){return r(),a(g,null,[e("td",null,l(c.data.Name),1),e("td",null,l(c.data.Cat),1),(r(!0),a(g,null,v(i.dates,(y,_)=>(r(),a("td",{key:_},l(c.data[y]||"-"),1))),128))],64)}const Ir=D(Mr,[["render",Nr]]);const Or={components:{ResultRow:Ir,SeriesNavBar:E},data(){return{teamResults:{},loading:!1,error:null,series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(t){var s=document.querySelector(`#${t}`);s.scrollIntoView({behavior:"smooth"})},fetchData(){if(!this.$route.params.seriesid)return;this.error=null,this.loading=!0;let t=`/api/team-comp?series=${this.$route.params.seriesid}`;$(t).then(({data:s})=>{this.loading=!1,this.series=this.$route.params.seriesid,this.teamResults=s}).catch(s=>{console.error(s),this.teamResults={},this.error=s.toString()})}},computed:{dates:()=>{}}},Lr={key:0,class:"loading"},Vr={key:1},Ar={key:0,class:"error"},Ur=e("h2",{class:"mt-5"},"Team Standings",-1),Yr={class:"container-fluid mt-5"},jr={class:"table table-striped table-hover"},qr=e("thead",null,[e("tr",null,[e("th",null,"Position"),e("th",null,"Team"),e("th",null,"Total Score")])],-1),Hr=e("h2",{class:"mt-5"},"Team Results",-1),Wr={class:"container-fluid"},Kr={class:"table table-striped table-hover"},zr=e("thead",null,[e("tr",null,[e("th",{style:{width:"25%"}},"Racer Name"),e("th",{style:{width:"25%"}},"Class"),e("th",{style:{width:"12.5%"}},"5/4"),e("th",{style:{width:"12.5%"}},"5/11"),e("th",{style:{width:"12.5%"}},"5/18"),e("th",{style:{width:"12.5%"}},"5/25")])],-1),Gr={class:"table table-striped table-hover"},Jr=e("th",{style:{width:"50%","text-align":"right"}},"Score (Avg of individual results):",-1),Xr={style:{width:"12.5%"}},Qr={style:{width:"12.5%"}},Zr={style:{width:"12.5%"}},ea={style:{width:"12.5%"}};function ta(t,s,c,m,i,o){const y=k("SeriesNavBar"),_=k("ResultRow");return r(),a(g,null,[p(y,{series:i.series},null,8,["series"]),i.loading?(r(),a("div",Lr,"Loading...")):(r(),a("div",Vr,[i.error?(r(),a("div",Ar,l(i.error),1)):h("",!0),Ur,e("div",Yr,[e("table",jr,[qr,e("tbody",null,[(r(!0),a(g,null,v(i.teamResults.result,(n,f)=>(r(),a("tr",{key:f},[e("td",null,l(f+1),1),e("td",null,l(n.teamName),1),e("td",null,l(n.totalScore),1)]))),128))])])]),Hr,(r(!0),a(g,null,v(i.teamResults.result,(n,f)=>(r(),a("div",{class:"mt-5",key:f},[e("h3",null,l(n.teamName),1),e("div",Wr,[e("table",Kr,[zr,e("tbody",null,[(r(!0),a(g,null,v(i.teamResults.teamDets[n.teamName],(d,C)=>(r(),a("tr",{key:C},[p(_,{data:d},null,8,["data"])]))),128))])]),e("table",Gr,[e("thead",null,[e("tr",null,[Jr,e("th",Xr,l(n.results["5/4"]?n.results["5/4"].avg:"-"),1),e("th",Qr,l(n.results["5/11"]?n.results["5/11"].avg:"-"),1),e("th",Zr,l(n.results["5/18"]?n.results["5/18"].avg:"-"),1),e("th",ea,l(n.results["5/25"]?n.results["5/25"].avg:"-"),1)])])])])]))),128))]))],64)}const sa=D(Or,[["render",ta]]);const ra={components:{EventDetailsComponent:T,MainNav:P},data(){return{categories:{},loading:!1,error:null,formattedStartDate:"",series:null,stageFilter:"all",racers:[],raceData:{}}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(t){var s=document.querySelector(`#${t}`);s.scrollIntoView({behavior:"smooth"})},fetchData(){this.error=null,this.loading=!0,this.$route.params.raceid&&$(`/api/races/roster/${this.$route.params.raceid}`).then(({data:t})=>{this.raceData=t,this.series=t.series,this.loading=!1,this.categories=t.regCategories,this.racers=t.registeredRacers}).catch(t=>{var s;if(this.loading=!1,((s=t.response)==null?void 0:s.status)===404){this.error="Race not found";return}console.error(t),this.categories={},this.error=t.toString()})},replacePlusSymbol(t){return t.replace("+","Plus")},payTypeToStage(t){const s=u.find(this.raceData.paymentOptions,{type:t});return s?s.name:""}},computed:{showPaytype(){var t;return!!((t=this.raceData)!=null&&t.showPaytypeOnRoster)},filterOptions(){let t={all:"All Stages"};return u.forEach(this.raceData.paymentOptions,s=>{t[s.type]=s.name}),t},filteredRacers(){return this.showPaytype&&this.stageFilter!=="all"?u.filter(this.racers,t=>t.paytype==this.stageFilter||t.paytype=="season"):this.racers},groupedRacers(){return u.groupBy(this.filteredRacers,"category")},sortedCats(){return u.filter(u.orderBy(this.categories,"disporder"),t=>u.includes(Object.keys(this.groupedRacers),t.id))},raceDate(){return b(this.raceData.eventDate).format("ddd, MMM D")}}},aa={key:0,class:"loading"},oa={key:1},ia={key:0,class:"error"},na={key:1,id:"top"},la={key:0},ca={class:"row"},da={key:0,class:"col-md-6"},ua={class:"container text-center mt-5"},ha={class:"list-inline"},ma=["onClick"],_a={class:"container-fluid"},pa=["id"],ga={class:"table table-striped table-hover"},ya=e("th",null," First Name ",-1),fa=e("th",null," Last Name ",-1),va=e("th",null," Team/Sponsor ",-1),ba={key:0},ka={key:0},Da={key:1},Ca=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No registrations yet...")],-1),$a=[Ca];function Sa(t,s,c,m,i,o){const y=k("MainNav"),_=k("EventDetailsComponent"),n=k("FormKit");return r(),a(g,null,[p(y),i.loading?(r(),a("div",aa,"Loading...")):(r(),a("div",oa,[i.error?(r(),a("div",ia,l(i.error),1)):(r(),a("div",na,[p(_,{details:i.raceData.eventDetails,raceid:i.raceData.raceid},null,8,["details","raceid"]),Object.keys(i.racers).length?(r(),a("div",la,[e("div",ca,[e("div",{class:w({"col-md-6":o.showPaytype})},[e("h4",null,l(o.filteredRacers.length)+" Registered for "+l(i.raceData.displayName)+" on "+l(o.raceDate),1)],2),o.showPaytype?(r(),a("div",da,[p(n,{type:"select",label:"Show registrations for:",name:"stageFilter",modelValue:i.stageFilter,"onUpdate:modelValue":s[0]||(s[0]=f=>i.stageFilter=f),default:"all",options:o.filterOptions},null,8,["modelValue","options"])])):h("",!0)]),e("div",ua,[e("ul",ha,[(r(!0),a(g,null,v(o.sortedCats,f=>(r(),a("li",{key:f.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:d=>o.scrollMeTo(o.replacePlusSymbol(f.id)),class:"link-primary"},l(f.catdispname),9,ma)]))),128))])]),e("div",_a,[(r(!0),a(g,null,v(o.sortedCats,f=>(r(),a("div",{key:f.id,class:"mt-5"},[e("h3",{id:o.replacePlusSymbol(f.id)},l(f.catdispname),9,pa),e("table",ga,[e("thead",null,[e("tr",null,[ya,fa,va,o.showPaytype?(r(),a("th",ba," Stages ")):h("",!0)])]),e("tbody",null,[(r(!0),a(g,null,v(o.groupedRacers[f.id],(d,C)=>(r(),a("tr",{key:C},[e("td",null,l(d.first_name),1),e("td",null,l(d.last_name),1),e("td",null,l(d.sponsor),1),o.showPaytype?(r(),a("td",ka,l(o.payTypeToStage(d.paytype)),1)):h("",!0)]))),128))])]),e("a",{role:"button",onClick:s[1]||(s[1]=d=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(r(),a("div",Da,$a))]))]))],64)}const Ra=D(ra,[["render",Sa]]),wa=V({history:A("/"),routes:[{path:"/",name:"home",component:B},{path:"/results/",name:"results",component:B},{path:"/race/:raceid",component:$t},{path:"/register/:raceid",name:"register",component:Es},{path:"/regconfirmation/:raceid/:payment_id",component:ir},{path:"/roster/:raceid",name:"roster",component:Ra},{path:"/series/:seriesid",component:M},{path:"/series/grom/:seriesid",component:M},{path:"/teamcomp/:seriesid",component:sa}]});U.init({clientToken:"pub5b9b0cfce30b3b609b588d9f3ac85ebb",site:"datadoghq.com",env:"production",service:"public-site",version:"1.0.1",forwardErrorsToLogs:!0,sampleRate:100});const F=Y(z);F.use(j,q);F.use(wa);F.mount("#app");
