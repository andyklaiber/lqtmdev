import{r as f,o as s,c as a,a as e,F as u,b as h,d as $,w as R,n as w,t as l,e as L,R as N,f as y,g as b,_ as x,h as B,i as S,j as C}from"./vendor.544943fd.js";const D=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))_(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&_(d)}).observe(document,{childList:!0,subtree:!0});function i(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function _(t){if(t.ep)return;t.ep=!0;const r=i(t);fetch(t.href,r)}};D();var v=(n,c)=>{const i=n.__vccOpts||n;for(const[_,t]of c)i[_]=t;return i};const P={props:["races"],data(){return{count:0}},computed:{}},V={class:"navbar navbar-expand-lg navbar-light bg-light"},O={class:"container-fluid"},A=e("div",{class:"navbar-brand",href:"#"},"2022 Prairie City Race Series",-1),M={class:"collapse navbar-collapse",id:"navbarSupportedContent"},j={class:"navbar-nav me-auto mb-2 mb-lg-0"},F={class:"nav-item dropdown"},H=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Races ",-1),T={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},E={key:1,class:"dropdown-item disabled"},U=e("div",{class:"nav-item"},[e("a",{class:"nav-link active","aria-current":"page",href:"https://racemtb.com/"},"RaceMtb Home")],-1);function q(n,c,i,_,t,r){const d=f("RouterLink");return s(),a("nav",V,[e("div",O,[A,e("div",M,[e("ul",j,[e("li",F,[H,e("ul",T,[(s(!0),a(u,null,h(i.races,o=>(s(),a("li",{key:o.raceid},[o.active?(s(),$(d,{key:0,class:w(["dropdown-item",{active:n.$route.params.raceid===o.raceid}]),to:`/race/${o.raceid}`},{default:R(()=>[L(l(o.displayName+` - ${o.formattedStartDate}`),1)]),_:2},1032,["class","to"])):(s(),a("div",E,l(o.displayName+` - ${o.formattedStartDate}`),1))]))),128))])])])]),U])])}var z=v(P,[["render",q]]);let I="/api/races/";const K={components:{RouterView:N,NavBar:z},data(){return{races:[]}},mounted:function(){fetch(I).then(n=>n.json()).then(n=>{console.log(n),this.races=n})},computed:{raceMeta(){return this.races.find(n=>n.raceid===this.$route.params.raceid)}}},W={key:0,class:"text-center"},G={class:"mt-5"};function J(n,c,i,_,t,r){var p;const d=f("NavBar"),o=f("RouterView");return s(),a(u,null,[y(d,{races:t.races,id:"top"},null,8,["races"]),r.raceMeta?(s(),a("div",W,[e("h2",G,"Race Results - "+l((p=r.raceMeta)==null?void 0:p.formattedStartDate),1)])):b("",!0),y(o)],64)}var Q=v(K,[["render",J]]);const X={props:["data","Pos","totLaps"],data(){return{count:0}},computed:{incompleteLaps(){return new Array(this.totLaps-this.data.laps.length).fill("-")}}};function Y(n,c,i,_,t,r){return s(),a(u,null,[e("td",null,l(i.Pos+1),1),e("td",null,l(i.data.Bib),1),e("td",null,l(i.data.Name),1),e("td",null,l(i.data.Sponsor),1),(s(!0),a(u,null,h(i.data.laps,(d,o)=>(s(),a("td",{key:o},l(d.timeString),1))),128)),i.totLaps-i.data.laps.length>0?(s(!0),a(u,{key:0},h(r.incompleteLaps,d=>(s(),a("td",null,l(d),1))),256)):b("",!0),e("td",null,l(i.data.Time),1),e("td",null,l(i.data.back||"-"),1)],64)}var Z=v(X,[["render",Y]]);const ee={components:{ResultRow:Z},data(){return{categories:{},loading:!1,error:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{fetchData(){this.error=null,this.loading=!0;let n=`/api/races/results/${this.$route.params.raceid}`;fetch(n).then(c=>c.json()).then(c=>{this.loading=!1,this.categories=c.categories}).catch(c=>{console.error(c),this.categories={},this.error=c.toString()})}},computed:{sortedCats(){return x.orderBy(this.categories,"disporder")},haveResults(){return this.categories?Object.keys(this.categories).length>0:!1}}},te={key:0,class:"loading"},se={key:1},ae={key:0,class:"error"},re={key:1},oe={class:"container text-center mt-5"},ne={class:"list-inline"},ie=["href"],ce={class:"container-fluid"},le=["id"],de={class:"table table-striped table-hover"},ue=e("a",{href:"#top"},"Back to Top",-1),_e={key:2},he=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No results yet...")],-1),pe=[he];function me(n,c,i,_,t,r){const d=f("ResultRow");return t.loading?(s(),a("div",te,"Loading...")):(s(),a("div",se,[t.error?(s(),a("div",ae,l(t.error),1)):b("",!0),r.haveResults?(s(),a("div",re,[e("div",oe,[e("ul",ne,[(s(!0),a(u,null,h(r.sortedCats,(o,p)=>(s(),a("li",{key:o.id,class:"list-inline-item"},[e("a",{href:"#"+p},l(o.catdispname),9,ie)]))),128))])]),e("div",ce,[(s(!0),a(u,null,h(r.sortedCats,(o,p)=>(s(),a("div",{key:o.id,class:"mt-5"},[e("h3",{id:p},l(o.catdispname),9,le),e("table",de,[e("thead",null,[e("tr",null,[(s(!0),a(u,null,h(o.columns,(g,m)=>(s(),a("th",{scope:"col",key:m},l(g),1))),128))])]),e("tbody",null,[(s(!0),a(u,null,h(o.results,(g,m)=>(s(),a("tr",{key:m},[y(d,{totLaps:o.laps,Pos:m,data:g},null,8,["totLaps","Pos","data"])]))),128))])]),ue]))),128))])])):(s(),a("div",_e,pe))]))}var fe=v(ee,[["render",me]]);const ve=B({history:S("/"),routes:[{path:"/race/:raceid",component:fe}]});const k=C(Q);k.use(ve);k.mount("#app");
