import{_ as $,R as F,o as s,c as a,a as f,r as b,b as e,d as k,t as l,e as g,w as R,f as S,n as w,p as V,g as U,h as D,i as m,F as h,j as v,k as x,l as A,m as j,q,s as Y,u as H,v as W}from"./main-f493fa7a.js";const K={components:{RouterView:F},data(){return{races:[]}},mounted:function(){},computed:{}},G={class:"container"};function z(r,t,c,p,i,o){const y=b("RouterView");return s(),a("div",G,[f(y)])}const J=$(K,[["render",z]]),X={props:["url"],created(){(function(r,t,c){var p,i=r.getElementsByTagName(t)[0];r.getElementById(c)||(p=r.createElement(t),p.id=c,p.src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v15.0",i.parentNode.insertBefore(p,i))})(document,"script","facebook-jssdk")},mounted(){window.FB&&FB.XFBML.parse()}},Q={id:"1"},Z=e("div",{id:"fb-root"},null,-1),ee=["data-href"];function te(r,t,c,p,i,o){return s(),a("div",Q,[Z,e("div",{class:"fb-share-button","data-href":this.url,"data-layout":"button","data-size":"large"},null,8,ee)])}const se=$(X,[["render",te]]),re={components:{FbShareComponent:se},props:["details","raceid","compactMode"],data(){return{}},computed:{isRosterPage(){return this.$route.path.includes("/roster/")},isRegPage(){return this.$route.name==="register"},regDisabled(){return k().isBefore(this.details.regOpenDate)},regEnded(){return k().isAfter(this.details.regCloseDate)},regTimeToOpen(){return k().to(this.details.regOpenDate)},regTimeToClose(){return k().to(this.details.regCloseDate)},imgWidth(){return this.compactMode?150:225}}},ae={class:"container mb-4"},ie={class:"row p-1 pb-0 pe-lg-0 pt-lg-3 align-items-center rounded-3 border shadow"},oe={class:"col-sm-3 offset-sm-1 p-0"},ne=["href"],le=["src","width"],ce={class:"col-lg-7 p-3 p-lg-3 pt-lg-3"},de={class:"row"},ue={class:"col col-md-auto"},he={class:"display-7 fw-bold lh-3"},me={key:0,class:"lead mb-0 fw-bold"},_e={class:"display-9"},pe={key:0,class:"d-grid gap-2 d-md-flex justify-content-md mb-4 mb-lg-3"},ge={class:"col-md-auto"},ye=["href"],fe={class:"col col-lg-2"},ve={key:0},be={key:1,class:"fw-bold"},ke={key:2,class:"row"},$e={key:0,class:"fw-bold"},De={key:0,class:"fw-bold"},Ce={key:1,class:"fw-bold"},Se={key:1,class:"col col-md-auto"},Re={key:2,class:"col"};function we(r,t,c,p,i,o){var n;const y=b("FbShareComponent"),d=b("RouterLink");return s(),a("div",ae,[e("div",ie,[e("div",oe,[e("a",{href:c.details.homepageUrl},[e("img",{class:"pb-1",src:c.details.logoUrl,alt:"",width:o.imgWidth},null,8,le)],8,ne)]),e("div",ce,[e("div",de,[e("div",ue,[e("h3",he,l(c.details.name),1),c.compactMode?g("",!0):(s(),a("p",me,l(c.details.tagline),1))])]),e("p",_e,l(c.details.formattedDates),1),c.details.homepageUrl&&!c.compactMode?(s(),a("div",pe,[e("div",ge,[e("a",{class:"btn btn-sm btn-success",href:c.details.homepageUrl},"Event Homepage",8,ye)]),e("div",fe,[c.details.facebookShare?(s(),a("div",ve,[f(y,{url:c.details.homepageUrl},null,8,["url"])])):g("",!0)])])):g("",!0),o.regDisabled?(s(),a("div",be," Registration will open "+l(o.regTimeToOpen),1)):(s(),a("div",ke,[(n=c.details)!=null&&n.regCloseDate?(s(),a("div",$e,[o.regEnded?(s(),a("div",De," Registration is closed ")):(s(),a("div",Ce," Registration will close "+l(o.regTimeToClose),1))])):g("",!0),!o.isRegPage&&!o.regEnded?(s(),a("div",Se,[f(d,{class:"btn btn-success",to:{name:"register",params:{raceid:c.raceid}}},{default:R(()=>[S("Register")]),_:1},8,["to"])])):g("",!0),o.isRosterPage?g("",!0):(s(),a("div",Re,[f(d,{class:"btn btn-secondary",to:{name:"roster",params:{raceid:c.raceid}}},{default:R(()=>[S("See who is signed up ")]),_:1},8,["to"])]))]))])])])}const T=$(re,[["render",we]]);const xe={props:["races"],data(){return{count:0,loggedIn:!1}},computed:{}},I=r=>(V("data-v-2f3c77b1"),r=r(),U(),r),Te={class:"navbar navbar-expand-md navbar-dark bg-dark fixed-top"},Ne={class:"container-fluid"},Pe=I(()=>e("a",{class:"navbar-brand",href:"/"},"Signup.bike",-1)),Ee=I(()=>e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarsExample04","aria-controls":"navbarsExample04","aria-expanded":"false","aria-label":"Toggle navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),Be={class:"collapse navbar-collapse",id:"navbarsExample04"},Me={class:"navbar-nav me-auto mb-4 mb-md-0 px-5"},Fe={class:"nav-item"};function Ie(r,t,c,p,i,o){const y=b("RouterLink");return s(),a("nav",Te,[e("div",Ne,[Pe,Ee,e("div",Be,[e("ul",Me,[e("li",Fe,[f(y,{class:w(["nav-link",{active:r.$route.name=="home"}]),to:{name:"home"}},{default:R(()=>[S(" Upcoming Races ")]),_:1},8,["class"])])]),i.loggedIn?(s(),a("button",{key:0,type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=d=>r.$emit("logout"))},"Logout")):g("",!0)])])])}const N=$(xe,[["render",Ie],["__scopeId","data-v-2f3c77b1"]]);const Oe={emits:["logout"],components:{MainNav:N,RouterView:F,EventDetailsComponent:T},data(){return{count:0,races:[],loading:!0}},created(){this.$watch(()=>this.$route.query,()=>{this.fetchData()},{immediate:!0})},methods:{fetchData(){if(this.error=null,this.loading=!0,console.log("fetch plz"),this.$route)return D("/api/races/").then(r=>{this.races=r.data,this.loading=!1,console.log("fetched"),console.log(this.races)}).catch(r=>{this.loading=!1,this.error=r.toString(),console.error(r)})}},computed:{displayRaces(){let r={};return m.filter(this.races,c=>{if(c.series&&r[c.series])return!1;typeof c.series=="string"&&c.series.length>1&&(console.log("set as shown "+c.raceid),r[c.series]=!0);let p=k().isBefore(k(c.eventDate));return!(c.isTestData&&!this.$route.query.test||!p&&!this.$route.query.past)})},loggedIn(){return!1}}},Le={key:0},Ve={key:1};function Ue(r,t,c,p,i,o){const y=b("MainNav"),d=b("EventDetailsComponent");return s(),a(h,null,[f(y),i.loading?(s(),a("div",Le," Plz wait, loading... ")):(s(),a("div",Ve,[(s(!0),a(h,null,v(o.displayRaces,(n,_)=>(s(),a("div",{key:_},[f(d,{details:n.eventDetails,raceid:n.raceid,"compact-mode":"true"},null,8,["details","raceid"])]))),128))]))],64)}const B=$(Oe,[["render",Ue],["__scopeId","data-v-13df3db7"]]);let Ae=r=>{const t=new Date(Date.UTC(0,0,0,0,0,0,r));let p=[t.getUTCMinutes(),t.getUTCSeconds()].map(i=>String(i).padStart(2,"0")).join(":");return t.getUTCHours()&&(p=t.getUTCHours()+":"+p),p};const je={props:["data","Pos","totLaps"],data(){return{count:0}},computed:{incompleteLaps(){return new Array(this.totLaps-this.data.laps.length).fill("-")},formattedTime(){return Ae(this.data.duration)}}};function qe(r,t,c,p,i,o){return s(),a(h,null,[e("td",null,l(c.Pos+1),1),e("td",null,l(c.data.Bib),1),e("td",null,l(c.data.Name),1),e("td",null,l(c.data.Sponsor),1),(s(!0),a(h,null,v(c.data.laps,(y,d)=>(s(),a("td",{key:d},l(y.timeString),1))),128)),c.totLaps-c.data.laps.length>0?(s(!0),a(h,{key:0},v(o.incompleteLaps,y=>(s(),a("td",null,l(y),1))),256)):g("",!0),e("td",null,l(o.formattedTime),1),e("td",null,l(c.data.back||"-"),1)],64)}const O=$(je,[["render",qe]]),Ye={props:["series"],data(){return{count:0,seriesData:{}}},created(){this.$watch(()=>this.series,function(){if(!this.series)return;let r=`/api/series/${this.series}/races`;D(r).then(({data:t})=>{this.seriesData=t})})},computed:{isPcrs(){return this.series&&this.series.indexOf("pcrs")>-1}}},He={id:"top",class:"navbar navbar-light bg-light"},We={class:"container-fluid"},Ke={class:"navbar-brand",href:"#"},Ge={key:0,class:"nav-item"},ze=["href"],Je=e("p",{class:"mt-3"},"View Weekly lap times:",-1),Xe={class:"nav nav-tabs mt-1 justify-content-center"},Qe={key:0,class:"nav-item"},Ze={key:1,class:"nav-item"},et={key:2,class:"nav-item"};function tt(r,t,c,p,i,o){const y=b("RouterLink");return s(),a(h,null,[e("nav",He,[e("div",We,[e("div",Ke,l(i.seriesData.displayName),1),i.seriesData.homepage?(s(),a("div",Ge,[e("a",{class:"nav-link active","aria-current":"page",href:i.seriesData.homepage.url},l(i.seriesData.homepage.linkString),9,ze)])):g("",!0)])]),Je,e("ul",Xe,[(s(!0),a(h,null,v(i.seriesData.races,d=>(s(),a("li",{key:d.raceid,class:"nav-item"},[f(y,{class:w(["nav-link",{active:r.$route.params.raceid===d.raceid}]),to:`/race/${d.raceid}`},{default:R(()=>[S(l(d.displayName+` - ${d.formattedStartDate}`),1)]),_:2},1032,["class","to"])]))),128)),o.isPcrs?(s(),a("li",Qe,[f(y,{class:w(["nav-link",{active:r.$route.path=="/series/pcrs_2022"}]),to:"/series/pcrs_2022"},{default:R(()=>[S("Series Standings")]),_:1},8,["class"])])):g("",!0),o.isPcrs?(s(),a("li",Ze,[f(y,{class:w(["nav-link",{active:r.$route.path=="/series/grom/pcrs_2022"}]),to:"/series/grom/pcrs_2022"},{default:R(()=>[S("Grom Series Standings")]),_:1},8,["class"])])):g("",!0),o.isPcrs?(s(),a("li",et,[f(y,{class:w(["nav-link",{active:r.$route.path=="/teamcomp/pcrs_2022"}]),to:"/teamcomp/pcrs_2022"},{default:R(()=>[S("Team Competition")]),_:1},8,["class"])])):g("",!0)])],64)}const P=$(Ye,[["render",tt]]);const st={components:{ResultRow:O,SeriesNavBar:P},data(){return{categories:{},loading:!1,error:null,formattedStartDate:"",series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(r){var t=document.querySelector(`#${r}`);t.scrollIntoView({behavior:"smooth"})},fetchData(){if(this.error=null,this.loading=!0,this.$route.params.raceid){let r=`/api/races/results/${this.$route.params.raceid}`;D(r).then(({data:t})=>{this.formattedStartDate=t.raceMeta.formattedStartDate,this.series=t.series,this.loading=!1,this.categories=t.categories}).catch(t=>{console.error(t),this.categories={},this.error=t.toString()})}}},computed:{sortedCats(){return m.orderBy(this.categories,"disporder")},expertCats(){return m.filter(this.sortedCats,{laps:4})},sportCats(){return m.filter(this.sortedCats,{laps:3})},beginnerCats(){return m.filter(this.sortedCats,{laps:2})},gromCats(){return m.filter(this.categories,r=>r.id.indexOf("grom")>-1)},haveResults(){return this.categories?Object.keys(this.categories).length>0:!1}}},rt={key:0,class:"text-center"},at={class:"mt-5"},it={key:1,class:"loading"},ot={key:2},nt={key:0,class:"error"},lt={key:1},ct={class:"container text-center mt-5"},dt={class:"list-inline"},ut=["onClick"],ht={class:"list-inline"},mt=["onClick"],_t={class:"list-inline"},pt=["onClick"],gt={class:"list-inline"},yt=["onClick"],ft={class:"container-fluid"},vt=["id"],bt={class:"table table-striped table-hover"},kt={key:2},$t=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No results yet...")],-1),Dt=[$t];function Ct(r,t,c,p,i,o){const y=b("SeriesNavBar"),d=b("ResultRow");return s(),a(h,null,[f(y,{series:i.series},null,8,["series"]),i.formattedStartDate?(s(),a("div",rt,[e("h2",at,"Race Results - "+l(i.formattedStartDate),1)])):g("",!0),i.loading?(s(),a("div",it,"Loading...")):(s(),a("div",ot,[i.error?(s(),a("div",nt,l(i.error),1)):g("",!0),o.haveResults?(s(),a("div",lt,[e("div",ct,[e("ul",dt,[(s(!0),a(h,null,v(o.expertCats,(n,_)=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:u=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,ut)]))),128))]),e("ul",ht,[(s(!0),a(h,null,v(o.sportCats,(n,_)=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:u=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,mt)]))),128))]),e("ul",_t,[(s(!0),a(h,null,v(o.beginnerCats,(n,_)=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:u=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,pt)]))),128))]),e("ul",gt,[(s(!0),a(h,null,v(o.gromCats,(n,_)=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:u=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,yt)]))),128))])]),e("div",ft,[(s(!0),a(h,null,v(o.sortedCats,(n,_)=>(s(),a("div",{key:n.id,class:"mt-5"},[e("h3",{id:n.id},l(n.catdispname),9,vt),e("table",bt,[e("thead",null,[e("tr",null,[(s(!0),a(h,null,v(n.columns,(u,C)=>(s(),a("th",{scope:"col",key:C},l(u),1))),128))])]),e("tbody",null,[(s(!0),a(h,null,v(n.results,(u,C)=>(s(),a("tr",{key:C},[f(d,{totLaps:n.laps,Pos:C,data:u},null,8,["totLaps","Pos","data"])]))),128))])]),e("a",{role:"button",onClick:t[0]||(t[0]=u=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(s(),a("div",kt,Dt))]))],64)}const St=$(st,[["render",Ct]]);const Rt={components:{ResultRow:O,SeriesNavBar:P},data(){return{resultData:{},categories:{},loading:!1,error:null,formattedStartDate:"",series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(r){var t=document.querySelector(`#${r}`);t.scrollIntoView({behavior:"smooth"})},fetchData(){if(this.error=null,this.loading=!0,this.$route.params.id){let r=`/api/results/${this.$route.params.id}`;D(r).then(({data:t})=>{this.formattedStartDate=t.formattedStartDate,this.series=t.series,this.resultData=t,this.loading=!1,this.categories=t.categories}).catch(t=>{console.error(t),this.categories={},this.error=t.toString()})}else this.$router.push("")}},computed:{sortedCats(){return m.orderBy(this.categories,"disporder")},haveResults(){return this.categories?Object.keys(this.categories).length>0:!1}}},wt={key:0,class:"text-center"},xt={class:"mt-5"},Tt={key:1,class:"text-center"},Nt={class:"mt-5"},Pt={key:2,class:"loading"},Et={key:3},Bt={key:0,class:"error"},Mt={key:1},Ft={class:"container text-center mt-5"},It={class:"list-inline"},Ot=["onClick"],Lt={class:"container-fluid"},Vt=["id"],Ut={class:"table table-striped table-hover"},At={key:2},jt=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No results yet...")],-1),qt=[jt];function Yt(r,t,c,p,i,o){const y=b("ResultRow");return s(),a(h,null,[i.resultData.eventName?(s(),a("div",wt,[e("h2",xt,"Race Results - "+l(i.resultData.eventName),1)])):g("",!0),i.formattedStartDate?(s(),a("div",Tt,[e("h2",Nt,l(i.formattedStartDate),1)])):g("",!0),i.loading?(s(),a("div",Pt,"Loading...")):(s(),a("div",Et,[i.error?(s(),a("div",Bt,l(i.error),1)):g("",!0),o.haveResults?(s(),a("div",Mt,[e("div",Ft,[e("ul",It,[(s(!0),a(h,null,v(o.sortedCats,(d,n)=>(s(),a("li",{key:d.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:_=>o.scrollMeTo(d.id),class:"link-primary"},l(d.catdispname),9,Ot)]))),128))])]),e("div",Lt,[(s(!0),a(h,null,v(o.sortedCats,(d,n)=>(s(),a("div",{key:d.id,class:"mt-5"},[e("h3",{id:d.id},l(d.catdispname),9,Vt),e("table",Ut,[e("thead",null,[e("tr",null,[(s(!0),a(h,null,v(d.columns,(_,u)=>(s(),a("th",{scope:"col",key:u},l(_),1))),128))])]),e("tbody",null,[(s(!0),a(h,null,v(d.results,(_,u)=>(s(),a("tr",{key:u},[f(y,{totLaps:d.laps,Pos:u,data:_},null,8,["totLaps","Pos","data"])]))),128))])]),e("a",{role:"button",onClick:t[0]||(t[0]=_=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(s(),a("div",At,qt))]))],64)}const Ht=$(Rt,[["render",Yt]]);const Wt={props:["data","Pos"],data(){return{count:0}},computed:{}};function Kt(r,t,c,p,i,o){return s(),a(h,null,[e("td",null,l(c.Pos+1),1),e("td",null,l(c.data.Bib),1),e("td",null,l(c.data.Name),1),e("td",null,l(c.data.Age),1),e("td",null,l(c.data.Sponsor),1),(s(!0),a(h,null,v(c.data.results,(y,d)=>(s(),a("td",{class:w({"text-danger":y.dropped}),key:d},l(y.resultString),3))),128)),e("td",null,l(c.data.seriesPoints),1)],64)}const L=$(Wt,[["render",Kt]]),Gt={props:["series","displayName"],data(){return{count:0,seriesData:{},races:[]}},created(){this.$watch(()=>this.series,function(){if(!this.series)return;let r=`/api/results/?series=${this.series}`;D(r).then(({data:t})=>{this.races=t})})},computed:{isPcrs(){return this.series&&this.series.indexOf("pcrs")>-1}}},zt={id:"top",class:"navbar navbar-light bg-light"},Jt={class:"container-fluid"},Xt={class:"navbar-brand h2",href:"#"},Qt={key:0,class:"nav-item"},Zt=["href"],es=e("p",{class:"mt-3"},"View Individual Event Times:",-1),ts={class:"nav nav-tabs mt-1 justify-content-center"};function ss(r,t,c,p,i,o){const y=b("RouterLink");return s(),a(h,null,[e("nav",zt,[e("div",Jt,[e("div",Xt,l(c.displayName),1),i.seriesData.homepage?(s(),a("div",Qt,[e("a",{class:"nav-link active","aria-current":"page",href:i.seriesData.homepage.url},l(i.seriesData.homepage.linkString),9,Zt)])):g("",!0)])]),es,e("ul",ts,[(s(!0),a(h,null,v(i.races,d=>(s(),a("li",{key:d.raceid,class:"nav-item"},[f(y,{class:w(["nav-link",{active:r.$route.params.raceid===d.raceid}]),to:`/result/${d.raceid}`},{default:R(()=>[S(l(d.eventName+` - ${d.formattedStartDate}`),1)]),_:2},1032,["class","to"])]))),128))])],64)}const rs=$(Gt,[["render",ss]]);const as={components:{SeriesResultRow:L,SeriesNavBar:rs},data(){return{categories:{},loading:!1,error:null,displayName:"",series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(r){var t=document.querySelector(`#${r}`);t.scrollIntoView({behavior:"smooth"})},fetchData(){if(!this.$route.params.seriesid)return;this.error=null,this.loading=!0;let r=`/api/series/results/${this.$route.params.seriesid}`;D(r).then(({data:t})=>{this.loading=!1,this.categories=t.categories,this.displayName=t.eventName,this.series=this.$route.params.seriesid;let c=m.map(t.categories,p=>m.omit(p,["results","columns"]));console.log("temp:",m.orderBy(c,"disporder"))}).catch(t=>{console.error(t),this.categories={},this.error=t.toString()})}},computed:{sortedCats(){return m.orderBy(this.categories,"disporder")},haveResults(){return this.categories?Object.keys(this.categories).length>0:!1}}},is={key:0,class:"loading"},os={key:1},ns={key:0,class:"error"},ls=e("div",{class:"container-fluid text-center mt-5"},[e("h3",null,"Series Standings"),e("p",null,[S("Glossary of terms below:"),e("br"),S(" 1/100 = 1st Place/100 Points -/- = Did not race")])],-1),cs={key:1},ds={class:"container-fluid text-center mt-5"},us={class:"list-inline"},hs=["onClick"],ms={class:"container-fluid"},_s=["id"],ps={class:"table table-striped table-hover"},gs={key:2},ys=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No results yet...")],-1),fs=[ys];function vs(r,t,c,p,i,o){const y=b("SeriesNavBar"),d=b("SeriesResultRow");return s(),a(h,null,[f(y,{series:i.series,displayName:i.displayName},null,8,["series","displayName"]),i.loading?(s(),a("div",is,"Loading...")):(s(),a("div",os,[i.error?(s(),a("div",ns,l(i.error),1)):g("",!0),ls,o.haveResults?(s(),a("div",cs,[e("div",ds,[e("ul",us,[(s(!0),a(h,null,v(o.sortedCats,n=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:_=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,hs)]))),128))])]),e("div",ms,[(s(!0),a(h,null,v(o.sortedCats,n=>(s(),a("div",{key:n.id,class:"mt-5"},[e("h3",{id:n.id},l(n.catdispname),9,_s),e("table",ps,[e("thead",null,[e("tr",null,[(s(!0),a(h,null,v(n.columns,(_,u)=>(s(),a("th",{scope:"col",key:u},l(_),1))),128))])]),e("tbody",null,[(s(!0),a(h,null,v(n.results,(_,u)=>(s(),a("tr",{key:u},[f(d,{Pos:u,data:_},null,8,["Pos","data"])]))),128))])]),e("a",{role:"button",onClick:t[0]||(t[0]=_=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(s(),a("div",gs,fs))]))],64)}const bs=$(as,[["render",vs]]),ks={props:["categories","raceDate"],data(){return{}},methods:{formatStartTime(r){return k(`${k(this.raceDate).format("YYYY-MM-DD")} ${r}`).format("h:mm A")}},computed:{groupByStartTimes(){return m.groupBy(m.orderBy(this.categories,["startTime","disporder"]),"startTime")},hasStartTimes(){return!!m.some(this.categories,"startTime")}}},$s={key:0},Ds=e("h5",null,"Race Start Times:",-1),Cs={class:"row gap-5 mb-3"},Ss={class:""},Rs={class:"row g-2 px-4 gx-4 border bg-light"};function ws(r,t,c,p,i,o){return c.categories.length&&o.hasStartTimes?(s(),a("div",$s,[Ds,e("div",Cs,[(s(!0),a(h,null,v(o.groupByStartTimes,(y,d)=>(s(),a("div",{key:d,class:"col-md-5"},[e("h6",Ss,l(o.formatStartTime(d))+":",1),e("div",Rs,[(s(!0),a(h,null,v(o.groupByStartTimes[d],n=>(s(),a("div",{key:n.id,class:"col-lg text-nowrap my-1"},l(n.catdispname),1))),128))])]))),128))])])):g("",!0)}const xs=$(ks,[["render",ws]]);let Ts=m.debounce((r,t)=>{window.localStorage.setItem(`race-reg-form-data-${t}`,JSON.stringify(r))},3500),Ns=r=>{let t=window.localStorage.getItem(`race-reg-form-data-${r}`);return t?JSON.parse(t):null},Ps=r=>{window.localStorage.removeItem(`race-reg-form-data-${r}`)};function Es(r){if(r===0)return 0;let t=r*100,c=t*.04;return c>600&&(c=600),Math.round((t+c+30)/(1-.029))-t}const Bs={components:{MainNav:N,EventDetailsComponent:T,EventCategoryScheduleComponent:xs},data(){return{categories:{},loading:!1,error:null,formError:[],formInputData:{},raceData:{},payment:"",birthdate:"",submitted:!1,waiverAccepted:!1,couponError:[],prevBibError:[],seriesRaces:{},seriesRaceIdx:0,previousReg:!1,prevAge:null}},created(){this.$watch(()=>this.$route.params.raceid,()=>{this.fetchData()},{immediate:!0})},watch:{formInputData:{handler(r,t){this.previousReg==!1&&Ts(r,this.$route.params.raceid)},deep:!0}},methods:{dollas(r){return r.toLocaleString("en-US",{style:"currency",currency:"USD"})},fetchData(){this.error=null,this.loading=!0,this.$route.params.raceid&&D(`/api/races/${this.$route.params.raceid}`).then(async r=>{var c;this.raceData=r.data;let t=Ns(this.$route.params.raceid);t&&(m.find((c=this.raceData)==null?void 0:c.regCategories,{id:t.category})||delete t.category,t.waiverAccepted=!1,this.formInputData=t),this.raceData.series&&this.raceData.toString().length>1&&await D(`/api/series/${this.raceData.series}/registration`).then(({data:p})=>{this.seriesRaces=p;let i=k();this.seriesRaceIdx=0,m.some(p,({eventDate:o,raceid:y},d)=>k(o).isBefore(i)?!1:(this.seriesRaceIdx=d,this.$router.push(`/register/${y}`),!0))}),this.loading=!1,this.payment=this.raceData.paymentOptions[0].type}).catch(r=>{this.loading=!1,this.error=r.toString(),console.error(r)})},findPrevBib(r){D.post("/api/racers/bib",{series:`${this.raceData.series}`,bibNumber:r}).then(({data:t})=>{if(console.log("prevbib"),console.log(t),t.paytype==="season"){this.prevBibError=["You are already registered for the whole season"];return}t.prevPaymentId=t.paymentId,delete t.paymentId,this.formInputData=t,this.prevAge=t.racerAge}).catch(({response:t})=>{console.dir(t),t.status==404&&(this.prevBibError=[t.data.message])})},onPrevBibChange(r){r?this.findPrevBib(r):(this.prevBibError=[],this.prevAge=null)},getCouponPricing(r){D.post("/api/payments/pricing",{raceid:`${this.$route.params.raceid}`,couponCode:r}).then(({data:t})=>{if(this.raceData.paymentOptions=t.paymentOptions,t.validCoupon)this.couponError=[];else{if(t.reason)return this.couponError=[t.reason];this.couponError=["Invalid Coupon Code"]}})},onCouponChange(r){r?this.getCouponPricing(r):this.couponError=[]},submitForm(r){r.preventDefault(),this.$formkit.submit("race-registration")},async submit(r){console.log(r),r.birthdate=void 0,r.racerAge=this.racerAge,r.paytype=this.payment,r.timestamp=k().format(),await D.post(`/api/payments/start-registration?race=${this.raceData.raceid}`,r).then(t=>{if(t.data){if(console.log("response data"),console.log(t.data),t.data.redirect)return this.submitted=!0,Ps(this.$route.params.raceid),new Promise(c=>setTimeout(()=>{window.location.href=t.data.redirect,c()},2e3));t.data.message&&(this.formError=[t.data.message])}}).catch(t=>{var c,p;if((p=(c=t.response)==null?void 0:c.data)!=null&&p.message)return this.formError=[t.response.data.message];this.formError=["Error submitting request"]})},getEventTimeObj(r){return k(`${k(this.raceData.eventDate).format("YYYY-MM-DD")} ${r}`)}},computed:{startTimes(){return this.hasStartTimes?m.map(m.uniqBy(this.raceData.regCategories,"startTime"),"startTime"):null},hasStartTimes(){return!!m.some(this.raceData.regCategories,"startTime")},currentTime(){return k().local().format()},firstRaceTime(){return this.hasStartTimes?k.min(m.map(this.startTimes,r=>k(`${this.eventDateFormatted} ${r}`))):null},lastRaceTime(){return this.hasStartTimes?k.max(m.map(this.startTimes,r=>k(`${this.eventDateFormatted} ${r}`))):null},sortedCats(){const r=m.filter(this.raceData.regCategories,c=>!0);let t={};return m.forEach(m.orderBy(r,"disporder"),c=>{t[c.id]=c.catdispname}),t},loaded(){return!!this.raceData},submitLabel(){return this.payment=="cash"?"Sign Up!":"Go to Payment"},cashEnabled(){return!this.raceData.cashPaymentsEnabled||!this.lastRaceTime?!1:k().isAfter(this.firstRaceTime.subtract(6,"hour"))},eventDateFormatted(){return k(this.raceData.eventDate).format("YYYY-MM-DD")},regDisabled(){return this.$route.query.test!==void 0?!1:this.eventFull||k().isBefore(this.raceData.eventDetails.regOpenDate)||this.raceData.eventDetails.regCloseDate&&k().isAfter(this.raceData.eventDetails.regCloseDate)?!0:this.lastRaceTime?k().isAfter(this.lastRaceTime.subtract(5,"minute")):!1},eventFull(){return!!(this.raceData.entryCountMax&&this.raceData.entryCountMax>1&&this.raceData.entryCount>=this.raceData.entryCountMax)},paymentOptions(){let r={};return m.forEach(this.raceData.paymentOptions,t=>{r[t.type]=t.name}),this.cashEnabled&&(r.cash="Cash Payment (Today's Race)"),r},paymentCostDets(){var o,y;if(this.sponsoredCategorySelected)return this.payment="season",{cost:this.dollas(0),regFee:this.dollas(0),tot:this.dollas(0)};let r;this.payment==="cash"?r="single":r=this.payment;const t=m.find((o=this.raceData)==null?void 0:o.paymentOptions,d=>d.type===r);if(!t)return null;const c=parseFloat(t.amount);let p=0;c>0&&this.payment!=="cash"&&(p=(t.regFee+t.stripeFee)/100);const i={};if(m.assign(i,t,{name:t.name,cost:this.dollas(c),regFee:this.dollas(p),tot:this.dollas(parseFloat(t.amount)+parseFloat(p))}),(y=this.raceData)!=null&&y.optionalPurchases&&this.formInputData.optionalPurchases){let d=c;this.raceData.optionalPurchases.forEach(({id:n,label:_,description:u,amount:C})=>{this.formInputData.optionalPurchases[n]&&(i.options||(i.options=[]),i.options.push({description:u,label:_,id:n,amount:this.dollas(parseFloat(C))}),d+=parseFloat(C))}),p=Es(d)/100,i.regFee=this.dollas(p),i.tot=this.dollas(d+p)}return i},showPaymentOption(){return this.sponsoredCategorySelected?!1:this.cashEnabled?!0:!(this.raceData.paymentOptions&&this.raceData.paymentOptions.length<2)},sponsoredCategorySelected(){var r;return!!((r=this.selectedCategory)!=null&&r.sponsored)},selectedCategory(){var r,t;return this.formInputData&&this.formInputData.category?m.find((r=this.raceData)==null?void 0:r.regCategories,{id:(t=this.formInputData)==null?void 0:t.category}):null},racerAge(){if(this.prevAge)return this.prevAge;if(this.birthdate){const r=k(),t=k(this.birthdate);return r.year()-t.year()}}}},Ms={key:0,class:"loading"},Fs={key:1},Is={key:0,class:"error"},Os={key:1},Ls={key:0,class:"h5"},Vs={key:1},Us=e("h3",null,"Registration is closed.",-1),As=[Us],js={key:2,class:"mb-5"},qs={key:0},Ys={class:"row"},Hs={class:"col-md-6 order-md-1 mb-3"},Ws=e("h4",{class:"d-flex justify-content-between align-items-center mb-3"},[e("h5",null,"Registration Info"),e("span",{class:"badge badge-secondary badge-pill"},"3")],-1),Ks={class:"form-group pt-3"},Gs={class:"form-group pt-3"},zs={key:0,class:"col-md-5 order-md-2 mb-4"},Js=e("h4",{class:"d-flex justify-content-between align-items-center mb-3"},[e("h5",null,"Payment Detail")],-1),Xs={class:"list-group mb-3"},Qs={class:"list-group mb-3"},Zs={key:0},er={class:"list-group mb-3"},tr=["innerHTML"],sr={class:"list-group mb-3 formkit-fieldset"},rr={class:"list-group-item d-flex justify-content-between lh-condensed"},ar=e("h6",{class:"my-0"},"Event Entry:",-1),ir={class:"text-muted"},or={key:0,class:"mx-3 text-decoration-line-through text-danger"},nr={class:"list-group-item d-flex justify-content-between lh-condensed"},lr={class:"my-0"},cr={key:0,class:"text-muted"},dr={class:"list-group-item d-flex justify-content-between lh-condensed"},ur=e("div",null,[e("h6",{class:"my-0"},"Online Processing Fee:"),e("small",{class:"text-muted"},"Credit Card Processing and Online Registration")],-1),hr={class:"text-muted"},mr={class:"list-group-item d-flex justify-content-between"},_r=e("span",null,"Total (USD)",-1),pr={key:0},gr=e("h2",{class:"text-danger"},"Your registration will not be active until payment is received at the event",-1),yr=[gr],fr={key:1},vr={key:2},br={key:1},kr=e("h2",null,"Submission successful, redirecting",-1),$r=[kr],Dr={key:2},Cr=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"Race not available for registration...")],-1),Sr=[Cr];function Rr(r,t,c,p,i,o){const y=b("MainNav"),d=b("EventDetailsComponent"),n=b("FormKit"),_=b("EventCategoryScheduleComponent");return s(),a(h,null,[f(y),i.loading?(s(),a("div",Ms,"Loading...")):(s(),a("div",Fs,[i.error?(s(),a("div",Is,l(i.error),1)):g("",!0),o.loaded?(s(),a("div",Os,[f(d,{details:i.raceData.eventDetails,raceid:i.raceData.raceid},null,8,["details","raceid"]),o.eventFull?(s(),a("div",Ls,"This event has reached the registration entry max of "+l(i.raceData.entryCountMax),1)):g("",!0),o.regDisabled?(s(),a("div",Vs,As)):(s(),a("div",js,[i.seriesRaceIdx>0?(s(),a("div",qs,[f(n,{"label-class":"text-danger fw-bold fs-5",type:"checkbox",name:"prevBibLookup",label:"I have a bib number!",help:"Look up your information from a previous race",modelValue:i.previousReg,"onUpdate:modelValue":t[0]||(t[0]=u=>i.previousReg=u)},null,8,["modelValue"]),i.previousReg?(s(),x(n,{key:0,type:"number",name:"bibNumber",label:"Bib Number:",help:"Enter your Bib Number from your previous race to pre-fill your info",delay:1500,onInput:o.onPrevBibChange,errors:i.prevBibError,validation:"required"},null,8,["onInput","errors"])):g("",!0)])):g("",!0),f(n,{type:"form",id:"race-registration",modelValue:i.formInputData,"onUpdate:modelValue":t[4]||(t[4]=u=>i.formInputData=u),"form-class":i.submitted?"hide":"show",errors:i.formError,actions:!1,onSubmit:o.submit},{default:R(()=>[e("div",Ys,[e("div",Hs,[Ws,f(n,{type:"text",name:"first_name",label:"First name",help:"What is your first name",validation:"required"}),f(n,{type:"text",name:"last_name",label:"Last name",help:"What is your last name",validation:"required"}),e("div",Ks,[i.previousReg?g("",!0):(s(),x(n,{key:0,type:"email",name:"email",label:"Your email",help:"Enter an email address",validation:"required|email"}))]),f(n,{type:"text",name:"sponsor",label:"Your Team or Sponsor",help:"Enter an optional Team or Sponsor name"}),i.previousReg?g("",!0):(s(),x(n,{key:0,type:"date",value:"2001-01-01",name:"birthdate",label:"Birthday",modelValue:i.birthdate,"onUpdate:modelValue":t[1]||(t[1]=u=>i.birthdate=u),help:"Enter your birthdate",validation:"required|before:2020-01-01","validation-visibility":"live"},null,8,["modelValue"])),e("div",null,"Age: "+l(o.racerAge),1),e("div",Gs,[f(n,{type:"select",id:"category",label:"Category:",placeholder:"Select a category",name:"category",options:o.sortedCats,validation:"required","validation-visibility":"dirty","validation-messages":{is:"You must select a category"}},null,8,["options"])])]),o.paymentCostDets?(s(),a("div",zs,[Js,e("fieldset",Xs,[e("div",null,[i.raceData.couponsEnabled?(s(),x(n,{key:0,type:"text",name:"coupon",label:"Coupon Code",help:"",delay:1e3,onInput:o.onCouponChange,errors:i.couponError},null,8,["onInput","errors"])):g("",!0)])]),e("fieldset",Qs,[e("div",null,[o.showPaymentOption?(s(),x(n,{key:0,type:"radio",name:"paytype",label:"Payment option",options:o.paymentOptions,validation:"required",modelValue:i.payment,"onUpdate:modelValue":t[2]||(t[2]=u=>i.payment=u)},null,8,["options","modelValue"])):g("",!0)])]),i.raceData.optionalPurchases?(s(),a("div",Zs,[f(n,{type:"group",name:"optionalPurchases"},{default:R(()=>[(s(!0),a(h,null,v(i.raceData.optionalPurchases,(u,C)=>(s(),a("div",er,[e("h6",{innerHTML:u.description},null,8,tr),f(n,{type:"checkbox",label:`${u.label} - ${o.dollas(parseFloat(u.amount))}`,name:u.id},null,8,["label","name"]),u.options&&i.formInputData.optionalPurchases[u.id]?(s(),x(n,{key:0,type:"select",options:u.options,label:u.optionsLabel,name:`${u.id}-option`},null,8,["options","label","name"])):g("",!0)]))),256))]),_:1})])):g("",!0),e("ul",sr,[e("li",rr,[e("div",null,[ar,e("small",ir,l(o.paymentCostDets.name),1)]),e("div",null,[o.paymentCostDets.discounted?(s(),a("span",or,l(o.dollas(o.paymentCostDets.orig)),1)):g("",!0),e("span",{class:w({"text-success":o.paymentCostDets.discounted})},l(o.paymentCostDets.cost),3)])]),o.paymentCostDets.options?(s(!0),a(h,{key:0},v(o.paymentCostDets.options,(u,C)=>(s(),a("li",nr,[e("div",null,[e("h6",lr,l(u.label),1),u.option?(s(),a("small",cr,l(u.option),1)):g("",!0)]),e("div",null,[e("span",null,l(u.amount),1)])]))),256)):g("",!0),e("li",dr,[ur,e("span",hr,l(o.paymentCostDets.regFee),1)]),e("li",mr,[_r,e("strong",null,l(o.paymentCostDets.tot),1)])])])):g("",!0)]),i.payment==="cash"?(s(),a("div",pr,yr)):g("",!0),i.raceData.waiver?(s(),a("div",fr,[e("h5",null,l(i.raceData.waiver.header),1),e("p",null,l(i.raceData.waiver.text),1),f(n,{type:"checkbox",modelValue:i.waiverAccepted,"onUpdate:modelValue":t[3]||(t[3]=u=>i.waiverAccepted=u),label:"I HAVE READ AND UNDERSTAND THIS WAIVER",help:"I acknowledge that I have read, understand, and accepted the above release of liability.",name:"waiverAccepted",validation:"accepted","validation-messages":{accepted:"You must agree to the terms of the liability release above"},"validation-visibility":"live"},null,8,["modelValue"])])):g("",!0),o.sponsoredCategorySelected?(s(),a("div",vr,[e("h5",null,"Your "+l(o.selectedCategory.catdispname)+" race entry is sponsored by "+l(o.selectedCategory.sponsorName),1),f(n,{type:"submit",label:"Sign Up!",onClick:o.submitForm},null,8,["onClick"])])):g("",!0),o.sponsoredCategorySelected?g("",!0):(s(),x(n,{key:3,type:"submit",label:o.submitLabel,onClick:o.submitForm},null,8,["label","onClick"]))]),_:1},8,["modelValue","form-class","errors","onSubmit"]),i.submitted?(s(),a("div",br,$r)):g("",!0)])),f(_,{categories:i.raceData.regCategories,raceDate:i.raceData.eventDate},null,8,["categories","raceDate"])])):(s(),a("div",Dr,Sr))]))],64)}const wr=$(Bs,[["render",Rr]]);const xr={components:{EventDetailsComponent:T,MainNav:N},data(){return{categories:{},loading:!1,error:null,raceData:{},regData:{},payment:"",payStatus:!1}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{fetchData(){this.error=null,this.loading=!0,this.$route.params.raceid&&this.$route.params.payment_id&&D(`/api/races/${this.$route.params.raceid}`).then(r=>(this.raceData=r.data,D(`/api/payments/status?payment_id=${this.$route.params.payment_id}`).then(t=>{var c;this.loading=!1,this.payStatus=t.data.status,this.paymentUrl=(c=t.data.stripePayment)==null?void 0:c.url,this.regData=t.data.regData,this.payment=t.data.regData.paytype}))).catch(r=>{this.error="Failed to load race "+this.$route.params.raceid,console.error(r)})}},computed:{sortedCats(){let r={};return m.forEach(m.orderBy(this.raceData.regCategories,"disporder"),t=>{r[t.id]=t.catdispname}),r},loaded(){return!!this.raceData},paymentOptions(){let r={};return m.forEach(this.raceData.paymentOptions,t=>{r[t.type]=t.name}),r},pendingPayment(){return!!(this.regData.raceid!=this.$route.params.raceid||this.payStatus&&this.payStatus!="paid")},sponsoredCategorySelected(){var r;return!!((r=this.selectedCategory)!=null&&r.sponsored)},selectedCategory(){return m.find(this.raceData.regCategories,{id:this.regData.category})}}},Tr={key:0,class:"loading"},Nr={key:1},Pr={key:0,class:"error"},Er={key:1},Br={class:"row"},Mr={class:"col-md-6 order-md-1"},Fr={key:0},Ir=e("div",{class:"d-flex justify-content-between align-items-center mb-3"},[e("h4",null,"Your Registration is Confirmed")],-1),Or=[Ir],Lr={key:1,class:"mb-5"},Vr=e("div",{class:"d-flex justify-content-between align-items-center mb-3"},[e("h4",null,"Your Registration is Incomplete")],-1),Ur={key:0},Ar=e("p",{class:"text-danger h5"},"Please make your cash payment at the event to complete your registration.",-1),jr=e("p",null,'Your name will not show up on the "Who is signed up" list until payment is completed.',-1),qr=[Ar,jr],Yr={key:1},Hr=["href"],Wr={class:"col"},Kr={class:"row"},Gr={class:"form-group pt-3"},zr={class:"form-group pt-3"},Jr={key:2},Xr=e("a",{href:"mailto:support@signup.bike"},"support@signup.bike",-1),Qr={key:2},Zr={class:"text-center"},ea={class:"mt-5"};function ta(r,t,c,p,i,o){const y=b("MainNav"),d=b("EventDetailsComponent"),n=b("FormKit");return s(),a(h,null,[f(y),i.loading?(s(),a("div",Tr,"Loading...")):(s(),a("div",Nr,[i.error?(s(),a("div",Pr,l(i.error),1)):g("",!0),o.loaded?(s(),a("div",Er,[f(d,{details:i.raceData.eventDetails,raceid:i.raceData.raceid},null,8,["details","raceid"]),f(n,{type:"form",id:"race-registration",disabled:"",actions:!1,modelValue:i.regData,"onUpdate:modelValue":t[0]||(t[0]=_=>i.regData=_)},{default:R(()=>[e("div",Br,[e("div",Mr,[o.pendingPayment?g("",!0):(s(),a("div",Fr,Or)),o.pendingPayment?(s(),a("div",Lr,[Vr,i.payment==="cash"?(s(),a("div",Ur,qr)):(s(),a("div",Yr,[e("a",{href:r.paymentUrl},"Complete your payment",8,Hr)]))])):g("",!0),e("div",Wr,[e("div",Kr,[f(n,{type:"text",name:"first_name",label:"First name"}),f(n,{type:"text",name:"last_name",label:"Last name"})])]),e("div",Gr,[f(n,{type:"email",name:"email",label:"Email"})]),e("div",zr,[f(n,{type:"text",name:"sponsor",label:"Your Team or Sponsor"}),f(n,{type:"select",label:"Race Category:",name:"category",options:o.sortedCats},null,8,["options"])]),o.sponsoredCategorySelected?(s(),a("div",Jr,[e("h5",null," Your "+l(o.selectedCategory.catdispname)+" race entry is sponsored by "+l(o.selectedCategory.sponsorName),1)])):g("",!0)])])]),_:1},8,["modelValue"]),S(" Please send any corrections or questions to "),Xr])):(s(),a("div",Qr,[e("div",Zr,[e("h2",ea," Unable to load requested information "+l(r.$route.params.raceid)+" payment: "+l(r.$route.params.payment_id),1)])]))]))],64)}const sa=$(xr,[["render",ta]]);const ra={components:{SeriesResultRow:L,SeriesNavBar:P},data(){return{categories:{},loading:!1,error:null,displayName:"",series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(r){var t=document.querySelector(`#${r}`);t.scrollIntoView({behavior:"smooth"})},fetchData(){if(!this.$route.params.seriesid)return;this.error=null,this.loading=!0;let r=`/api/series/results/${this.$route.params.seriesid}`;D(r).then(({data:t})=>{this.loading=!1,this.categories=t.categories,this.displayName=t.displayName,this.series=this.$route.params.seriesid;let c=m.map(t.categories,p=>m.omit(p,["results","columns"]));console.log("temp:",m.orderBy(c,"disporder"))}).catch(t=>{console.error(t),this.categories={},this.error=t.toString()})}},computed:{sortedCats(){let r;return this.$route.path.indexOf("grom")>-1?r=m.filter(this.categories,t=>t.id.indexOf("grom")>-1):r=m.filter(this.categories,t=>t.id.indexOf("grom")==-1),m.orderBy(r,"disporder")},expertCats(){return m.filter(this.sortedCats,{laps:4})},sportCats(){return m.filter(this.sortedCats,{laps:3})},beginnerCats(){return m.filter(this.sortedCats,{laps:2})},gromCats(){return this.$route.path.indexOf("grom")>-1?m.filter(this.categories,r=>r.id.indexOf("grom")>-1):[]},haveResults(){return this.categories?Object.keys(this.categories).length>0:!1}}},aa={key:0,class:"loading"},ia={key:1},oa={key:0,class:"error"},na={class:"container-fluid text-center mt-5"},la=e("h3",null,"Series Standings",-1),ca=e("p",null,[S("Glossary of terms below:"),e("br"),S(" 1/50 = 1st Place/50 Points -/- = Did not race")],-1),da={key:1},ua={class:"container-fluid text-center mt-5"},ha={class:"list-inline"},ma=["onClick"],_a={class:"list-inline"},pa=["onClick"],ga={class:"list-inline"},ya=["onClick"],fa={class:"list-inline"},va=["onClick"],ba={class:"container-fluid"},ka=["id"],$a={class:"table table-striped table-hover"},Da={key:2},Ca=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No results yet...")],-1),Sa=[Ca];function Ra(r,t,c,p,i,o){const y=b("SeriesNavBar"),d=b("SeriesResultRow");return s(),a(h,null,[f(y,{series:i.series},null,8,["series"]),i.loading?(s(),a("div",aa,"Loading...")):(s(),a("div",ia,[i.error?(s(),a("div",oa,l(i.error),1)):g("",!0),e("div",na,[e("h2",null,l(i.displayName),1),la,ca]),o.haveResults?(s(),a("div",da,[e("div",ua,[e("ul",ha,[(s(!0),a(h,null,v(o.expertCats,n=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:_=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,ma)]))),128))]),e("ul",_a,[(s(!0),a(h,null,v(o.sportCats,n=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:_=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,pa)]))),128))]),e("ul",ga,[(s(!0),a(h,null,v(o.beginnerCats,n=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:_=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,ya)]))),128))]),e("ul",fa,[(s(!0),a(h,null,v(o.gromCats,n=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:_=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,va)]))),128))])]),e("div",ba,[(s(!0),a(h,null,v(o.sortedCats,n=>(s(),a("div",{key:n.id,class:"mt-5"},[e("h3",{id:n.id},l(n.catdispname),9,ka),e("table",$a,[e("thead",null,[e("tr",null,[(s(!0),a(h,null,v(n.columns,(_,u)=>(s(),a("th",{scope:"col",key:u},l(_),1))),128))])]),e("tbody",null,[(s(!0),a(h,null,v(n.results,(_,u)=>(s(),a("tr",{key:u},[f(d,{Pos:u,data:_},null,8,["Pos","data"])]))),128))])]),e("a",{role:"button",onClick:t[0]||(t[0]=_=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(s(),a("div",Da,Sa))]))],64)}const M=$(ra,[["render",Ra]]),wa={props:["data","Pos"],data(){return{count:0,dates:["5/4","5/11","5/18","5/25"]}},computed:{}};function xa(r,t,c,p,i,o){return s(),a(h,null,[e("td",null,l(c.data.Name),1),e("td",null,l(c.data.Cat),1),(s(!0),a(h,null,v(i.dates,(y,d)=>(s(),a("td",{key:d},l(c.data[y]||"-"),1))),128))],64)}const Ta=$(wa,[["render",xa]]);const Na={components:{ResultRow:Ta,SeriesNavBar:P},data(){return{teamResults:{},loading:!1,error:null,series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(r){var t=document.querySelector(`#${r}`);t.scrollIntoView({behavior:"smooth"})},fetchData(){if(!this.$route.params.seriesid)return;this.error=null,this.loading=!0;let r=`/api/team-comp?series=${this.$route.params.seriesid}`;D(r).then(({data:t})=>{this.loading=!1,this.series=this.$route.params.seriesid,this.teamResults=t}).catch(t=>{console.error(t),this.teamResults={},this.error=t.toString()})}},computed:{dates:()=>{}}},Pa={key:0,class:"loading"},Ea={key:1},Ba={key:0,class:"error"},Ma=e("h2",{class:"mt-5"},"Team Standings",-1),Fa={class:"container-fluid mt-5"},Ia={class:"table table-striped table-hover"},Oa=e("thead",null,[e("tr",null,[e("th",null,"Position"),e("th",null,"Team"),e("th",null,"Total Score")])],-1),La=e("h2",{class:"mt-5"},"Team Results",-1),Va={class:"container-fluid"},Ua={class:"table table-striped table-hover"},Aa=e("thead",null,[e("tr",null,[e("th",{style:{width:"25%"}},"Racer Name"),e("th",{style:{width:"25%"}},"Class"),e("th",{style:{width:"12.5%"}},"5/4"),e("th",{style:{width:"12.5%"}},"5/11"),e("th",{style:{width:"12.5%"}},"5/18"),e("th",{style:{width:"12.5%"}},"5/25")])],-1),ja={class:"table table-striped table-hover"},qa=e("th",{style:{width:"50%","text-align":"right"}},"Score (Avg of individual results):",-1),Ya={style:{width:"12.5%"}},Ha={style:{width:"12.5%"}},Wa={style:{width:"12.5%"}},Ka={style:{width:"12.5%"}};function Ga(r,t,c,p,i,o){const y=b("SeriesNavBar"),d=b("ResultRow");return s(),a(h,null,[f(y,{series:i.series},null,8,["series"]),i.loading?(s(),a("div",Pa,"Loading...")):(s(),a("div",Ea,[i.error?(s(),a("div",Ba,l(i.error),1)):g("",!0),Ma,e("div",Fa,[e("table",Ia,[Oa,e("tbody",null,[(s(!0),a(h,null,v(i.teamResults.result,(n,_)=>(s(),a("tr",{key:_},[e("td",null,l(_+1),1),e("td",null,l(n.teamName),1),e("td",null,l(n.totalScore),1)]))),128))])])]),La,(s(!0),a(h,null,v(i.teamResults.result,(n,_)=>(s(),a("div",{class:"mt-5",key:_},[e("h3",null,l(n.teamName),1),e("div",Va,[e("table",Ua,[Aa,e("tbody",null,[(s(!0),a(h,null,v(i.teamResults.teamDets[n.teamName],(u,C)=>(s(),a("tr",{key:C},[f(d,{data:u},null,8,["data"])]))),128))])]),e("table",ja,[e("thead",null,[e("tr",null,[qa,e("th",Ya,l(n.results["5/4"]?n.results["5/4"].avg:"-"),1),e("th",Ha,l(n.results["5/11"]?n.results["5/11"].avg:"-"),1),e("th",Wa,l(n.results["5/18"]?n.results["5/18"].avg:"-"),1),e("th",Ka,l(n.results["5/25"]?n.results["5/25"].avg:"-"),1)])])])])]))),128))]))],64)}const za=$(Na,[["render",Ga]]);const Ja={components:{EventDetailsComponent:T,MainNav:N},data(){return{categories:{},loading:!1,error:null,formattedStartDate:"",series:null,stageFilter:"all",racers:[],raceData:{}}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(r){var t=document.querySelector(`#${r}`);t.scrollIntoView({behavior:"smooth"})},fetchData(){this.error=null,this.loading=!0,this.$route.params.raceid&&D(`/api/races/roster/${this.$route.params.raceid}`).then(({data:r})=>{this.raceData=r,this.series=r.series,this.loading=!1,this.categories=r.regCategories,this.racers=r.registeredRacers}).catch(r=>{var t;if(this.loading=!1,((t=r.response)==null?void 0:t.status)===404){this.error="Race not found";return}console.error(r),this.categories={},this.error=r.toString()})},replacePlusSymbol(r){return r.replace("+","Plus")},payTypeToStage(r){const t=m.find(this.raceData.paymentOptions,{type:r});return t?t.name:""}},computed:{showPaytype(){var r;return!!((r=this.raceData)!=null&&r.showPaytypeOnRoster)},filterOptions(){let r={all:"All Stages"};return m.forEach(this.raceData.paymentOptions,t=>{r[t.type]=t.name}),r},filteredRacers(){return this.showPaytype&&this.stageFilter!=="all"?m.filter(this.racers,r=>r.paytype==this.stageFilter||r.paytype=="season"):this.racers},groupedRacers(){return m.groupBy(this.filteredRacers,"category")},sortedCats(){return m.filter(m.orderBy(this.categories,"disporder"),r=>m.includes(Object.keys(this.groupedRacers),r.id))},raceDate(){return k(this.raceData.eventDate).format("ddd, MMM D")}}},Xa={key:0,class:"loading"},Qa={key:1},Za={key:0,class:"error"},ei={key:1,id:"top"},ti={key:0},si={class:"row"},ri={key:0,class:"col-md-6"},ai={class:"container text-center mt-5"},ii={class:"list-inline"},oi=["onClick"],ni={class:"container-fluid"},li=["id"],ci={class:"table table-striped table-hover"},di=e("th",null," First Name ",-1),ui=e("th",null," Last Name ",-1),hi=e("th",null," Team/Sponsor ",-1),mi={key:0},_i={key:0},pi={key:1},gi=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No registrations yet...")],-1),yi=[gi];function fi(r,t,c,p,i,o){const y=b("MainNav"),d=b("EventDetailsComponent"),n=b("FormKit");return s(),a(h,null,[f(y),i.loading?(s(),a("div",Xa,"Loading...")):(s(),a("div",Qa,[i.error?(s(),a("div",Za,l(i.error),1)):(s(),a("div",ei,[f(d,{details:i.raceData.eventDetails,raceid:i.raceData.raceid},null,8,["details","raceid"]),Object.keys(i.racers).length?(s(),a("div",ti,[e("div",si,[e("div",{class:w({"col-md-6":o.showPaytype})},[e("h4",null,l(o.filteredRacers.length)+" Registered for "+l(i.raceData.displayName)+" on "+l(o.raceDate),1)],2),o.showPaytype?(s(),a("div",ri,[f(n,{type:"select",label:"Show registrations for:",name:"stageFilter",modelValue:i.stageFilter,"onUpdate:modelValue":t[0]||(t[0]=_=>i.stageFilter=_),default:"all",options:o.filterOptions},null,8,["modelValue","options"])])):g("",!0)]),e("div",ai,[e("ul",ii,[(s(!0),a(h,null,v(o.sortedCats,_=>(s(),a("li",{key:_.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:u=>o.scrollMeTo(o.replacePlusSymbol(_.id)),class:"link-primary"},l(_.catdispname),9,oi)]))),128))])]),e("div",ni,[(s(!0),a(h,null,v(o.sortedCats,_=>(s(),a("div",{key:_.id,class:"mt-5"},[e("h3",{id:o.replacePlusSymbol(_.id)},l(_.catdispname),9,li),e("table",ci,[e("thead",null,[e("tr",null,[di,ui,hi,o.showPaytype?(s(),a("th",mi," Stages ")):g("",!0)])]),e("tbody",null,[(s(!0),a(h,null,v(o.groupedRacers[_.id],(u,C)=>(s(),a("tr",{key:C},[e("td",null,l(u.first_name),1),e("td",null,l(u.last_name),1),e("td",null,l(u.sponsor),1),o.showPaytype?(s(),a("td",_i,l(o.payTypeToStage(u.paytype)),1)):g("",!0)]))),128))])]),e("a",{role:"button",onClick:t[1]||(t[1]=u=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(s(),a("div",pi,yi))]))]))],64)}const vi=$(Ja,[["render",fi]]),bi=A({history:j("/"),routes:[{path:"/",name:"home",component:B},{path:"/results/",name:"results",component:B},{path:"/race/:raceid",component:St},{path:"/result/:id",component:Ht},{path:"/result/series/:seriesid",component:bs},{path:"/register/:raceid",name:"register",component:wr},{path:"/regconfirmation/:raceid/:payment_id",component:sa},{path:"/roster/:raceid",name:"roster",component:vi},{path:"/series/:seriesid",component:M},{path:"/series/grom/:seriesid",component:M},{path:"/teamcomp/:seriesid",component:za}]});q.init({clientToken:"pub5b9b0cfce30b3b609b588d9f3ac85ebb",site:"datadoghq.com",env:"production",service:"public-site",version:"1.0.1",forwardErrorsToLogs:!0,sampleRate:100});const E=Y(J);E.use(H,W);E.use(bi);E.mount("#app");
