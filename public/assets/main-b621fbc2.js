import{_ as $,R as V,r as k,o as r,c as a,a as y,b as e,d as D,e as m,t as c,w as R,f as S,n as w,p as Y,g as H,h as C,i as h,F as d,j as v,k as T,l as W,m as K,q as G,s as z,u as J,v as Q}from"./main-ba68b533.js";const X={components:{RouterView:V},data(){return{races:[]}},mounted:function(){},computed:{}},Z={class:"container"};function ee(s,t,l,f,i,o){const p=k("RouterView");return r(),a("div",Z,[y(p)])}const te=$(X,[["render",ee]]),se={props:["url"],created(){(function(s,t,l){var f,i=s.getElementsByTagName(t)[0];s.getElementById(l)||(f=s.createElement(t),f.id=l,f.src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v15.0",i.parentNode.insertBefore(f,i))})(document,"script","facebook-jssdk")},mounted(){window.FB&&FB.XFBML.parse()}},re={id:"1"},ae=e("div",{id:"fb-root"},null,-1),ie=["data-href"];function oe(s,t,l,f,i,o){return r(),a("div",re,[ae,e("div",{class:"fb-share-button","data-href":this.url,"data-layout":"button","data-size":"large"},null,8,ie)])}const ne=$(se,[["render",oe]]),le={components:{FbShareComponent:ne},props:["details","raceid","compactMode"],data(){return{}},computed:{isRosterPage(){return this.$route.path.includes("/roster/")},isRegPage(){return this.$route.name==="register"},regDisabled(){return D().isBefore(this.details.regOpenDate)},regEnded(){return D().isAfter(this.details.regCloseDate)},regTimeToOpen(){return D().to(this.details.regOpenDate)},regTimeToClose(){return D().to(this.details.regCloseDate)},imgWidth(){return this.compactMode?150:225}}},ce={class:"container mb-4"},de=["src"],ue={class:"row p-1 pb-0 pe-lg-0 pt-lg-3 align-items-center rounded-3 border shadow"},he={key:0,class:"col-sm-3 offset-sm-1 p-0"},me=["href"],_e=["src","width"],pe={class:"col-lg-7 p-3 p-lg-3 pt-lg-3"},ye={class:"row"},ge={class:"col col-md-auto"},fe={class:"display-7 fw-bold lh-3"},ve={key:0,class:"lead mb-0 fw-bold"},be={class:"display-9"},ke={key:0,class:"d-grid gap-2 d-md-flex justify-content-md mb-4 mb-lg-3"},De={class:"col-md-auto"},$e=["href"],Ce={class:"col col-lg-2"},Re={key:0},Se={key:1,class:"fw-bold"},we={key:2,class:"row"},Te={key:0,class:"fw-bold"},xe={key:0,class:"fw-bold"},Ne={key:1,class:"fw-bold"},Pe={key:1,class:"col col-md-auto"},Ee={key:2,class:"col"};function Be(s,t,l,f,i,o){var n;const p=k("FbShareComponent"),_=k("RouterLink");return r(),a("div",ce,[o.isRegPage?(r(),a("img",{key:0,class:"img-fluid",src:l.details.headerPhoto,alt:""},null,8,de)):m("",!0),e("div",ue,[l.details.logoUrl?(r(),a("div",he,[e("a",{href:l.details.homepageUrl},[e("img",{class:"pb-1",src:l.details.logoUrl,alt:"",width:o.imgWidth},null,8,_e)],8,me)])):m("",!0),e("div",pe,[e("div",ye,[e("div",ge,[e("h3",fe,c(l.details.name),1),l.compactMode?m("",!0):(r(),a("p",ve,c(l.details.tagline),1))])]),e("p",be,c(l.details.formattedDates),1),l.details.homepageUrl&&!l.compactMode?(r(),a("div",ke,[e("div",De,[e("a",{class:"btn btn-sm btn-success",href:l.details.homepageUrl},"Event Homepage",8,$e)]),e("div",Ce,[l.details.facebookShare?(r(),a("div",Re,[y(p,{url:l.details.homepageUrl},null,8,["url"])])):m("",!0)])])):m("",!0),o.regDisabled?(r(),a("div",Se," Registration will open "+c(o.regTimeToOpen),1)):(r(),a("div",we,[(n=l.details)!=null&&n.regCloseDate?(r(),a("div",Te,[o.regEnded?(r(),a("div",xe," Registration is closed ")):(r(),a("div",Ne," Registration will close "+c(o.regTimeToClose),1))])):m("",!0),!o.isRegPage&&!o.regEnded?(r(),a("div",Pe,[y(_,{class:"btn btn-success",to:{name:"register",params:{raceid:l.raceid}}},{default:R(()=>[S("Register")]),_:1},8,["to"])])):m("",!0),o.isRosterPage?m("",!0):(r(),a("div",Ee,[y(_,{class:"btn btn-secondary",to:{name:"roster",params:{raceid:l.raceid}}},{default:R(()=>[S("See who is signed up ")]),_:1},8,["to"])]))]))])])])}const x=$(le,[["render",Be]]);const Me={props:["races"],data(){return{count:0,loggedIn:!1}},computed:{}},U=s=>(Y("data-v-2f3c77b1"),s=s(),H(),s),Fe={class:"navbar navbar-expand-md navbar-dark bg-dark fixed-top"},Le={class:"container-fluid"},Oe=U(()=>e("a",{class:"navbar-brand",href:"/"},"Signup.bike",-1)),Ie=U(()=>e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarsExample04","aria-controls":"navbarsExample04","aria-expanded":"false","aria-label":"Toggle navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),Ve={class:"collapse navbar-collapse",id:"navbarsExample04"},Ue={class:"navbar-nav me-auto mb-4 mb-md-0 px-5"},Ae={class:"nav-item"};function qe(s,t,l,f,i,o){const p=k("RouterLink");return r(),a("nav",Fe,[e("div",Le,[Oe,Ie,e("div",Ve,[e("ul",Ue,[e("li",Ae,[y(p,{class:w(["nav-link",{active:s.$route.name=="home"}]),to:{name:"home"}},{default:R(()=>[S(" Upcoming Races ")]),_:1},8,["class"])])]),i.loggedIn?(r(),a("button",{key:0,type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=_=>s.$emit("logout"))},"Logout")):m("",!0)])])])}const N=$(Me,[["render",qe],["__scopeId","data-v-2f3c77b1"]]);const je={emits:["logout"],components:{MainNav:N,RouterView:V,EventDetailsComponent:x},data(){return{count:0,races:[],loading:!0}},created(){this.$watch(()=>this.$route.query,()=>{this.fetchData()},{immediate:!0})},methods:{fetchData(){if(this.error=null,this.loading=!0,console.log("fetch plz"),this.$route)return C("/api/races/").then(s=>{this.races=s.data,this.loading=!1,console.log("fetched"),console.log(this.races)}).catch(s=>{this.loading=!1,this.error=s.toString(),console.error(s)})}},computed:{displayRaces(){let s={},t=h.filter(this.races,l=>{if(l.series&&s[l.series])return!1;let f=D().isBefore(D(l.eventDate));return console.log("isInFuture"+f+" "+l.displayName),l.isTestData&&!this.$route.query.test||!f&&!this.$route.query.past?!1:(typeof l.series=="string"&&l.series.length>1&&(console.log("set as shown "+l.raceid),s[l.series]=!0),!0)});return h.sortBy(t,[function(l){return D(l.eventDate)}])},loggedIn(){return!1}}},Ye={key:0},He={key:1};function We(s,t,l,f,i,o){const p=k("MainNav"),_=k("EventDetailsComponent");return r(),a(d,null,[y(p),i.loading?(r(),a("div",Ye," Plz wait, loading... ")):(r(),a("div",He,[(r(!0),a(d,null,v(o.displayRaces,(n,u)=>(r(),a("div",{key:u},[y(_,{details:n.eventDetails,raceid:n.raceid,"compact-mode":"true"},null,8,["details","raceid"])]))),128))]))],64)}const O=$(je,[["render",We],["__scopeId","data-v-80bd99a7"]]);let E=(s,t=!1)=>{const l=new Date(Date.UTC(0,0,0,0,0,0,s));let i=[l.getUTCMinutes(),l.getUTCSeconds()].map(o=>String(o).padStart(2,"0")).join(":");return t&&(i=i.concat("."+`${l.getUTCMilliseconds()}`.padStart(3,"0"))),l.getUTCHours()&&(i=l.getUTCHours()+":"+i),i};const Ke={props:["data","Pos","totLaps","showMillis"],data(){return{count:0}},methods:{msToTimeString(s){return E(s,this.showMillis)}},computed:{incompleteLaps(){return new Array(this.totLaps-this.data.laps.length).fill("-")},formattedTime(){return E(this.data.duration,this.showMillis)},trailingTime(){return this.data.back?this.showMillis?E(this.data.backMs,!0):this.data.back:"-"}}};function Ge(s,t,l,f,i,o){return r(),a(d,null,[e("td",null,c(l.Pos+1),1),e("td",null,c(l.data.Bib),1),e("td",null,c(l.data.Name),1),e("td",null,c(l.data.Sponsor),1),(r(!0),a(d,null,v(l.data.laps,(p,_)=>(r(),a("td",{key:_},c(o.msToTimeString(p.duration)),1))),128)),l.totLaps-l.data.laps.length>0?(r(!0),a(d,{key:0},v(o.incompleteLaps,p=>(r(),a("td",null,c(p),1))),256)):m("",!0),e("td",null,c(o.formattedTime),1),e("td",null,c(o.trailingTime),1)],64)}const A=$(Ke,[["render",Ge]]),ze={props:["series"],data(){return{count:0,seriesData:{}}},created(){this.$watch(()=>this.series,function(){if(!this.series)return;let s=`/api/series/${this.series}/races`;C(s).then(({data:t})=>{this.seriesData=t})})},computed:{isPcrs(){return this.series&&this.series.indexOf("pcrs")>-1}}},Je={id:"top",class:"navbar navbar-light bg-light"},Qe={class:"container-fluid"},Xe={class:"navbar-brand",href:"#"},Ze={key:0,class:"nav-item"},et=["href"],tt=e("p",{class:"mt-3"},"View Weekly lap times:",-1),st={class:"nav nav-tabs mt-1 justify-content-center"},rt={key:0,class:"nav-item"},at={key:1,class:"nav-item"},it={key:2,class:"nav-item"};function ot(s,t,l,f,i,o){const p=k("RouterLink");return r(),a(d,null,[e("nav",Je,[e("div",Qe,[e("div",Xe,c(i.seriesData.displayName),1),i.seriesData.homepage?(r(),a("div",Ze,[e("a",{class:"nav-link active","aria-current":"page",href:i.seriesData.homepage.url},c(i.seriesData.homepage.linkString),9,et)])):m("",!0)])]),tt,e("ul",st,[(r(!0),a(d,null,v(i.seriesData.races,_=>(r(),a("li",{key:_.raceid,class:"nav-item"},[y(p,{class:w(["nav-link",{active:s.$route.params.raceid===_.raceid}]),to:`/race/${_.raceid}`},{default:R(()=>[S(c(_.displayName+` - ${_.formattedStartDate}`),1)]),_:2},1032,["class","to"])]))),128)),o.isPcrs?(r(),a("li",rt,[y(p,{class:w(["nav-link",{active:s.$route.path=="/series/pcrs_2022"}]),to:"/series/pcrs_2022"},{default:R(()=>[S("Series Standings")]),_:1},8,["class"])])):m("",!0),o.isPcrs?(r(),a("li",at,[y(p,{class:w(["nav-link",{active:s.$route.path=="/series/grom/pcrs_2022"}]),to:"/series/grom/pcrs_2022"},{default:R(()=>[S("Grom Series Standings")]),_:1},8,["class"])])):m("",!0),o.isPcrs?(r(),a("li",it,[y(p,{class:w(["nav-link",{active:s.$route.path=="/teamcomp/pcrs_2022"}]),to:"/teamcomp/pcrs_2022"},{default:R(()=>[S("Team Competition")]),_:1},8,["class"])])):m("",!0)])],64)}const B=$(ze,[["render",ot]]);const nt={components:{ResultRow:A,SeriesNavBar:B},data(){return{categories:{},loading:!1,error:null,formattedStartDate:"",series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(s){var t=document.querySelector(`#${s}`);t.scrollIntoView({behavior:"smooth"})},fetchData(){if(this.error=null,this.loading=!0,this.$route.params.raceid){let s=`/api/races/results/${this.$route.params.raceid}`;C(s).then(({data:t})=>{this.formattedStartDate=t.raceMeta.formattedStartDate,this.series=t.series,this.loading=!1,this.categories=t.categories}).catch(t=>{console.error(t),this.categories={},this.error=t.toString()})}}},computed:{sortedCats(){return h.orderBy(this.categories,"disporder")},expertCats(){return h.filter(this.sortedCats,{laps:4})},sportCats(){return h.filter(this.sortedCats,{laps:3})},beginnerCats(){return h.filter(this.sortedCats,{laps:2})},gromCats(){return h.filter(this.categories,s=>s.id.indexOf("grom")>-1)},haveResults(){return this.categories?Object.keys(this.categories).length>0:!1}}},lt={key:0,class:"text-center"},ct={class:"mt-5"},dt={key:1,class:"loading"},ut={key:2},ht={key:0,class:"error"},mt={key:1},_t={class:"container text-center mt-5"},pt={class:"list-inline"},yt=["onClick"],gt={class:"list-inline"},ft=["onClick"],vt={class:"list-inline"},bt=["onClick"],kt={class:"list-inline"},Dt=["onClick"],$t={class:"container-fluid"},Ct=["id"],Rt={class:"table table-striped table-hover"},St={key:2},wt=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No results yet...")],-1),Tt=[wt];function xt(s,t,l,f,i,o){const p=k("SeriesNavBar"),_=k("ResultRow");return r(),a(d,null,[y(p,{series:i.series},null,8,["series"]),i.formattedStartDate?(r(),a("div",lt,[e("h2",ct,"Race Results - "+c(i.formattedStartDate),1)])):m("",!0),i.loading?(r(),a("div",dt,"Loading...")):(r(),a("div",ut,[i.error?(r(),a("div",ht,c(i.error),1)):m("",!0),o.haveResults?(r(),a("div",mt,[e("div",_t,[e("ul",pt,[(r(!0),a(d,null,v(o.expertCats,(n,u)=>(r(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:g=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,yt)]))),128))]),e("ul",gt,[(r(!0),a(d,null,v(o.sportCats,(n,u)=>(r(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:g=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,ft)]))),128))]),e("ul",vt,[(r(!0),a(d,null,v(o.beginnerCats,(n,u)=>(r(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:g=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,bt)]))),128))]),e("ul",kt,[(r(!0),a(d,null,v(o.gromCats,(n,u)=>(r(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:g=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,Dt)]))),128))])]),e("div",$t,[(r(!0),a(d,null,v(o.sortedCats,(n,u)=>(r(),a("div",{key:n.id,class:"mt-5"},[e("h3",{id:n.id},c(n.catdispname),9,Ct),e("table",Rt,[e("thead",null,[e("tr",null,[(r(!0),a(d,null,v(n.columns,(g,b)=>(r(),a("th",{scope:"col",key:b},c(g),1))),128))])]),e("tbody",null,[(r(!0),a(d,null,v(n.results,(g,b)=>(r(),a("tr",{key:b},[y(_,{totLaps:n.laps,Pos:b,data:g},null,8,["totLaps","Pos","data"])]))),128))])]),e("a",{role:"button",onClick:t[0]||(t[0]=g=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(r(),a("div",St,Tt))]))],64)}const Nt=$(nt,[["render",xt]]),Pt={props:["series","displayName"],data(){return{count:0,seriesData:{},races:[]}},created(){this.$watch(()=>this.series,function(){if(!this.series)return;let s=`/api/results/?series=${this.series}`;C(s).then(({data:t})=>(this.races=t,C(`api/results/series/?series=${this.series}`))).then(({data:t})=>{this.seriesData=t})})},computed:{isPcrs(){return this.series&&this.series.indexOf("pcrs")>-1},hasTeamComp(){var s,t;return((t=(s=this.seriesData)==null?void 0:s.teamCompDates)==null?void 0:t.length)>1}}},Et={id:"top",class:"navbar navbar-light bg-light"},Bt={class:"container-fluid"},Mt={class:"navbar-brand h2",href:"#"},Ft=e("p",{class:"mt-3"},"View Individual Event Times:",-1),Lt={class:"nav nav-tabs mt-1 justify-content-center"},Ot={key:0},It={key:1};function Vt(s,t,l,f,i,o){const p=k("RouterLink");return r(),a(d,null,[e("nav",Et,[e("div",Bt,[e("div",Mt,c(l.displayName||i.seriesData.eventName),1)])]),Ft,e("ul",Lt,[(r(!0),a(d,null,v(i.races,_=>(r(),a("li",{key:_.raceid,class:"nav-item"},[y(p,{class:w(["nav-link",{active:s.$route.params.id===_.raceid&&s.$route.name=="raceResult"}]),to:`/result/${_.raceid}`},{default:R(()=>[S(c(_.eventName+` - ${_.formattedStartDate}`),1)]),_:2},1032,["class","to"])]))),128)),o.hasTeamComp?(r(),a("li",Ot,[y(p,{class:w(["nav-link",{active:s.$route.name=="seriesResults"}]),to:{name:"seriesResults",params:{seriesid:l.series}}},{default:R(()=>[S("Overall Standings")]),_:1},8,["class","to"])])):m("",!0),o.hasTeamComp?(r(),a("li",It,[y(p,{class:w(["nav-link",{active:s.$route.name=="teamCompResults"}]),to:{name:"teamCompResults",params:{seriesid:l.series}}},{default:R(()=>[S("Team Competition Standings")]),_:1},8,["class","to"])])):m("",!0)])],64)}const M=$(Pt,[["render",Vt]]);const Ut={components:{ResultRow:A,SeriesNavBar:M},data(){return{resultData:{},categories:{},loading:!1,error:null,formattedStartDate:"",series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(s){var t=document.querySelector(`#${s}`);t.scrollIntoView({behavior:"smooth"})},fetchData(){if(this.error=null,this.loading=!0,this.$route.params.id){let s=`/api/results/${this.$route.params.id}`;C(s).then(({data:t})=>{this.formattedStartDate=t.formattedStartDate,this.series=t.series,this.resultData=t,this.loading=!1,this.categories=t.categories}).catch(t=>{console.error(t),this.categories={},t.response.status==404?this.error="":this.error=t.toString(),this.loading=!1})}else this.$router.push("")},metaColumns(s){return s.slice(0,4)},lapColumns(s){let t=[];for(let l=1;l<=s.length;l++)t.push(`Lap ${l}`);return this.fastestLapScoring?t.push("Fastest Lap:"):t.push("Total"),t.push("Time Behind Leader"),t}},computed:{fastestLapScoring(){return this.resultData.scoringType=="fastestlap"},sortedCats(){return h.orderBy(this.categories,"disporder")},haveResults(){return this.categories?Object.keys(this.categories).length>0:!1}}},At={key:1,class:"text-center"},qt={class:"mt-5"},jt={key:2,class:"text-center"},Yt={class:"mt-5"},Ht={key:3,class:"loading"},Wt={key:4},Kt={key:0,class:"error"},Gt={key:1},zt={id:"top",class:"container text-center mt-5"},Jt={class:"list-inline"},Qt=["onClick"],Xt={class:"container-fluid"},Zt=["id"],es={class:"table table-striped table-hover"},ts={key:2},ss=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No results yet...")],-1),rs=[ss];function as(s,t,l,f,i,o){const p=k("SeriesNavBar"),_=k("ResultRow");return r(),a(d,null,[i.series?(r(),T(p,{key:0,series:i.series},null,8,["series"])):m("",!0),i.resultData.eventName?(r(),a("div",At,[e("h2",qt,"Race Results - "+c(i.resultData.eventName),1)])):m("",!0),i.formattedStartDate?(r(),a("div",jt,[e("h2",Yt,c(i.formattedStartDate),1)])):m("",!0),i.loading?(r(),a("div",Ht,"Loading...")):(r(),a("div",Wt,[i.error?(r(),a("div",Kt,c(i.error),1)):m("",!0),o.haveResults?(r(),a("div",Gt,[e("div",zt,[e("ul",Jt,[(r(!0),a(d,null,v(o.sortedCats,(n,u)=>(r(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:g=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,Qt)]))),128))])]),e("div",Xt,[(r(!0),a(d,null,v(o.sortedCats,(n,u)=>(r(),a("div",{key:n.id,class:"mt-5"},[e("h3",{id:n.id},c(n.catdispname),9,Zt),e("table",es,[e("thead",null,[e("tr",null,[(r(!0),a(d,null,v(o.metaColumns(n.columns),(g,b)=>(r(),a("th",{scope:"col",key:b},c(g),1))),128)),(r(!0),a(d,null,v(o.lapColumns(n.results[0].laps),(g,b)=>(r(),a("th",{scope:"col",key:b},c(g),1))),128))])]),e("tbody",null,[(r(!0),a(d,null,v(n.results,(g,b)=>(r(),a("tr",{key:b},[y(_,{totLaps:n.results[0].laps.length,Pos:b,data:g,showMillis:i.resultData.showMillis||o.fastestLapScoring},null,8,["totLaps","Pos","data","showMillis"])]))),128))])]),e("a",{role:"button",onClick:t[0]||(t[0]=g=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(r(),a("div",ts,rs))]))],64)}const is=$(Ut,[["render",as]]);const os={props:["data","Pos"],data(){return{count:0}},computed:{}};function ns(s,t,l,f,i,o){return r(),a(d,null,[e("td",null,c(l.Pos+1),1),e("td",null,c(l.data.Bib),1),e("td",null,c(l.data.Name),1),e("td",null,c(l.data.Age),1),e("td",null,c(l.data.Sponsor),1),(r(!0),a(d,null,v(l.data.results,(p,_)=>(r(),a("td",{class:w({"text-danger":p.dropped}),key:_},c(p.resultString),3))),128)),e("td",null,c(l.data.seriesPoints),1)],64)}const q=$(os,[["render",ns]]);const ls={components:{SeriesResultRow:q,SeriesNavBar:M},data(){return{categories:{},loading:!1,error:null,displayName:"",series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(s){var t=document.querySelector(`#${s}`);t.scrollIntoView({behavior:"smooth"})},fetchData(){if(!this.$route.params.seriesid)return;this.error=null,this.loading=!0;let s=`/api/series/results/${this.$route.params.seriesid}`;C(s).then(({data:t})=>{this.loading=!1,this.categories=t.categories,this.displayName=t.eventName,this.series=this.$route.params.seriesid,h.map(t.categories,l=>h.omit(l,["results","columns"]))}).catch(t=>{console.error(t),this.categories={},this.error=t.toString()})}},computed:{sortedCats(){return h.orderBy(this.categories,"disporder")},haveResults(){return this.categories?Object.keys(this.categories).length>0:!1},isPCRS(){return h.isString(this.series)&&this.series.indexOf("pcrs")>-1}}},cs={key:0,class:"loading"},ds={key:1},us={key:0,class:"error"},hs={class:"container-fluid text-center mt-5"},ms=e("h3",null,"Series Standings",-1),_s=e("p",null,"Glossary of terms below:",-1),ps={key:0},ys={key:1},gs={key:1},fs={class:"container-fluid text-center mt-5"},vs={class:"list-inline"},bs=["onClick"],ks={class:"container-fluid"},Ds=["id"],$s={class:"table table-striped table-hover"},Cs={key:2},Rs=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No results yet...")],-1),Ss=[Rs];function ws(s,t,l,f,i,o){const p=k("SeriesNavBar"),_=k("SeriesResultRow");return r(),a(d,null,[y(p,{series:i.series,displayName:i.displayName},null,8,["series","displayName"]),i.loading?(r(),a("div",cs,"Loading...")):(r(),a("div",ds,[i.error?(r(),a("div",us,c(i.error),1)):m("",!0),e("div",hs,[ms,_s,o.isPCRS?(r(),a("p",ps,"1/50 = 1st Place/50 Points   -/- = Did not race")):(r(),a("p",ys,"1/100 = 1st Place/100 Points   -/- = Did not race"))]),o.haveResults?(r(),a("div",gs,[e("div",fs,[e("ul",vs,[(r(!0),a(d,null,v(o.sortedCats,n=>(r(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:u=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,bs)]))),128))])]),e("div",ks,[(r(!0),a(d,null,v(o.sortedCats,n=>(r(),a("div",{key:n.id,class:"mt-5"},[e("h3",{id:n.id},c(n.catdispname),9,Ds),e("table",$s,[e("thead",null,[e("tr",null,[(r(!0),a(d,null,v(n.columns,(u,g)=>(r(),a("th",{scope:"col",key:g},c(u),1))),128))])]),e("tbody",null,[(r(!0),a(d,null,v(n.results,(u,g)=>(r(),a("tr",{key:g},[y(_,{Pos:g,data:u},null,8,["Pos","data"])]))),128))])]),e("a",{role:"button",onClick:t[0]||(t[0]=u=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(r(),a("div",Cs,Ss))]))],64)}const Ts=$(ls,[["render",ws]]),xs={props:["categories","raceDate"],data(){return{}},methods:{formatStartTime(s){return D(`${D(this.raceDate).format("YYYY-MM-DD")} ${s}`).format("h:mm A")}},computed:{groupByStartTimes(){let s=this.categories.toSorted((t,l)=>D(t.startTime,"H:mm").diff(D(l.startTime,"H:mm")));return h.groupBy(s,"startTime")},hasStartTimes(){return!!h.some(this.categories,"startTime")}}},Ns={key:0},Ps=e("h5",null,"Race Start Times:",-1),Es={class:"row gap-5 mb-3"},Bs={class:""},Ms={class:"row g-2 px-4 gx-4 border bg-light"};function Fs(s,t,l,f,i,o){return l.categories.length&&o.hasStartTimes?(r(),a("div",Ns,[Ps,e("div",Es,[(r(!0),a(d,null,v(o.groupByStartTimes,(p,_)=>(r(),a("div",{key:_,class:"col-md-5"},[e("h6",Bs,c(o.formatStartTime(_))+":",1),e("div",Ms,[(r(!0),a(d,null,v(o.groupByStartTimes[_],n=>(r(),a("div",{key:n.id,class:"col-lg text-nowrap my-1"},c(n.catdispname),1))),128))])]))),128))])])):m("",!0)}const Ls=$(xs,[["render",Fs]]);let Os=h.debounce((s,t)=>{window.localStorage.setItem(`race-reg-form-data-${t}`,JSON.stringify(s))},3500),Is=s=>{let t=window.localStorage.getItem(`race-reg-form-data-${s}`);if(t){let l={};try{l=JSON.parse(t)}catch{}return l}return null},Vs=s=>{window.localStorage.removeItem(`race-reg-form-data-${s}`)};function Us(s){if(s===0)return 0;let t=s*100,l=t*.04;return l>600&&(l=600),Math.round((t+l+30)/(1-.029))-t}const As={components:{MainNav:N,EventDetailsComponent:x,EventCategoryScheduleComponent:Ls},data(){return{categories:{},loading:!1,error:null,formError:[],formInputData:{},raceData:null,payment:"",birthdate:"",submitted:!1,waiverAccepted:!1,couponError:[],prevBibError:[],seriesRaces:{},seriesRaceIdx:0,previousReg:!1,prevAge:null}},created(){this.$watch(()=>this.$route.params.raceid,()=>{this.fetchData()},{immediate:!0})},watch:{formInputData:{handler(s,t){this.previousReg==!1&&Os(s,this.$route.params.raceid)},deep:!0}},methods:{dollas(s){return s.toLocaleString("en-US",{style:"currency",currency:"USD"})},fetchData(){this.error=null,this.loading=!0,this.$route.params.raceid&&C(`/api/races/${this.$route.params.raceid}`).then(async s=>{var l;this.raceData=s.data;let t=Is(this.$route.params.raceid);t&&(h.find((l=this.raceData)==null?void 0:l.regCategories,{id:t.category})||delete t.category,t.waiverAccepted=!1,this.formInputData=t),this.raceData.series&&this.raceData.toString().length>1&&await C(`/api/series/${this.raceData.series}/registration`).then(({data:f})=>{this.seriesRaces=f;let i=D();this.seriesRaceIdx=0,h.some(f,({eventDate:o,raceid:p},_)=>D(o).isBefore(i)?!1:(this.seriesRaceIdx=_,this.$router.push(`/register/${p}`),!0))}),this.loading=!1,this.payment=this.raceData.paymentOptions[0].type}).catch(s=>{if(this.raceData=null,this.loading=!1,this.error=s.toString(),s.code=="ERR_BAD_REQUEST")return console.warn("tried to load raceid: "+this.$route.params.raceid),console.warn(s.message);console.error(s)})},findPrevBib(s){C.post("/api/racers/bib",{series:`${this.raceData.series}`,bibNumber:s}).then(({data:t})=>{if(console.log("prevbib"),console.log(t),t.paytype==="season"){this.prevBibError=["You are already registered for the whole season"];return}t.prevPaymentId=t.paymentId,delete t.paymentId,this.formInputData=t,this.prevAge=t.racerAge}).catch(({response:t})=>{console.dir(t),t.status==404&&(this.prevBibError=[t.data.message])})},onPrevBibChange(s){s?this.findPrevBib(s):(this.prevBibError=[],this.prevAge=null)},getCouponPricing(s){C.post("/api/payments/pricing",{raceid:`${this.$route.params.raceid}`,couponCode:s}).then(({data:t})=>{if(this.raceData.paymentOptions=t.paymentOptions,t.validCoupon)this.couponError=[];else{if(t.reason)return this.couponError=[t.reason];this.couponError=["Invalid Coupon Code"]}})},onCouponChange(s){s?this.getCouponPricing(s):this.couponError=[]},submitForm(s){s.preventDefault(),this.$formkit.submit("race-registration")},async submit(s){console.log(s),s.birthdate=void 0,s.racerAge=this.racerAge,s.paytype=this.payment,s.timestamp=D().format(),await C.post(`/api/payments/start-registration?race=${this.raceData.raceid}`,s).then(t=>{if(t.data){if(console.log("response data"),console.log(t.data),t.data.redirect)return this.submitted=!0,Vs(this.$route.params.raceid),new Promise(l=>setTimeout(()=>{window.location.href=t.data.redirect,l()},2e3));t.data.message&&(this.formError=[t.data.message])}}).catch(t=>{var l,f;if((f=(l=t.response)==null?void 0:l.data)!=null&&f.message)return this.formError=[t.response.data.message];this.formError=["Error submitting request"]})},getEventTimeObj(s){return D(`${D(this.raceData.eventDate).format("YYYY-MM-DD")} ${s}`)}},computed:{startTimes(){return this.hasStartTimes?h.map(h.uniqBy(this.raceData.regCategories,"startTime"),"startTime"):null},hasStartTimes(){return!!h.some(this.raceData.regCategories,"startTime")},currentTime(){return D().local().format()},firstRaceTime(){return this.hasStartTimes?D.min(h.map(this.startTimes,s=>D(`${this.eventDateFormatted} ${s}`))):null},lastRaceTime(){return this.hasStartTimes?D.max(h.map(this.startTimes,s=>D(`${this.eventDateFormatted} ${s}`))):null},sortedCats(){const s=h.filter(this.raceData.regCategories,l=>!0);let t={};return h.forEach(h.orderBy(s,"disporder"),l=>{t[l.id]=l.catdispname}),t},loaded(){return!!this.raceData},submitLabel(){return this.payment=="cash"||this.sponsoredCategorySelected?"Sign Up!":"Go to Payment"},cashEnabled(){return!!this.raceData.cashPaymentsEnabled},eventDateFormatted(){return D(this.raceData.eventDate).format("YYYY-MM-DD")},regDisabled(){return this.$route.query.test!==void 0?!1:this.eventFull||D().isBefore(this.raceData.eventDetails.regOpenDate)||this.raceData.eventDetails.regCloseDate&&D().isAfter(this.raceData.eventDetails.regCloseDate)?!0:this.lastRaceTime?D().isAfter(this.lastRaceTime.subtract(5,"minute")):!1},eventFull(){return!!(this.raceData.entryCountMax&&this.raceData.entryCountMax>1&&this.raceData.entryCount>=this.raceData.entryCountMax)},paymentOptions(){let s={};return h.forEach(this.raceData.paymentOptions,t=>{s[t.type]=t.name}),this.cashEnabled&&(s.cash="Cash Payment (Today's Race Only)"),s},paymentCostDets(){var o,p,_,n;if(!this.selectedCategory)return{};if(this.paymenttypeRequiredCategorySelected&&(this.payment=(o=this.selectedCategory)==null?void 0:o.paytype),this.sponsoredCategorySelected)return this.payment="season",{cost:this.dollas(0),regFee:this.dollas(0),tot:this.dollas(0)};let s;this.payment==="cash"?s="single":s=this.payment;let t=h.find((p=this.raceData)==null?void 0:p.paymentOptions,u=>u.type===s);t||(this.payment="single",t=h.find((_=this.raceData)==null?void 0:_.paymentOptions,u=>u.type===this.payment));const l=parseFloat(t.amount);let f=0;l>0&&this.payment!=="cash"&&(f=(t.regFee+t.stripeFee)/100);const i={};if(h.assign(i,t,{name:t.name,cost:this.dollas(l),regFee:this.dollas(f),tot:this.dollas(parseFloat(t.amount)+parseFloat(f))}),(n=this.raceData)!=null&&n.optionalPurchases&&this.formInputData.optionalPurchases){let u=l;this.raceData.optionalPurchases.forEach(({id:g,label:b,description:P,amount:L})=>{this.formInputData.optionalPurchases[g]&&(i.options||(i.options=[]),i.options.push({description:P,label:b,id:g,amount:this.dollas(parseFloat(L))}),u+=parseFloat(L))}),f=Us(u)/100,i.regFee=this.dollas(f),i.tot=this.dollas(u+f)}return i},showPaymentOption(){return this.paymenttypeRequiredCategorySelected||this.sponsoredCategorySelected?!1:this.cashEnabled?!0:!(this.raceData.paymentOptions&&this.raceData.paymentOptions.length<2)},paymenttypeRequiredCategorySelected(){var s;return!!(!this.selectedCategory||(s=this.selectedCategory)!=null&&s.paytype)},sponsoredCategorySelected(){var s;return!!((s=this.selectedCategory)!=null&&s.sponsored)},selectedCategory(){var s,t;return this.formInputData&&this.formInputData.category?h.find((s=this.raceData)==null?void 0:s.regCategories,{id:(t=this.formInputData)==null?void 0:t.category}):null},racerAge(){if(this.prevAge)return this.prevAge;if(this.birthdate){const s=D(),t=D(this.birthdate);return s.year()-t.year()}}}},qs={key:0,class:"loading"},js={key:1},Ys={key:0,class:"error"},Hs={key:1},Ws={key:0,class:"h5"},Ks={key:1},Gs=e("h3",null,"Registration is closed.",-1),zs=[Gs],Js={key:2,class:"mb-5"},Qs=["innerHTML"],Xs={key:1},Zs={class:"row"},er={class:"col-md-6 order-md-1 mb-3"},tr=e("h4",{class:"d-flex justify-content-between align-items-center mb-3"},[e("h5",null,"Registration Info"),e("span",{class:"badge badge-secondary badge-pill"},"3")],-1),sr={class:"form-group pt-3"},rr={class:"form-group pt-3"},ar={key:0,class:"col-md-5 order-md-2 mb-4"},ir=e("h4",{class:"d-flex justify-content-between align-items-center mb-3"},[e("h5",null,"Payment Detail")],-1),or={class:"list-group mb-3"},nr={class:"list-group mb-3"},lr={key:0},cr={class:"list-group mb-3"},dr=["innerHTML"],ur={class:"list-group mb-3 formkit-fieldset"},hr={class:"list-group-item d-flex justify-content-between lh-condensed"},mr=e("h6",{class:"my-0"},"Event Entry:",-1),_r={class:"text-muted"},pr={key:0,class:"mx-3 text-decoration-line-through text-danger"},yr={class:"list-group-item d-flex justify-content-between lh-condensed"},gr={class:"my-0"},fr={key:0,class:"text-muted"},vr={class:"list-group-item d-flex justify-content-between lh-condensed"},br=e("div",null,[e("h6",{class:"my-0"},"Online Processing Fee:"),e("small",{class:"text-muted"},"Credit Card Processing and Online Registration")],-1),kr={class:"text-muted"},Dr={class:"list-group-item d-flex justify-content-between"},$r=e("span",null,"Total (USD)",-1),Cr={key:0},Rr={class:"mb-5"},Sr={key:1},wr=e("h2",{class:"text-danger"},"Your registration will not be active until payment is received at the event",-1),Tr=[wr],xr={key:2},Nr={key:2},Pr=e("h2",null,"Submission successful, redirecting",-1),Er=[Pr],Br={key:2},Mr=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"Race not found...")],-1),Fr=[Mr];function Lr(s,t,l,f,i,o){var g;const p=k("MainNav"),_=k("EventDetailsComponent"),n=k("FormKit"),u=k("EventCategoryScheduleComponent");return r(),a(d,null,[y(p),i.loading?(r(),a("div",qs,"Loading...")):(r(),a("div",js,[i.error?(r(),a("div",Ys,c(i.error),1)):m("",!0),o.loaded?(r(),a("div",Hs,[y(_,{details:i.raceData.eventDetails,raceid:i.raceData.raceid},null,8,["details","raceid"]),o.eventFull?(r(),a("div",Ws,"This event has reached the registration entry max of "+c(i.raceData.entryCountMax),1)):m("",!0),o.regDisabled?(r(),a("div",Ks,zs)):(r(),a("div",Js,[(g=i.raceData)!=null&&g.headerContent?(r(),a("div",{key:0,class:"mb-3",innerHTML:i.raceData.headerContent},null,8,Qs)):m("",!0),i.seriesRaceIdx>0?(r(),a("div",Xs,[y(n,{"label-class":"text-danger fw-bold fs-5",type:"checkbox",name:"prevBibLookup",label:"I have a bib number!",help:"Look up your information from a previous race",modelValue:i.previousReg,"onUpdate:modelValue":t[0]||(t[0]=b=>i.previousReg=b)},null,8,["modelValue"]),i.previousReg?(r(),T(n,{key:0,type:"number",name:"bibNumber",label:"Bib Number:",help:"Enter your Bib Number from your previous race to pre-fill your info",delay:1500,onInput:o.onPrevBibChange,errors:i.prevBibError,validation:"required"},null,8,["onInput","errors"])):m("",!0)])):m("",!0),y(n,{type:"form",id:"race-registration",modelValue:i.formInputData,"onUpdate:modelValue":t[4]||(t[4]=b=>i.formInputData=b),"form-class":i.submitted?"hide":"show",errors:i.formError,actions:!1,onSubmit:o.submit},{default:R(()=>[e("div",Zs,[e("div",er,[tr,y(n,{type:"text",name:"first_name",label:"First name",help:"What is your first name",validation:"required"}),y(n,{type:"text",name:"last_name",label:"Last name",help:"What is your last name",validation:"required"}),e("div",sr,[i.previousReg?m("",!0):(r(),T(n,{key:0,type:"email",name:"email",label:"Your email",help:"Enter an email address",validation:"required|email"}))]),y(n,{type:"text",name:"sponsor",label:"Your Team or Sponsor",help:"Enter an optional Team or Sponsor name"}),i.previousReg?m("",!0):(r(),T(n,{key:0,type:"date",value:"2001-01-01",name:"birthdate",label:"Birthday",modelValue:i.birthdate,"onUpdate:modelValue":t[1]||(t[1]=b=>i.birthdate=b),help:"Enter your birthdate",validation:"required|before:2020-01-01","validation-visibility":"live"},null,8,["modelValue"])),e("div",null,"Age: "+c(o.racerAge),1),e("div",rr,[y(n,{type:"select",id:"category",label:"Category:",placeholder:"Select a category",name:"category",options:o.sortedCats,validation:"required","validation-visibility":"dirty","validation-messages":{is:"You must select a category"}},null,8,["options"])])]),o.paymentCostDets?(r(),a("div",ar,[ir,e("fieldset",or,[e("div",null,[i.raceData.couponsEnabled?(r(),T(n,{key:0,type:"text",name:"coupon",label:"Coupon Code",help:"",delay:1e3,onInput:o.onCouponChange,errors:i.couponError},null,8,["onInput","errors"])):m("",!0)])]),e("fieldset",nr,[e("div",null,[o.showPaymentOption?(r(),T(n,{key:0,type:"radio",name:"paytype",label:"Payment option",options:o.paymentOptions,validation:"required",modelValue:i.payment,"onUpdate:modelValue":t[2]||(t[2]=b=>i.payment=b)},null,8,["options","modelValue"])):m("",!0)])]),i.raceData.optionalPurchases?(r(),a("div",lr,[y(n,{type:"group",name:"optionalPurchases"},{default:R(()=>[(r(!0),a(d,null,v(i.raceData.optionalPurchases,(b,P)=>(r(),a("div",cr,[e("h6",{innerHTML:b.description},null,8,dr),y(n,{type:"checkbox",label:`${b.label} - ${o.dollas(parseFloat(b.amount))}`,name:b.id},null,8,["label","name"]),b.options&&i.formInputData.optionalPurchases[b.id]?(r(),T(n,{key:0,type:"select",options:b.options,label:b.optionsLabel,name:`${b.id}-option`},null,8,["options","label","name"])):m("",!0)]))),256))]),_:1})])):m("",!0),e("ul",ur,[e("li",hr,[e("div",null,[mr,e("small",_r,c(o.paymentCostDets.name),1)]),e("div",null,[o.paymentCostDets.discounted?(r(),a("span",pr,c(o.dollas(o.paymentCostDets.orig)),1)):m("",!0),e("span",{class:w({"text-success":o.paymentCostDets.discounted})},c(o.paymentCostDets.cost),3)])]),o.paymentCostDets.options?(r(!0),a(d,{key:0},v(o.paymentCostDets.options,(b,P)=>(r(),a("li",yr,[e("div",null,[e("h6",gr,c(b.label),1),b.option?(r(),a("small",fr,c(b.option),1)):m("",!0)]),e("div",null,[e("span",null,c(b.amount),1)])]))),256)):m("",!0),e("li",vr,[br,e("span",kr,c(o.paymentCostDets.regFee),1)]),e("li",Dr,[$r,e("strong",null,c(o.paymentCostDets.tot),1)])])])):m("",!0)]),o.sponsoredCategorySelected?(r(),a("div",Cr,[e("p",Rr,[e("h5",null,"Your "+c(o.selectedCategory.catdispname)+" race entry is sponsored by "+c(o.selectedCategory.sponsorName),1)])])):m("",!0),i.payment==="cash"?(r(),a("div",Sr,Tr)):m("",!0),i.raceData.waiver?(r(),a("div",xr,[e("h5",null,c(i.raceData.waiver.header),1),e("p",null,c(i.raceData.waiver.text),1),y(n,{type:"checkbox",modelValue:i.waiverAccepted,"onUpdate:modelValue":t[3]||(t[3]=b=>i.waiverAccepted=b),label:"I HAVE READ AND UNDERSTAND THIS WAIVER",help:"I acknowledge that I have read, understand, and accepted the above release of liability.",name:"waiverAccepted",validation:"accepted","validation-messages":{accepted:"You must agree to the terms of the liability release above"},"validation-visibility":"live"},null,8,["modelValue"])])):m("",!0),y(n,{type:"submit",label:o.submitLabel,onClick:o.submitForm},null,8,["label","onClick"])]),_:1},8,["modelValue","form-class","errors","onSubmit"]),i.submitted?(r(),a("div",Nr,Er)):m("",!0)])),y(u,{categories:i.raceData.regCategories,raceDate:i.raceData.eventDate},null,8,["categories","raceDate"])])):(r(),a("div",Br,Fr))]))],64)}const Or=$(As,[["render",Lr]]);const Ir={components:{EventDetailsComponent:x,MainNav:N},data(){return{categories:{},loading:!1,error:null,raceData:{},regData:{},payment:"",payStatus:!1}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{fetchData(){this.error=null,this.loading=!0,this.$route.params.raceid&&this.$route.params.payment_id&&C(`/api/races/${this.$route.params.raceid}`).then(s=>(this.raceData=s.data,C(`/api/payments/status?payment_id=${this.$route.params.payment_id}`).then(t=>{var l;this.loading=!1,this.payStatus=t.data.status,this.paymentUrl=(l=t.data.stripePayment)==null?void 0:l.url,this.regData=t.data.regData,this.payment=t.data.regData.paytype}))).catch(s=>{this.error="Failed to load race "+this.$route.params.raceid,console.error(s)})}},computed:{sortedCats(){let s={};return h.forEach(h.orderBy(this.raceData.regCategories,"disporder"),t=>{s[t.id]=t.catdispname}),s},loaded(){return!!this.raceData},paymentOptions(){let s={};return h.forEach(this.raceData.paymentOptions,t=>{s[t.type]=t.name}),s},pendingPayment(){return!!(this.regData.raceid!=this.$route.params.raceid||this.payStatus&&this.payStatus!="paid")},sponsoredCategorySelected(){var s;return!!((s=this.selectedCategory)!=null&&s.sponsored)},selectedCategory(){return h.find(this.raceData.regCategories,{id:this.regData.category})}}},Vr={key:0,class:"loading"},Ur={key:1},Ar={key:0,class:"error"},qr={key:1},jr={class:"row"},Yr={class:"col-md-6 order-md-1"},Hr={key:0},Wr=e("div",{class:"d-flex justify-content-between align-items-center mb-3"},[e("h4",null,"Your Registration is Confirmed")],-1),Kr=[Wr],Gr={key:1,class:"mb-5"},zr=e("div",{class:"d-flex justify-content-between align-items-center mb-3 text-danger"},[e("h4",null,"Your Registration is Incomplete")],-1),Jr={key:0},Qr=e("p",{class:"text-danger h5"},"Please make your cash payment at the event to complete your registration.",-1),Xr=e("p",null,'Your name will not show up on the "Who is signed up" list until payment is completed.',-1),Zr=[Qr,Xr],ea={key:1},ta=["href"],sa={class:"col"},ra={class:"row"},aa={class:"form-group pt-3"},ia={class:"form-group pt-3"},oa={key:2},na={key:0},la=["href"],ca={key:1},da=e("a",{href:"mailto:support@signup.bike"},"support@signup.bike",-1),ua=[da],ha={key:2},ma={class:"text-center"},_a={class:"mt-5"};function pa(s,t,l,f,i,o){const p=k("MainNav"),_=k("EventDetailsComponent"),n=k("FormKit");return r(),a(d,null,[y(p),i.loading?(r(),a("div",Vr,"Loading...")):(r(),a("div",Ur,[i.error?(r(),a("div",Ar,c(i.error),1)):m("",!0),o.loaded?(r(),a("div",qr,[y(_,{details:i.raceData.eventDetails,raceid:i.raceData.raceid},null,8,["details","raceid"]),y(n,{type:"form",id:"race-registration",disabled:"",actions:!1,modelValue:i.regData,"onUpdate:modelValue":t[0]||(t[0]=u=>i.regData=u)},{default:R(()=>[e("div",jr,[e("div",Yr,[o.pendingPayment?m("",!0):(r(),a("div",Hr,Kr)),o.pendingPayment?(r(),a("div",Gr,[zr,i.payment==="cash"?(r(),a("div",Jr,Zr)):(r(),a("div",ea,[e("a",{href:s.paymentUrl},"Complete your payment",8,ta)]))])):m("",!0),e("div",sa,[e("div",ra,[y(n,{type:"text",name:"first_name",label:"First name"}),y(n,{type:"text",name:"last_name",label:"Last name"})])]),e("div",aa,[y(n,{type:"email",name:"email",label:"Email"})]),e("div",ia,[y(n,{type:"text",name:"sponsor",label:"Your Team or Sponsor"}),y(n,{type:"select",label:"Race Category:",name:"category",options:o.sortedCats},null,8,["options"])]),o.sponsoredCategorySelected?(r(),a("div",oa,[e("h5",null," Your "+c(o.selectedCategory.catdispname)+" race entry is sponsored by "+c(o.selectedCategory.sponsorName),1)])):m("",!0)])])]),_:1},8,["modelValue"]),S(" Please send any corrections or questions to "),i.raceData.contactEmail?(r(),a("div",na,[e("a",{href:`mailto:${i.raceData.contactEmail}`},c(i.raceData.contactEmail),9,la)])):(r(),a("div",ca,ua))])):(r(),a("div",ha,[e("div",ma,[e("h2",_a," Unable to load requested information "+c(s.$route.params.raceid)+" payment: "+c(s.$route.params.payment_id),1)])]))]))],64)}const ya=$(Ir,[["render",pa]]);const ga={components:{SeriesResultRow:q,SeriesNavBar:B},data(){return{categories:{},loading:!1,error:null,displayName:"",series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(s){var t=document.querySelector(`#${s}`);t.scrollIntoView({behavior:"smooth"})},fetchData(){if(!this.$route.params.seriesid)return;this.error=null,this.loading=!0;let s=`/api/series/results/${this.$route.params.seriesid}`;C(s).then(({data:t})=>{this.loading=!1,this.categories=t.categories,this.displayName=t.displayName,this.series=this.$route.params.seriesid;let l=h.map(t.categories,f=>h.omit(f,["results","columns"]));console.log("temp:",h.orderBy(l,"disporder"))}).catch(t=>{console.error(t),this.categories={},this.error=t.toString()})}},computed:{sortedCats(){let s;return this.$route.path.indexOf("grom")>-1?s=h.filter(this.categories,t=>t.id.indexOf("grom")>-1):s=h.filter(this.categories,t=>t.id.indexOf("grom")==-1),h.orderBy(s,"disporder")},expertCats(){return h.filter(this.sortedCats,{laps:4})},sportCats(){return h.filter(this.sortedCats,{laps:3})},beginnerCats(){return h.filter(this.sortedCats,{laps:2})},gromCats(){return this.$route.path.indexOf("grom")>-1?h.filter(this.categories,s=>s.id.indexOf("grom")>-1):[]},haveResults(){return this.categories?Object.keys(this.categories).length>0:!1}}},fa={key:0,class:"loading"},va={key:1},ba={key:0,class:"error"},ka={class:"container-fluid text-center mt-5"},Da=e("h3",null,"Series Standings",-1),$a=e("p",null,[S("Glossary of terms below:"),e("br"),S(" 1/50 = 1st Place/50 Points -/- = Did not race")],-1),Ca={key:1},Ra={class:"container-fluid text-center mt-5"},Sa={class:"list-inline"},wa=["onClick"],Ta={class:"list-inline"},xa=["onClick"],Na={class:"list-inline"},Pa=["onClick"],Ea={class:"list-inline"},Ba=["onClick"],Ma={class:"container-fluid"},Fa=["id"],La={class:"table table-striped table-hover"},Oa={key:2},Ia=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No results yet...")],-1),Va=[Ia];function Ua(s,t,l,f,i,o){const p=k("SeriesNavBar"),_=k("SeriesResultRow");return r(),a(d,null,[y(p,{series:i.series},null,8,["series"]),i.loading?(r(),a("div",fa,"Loading...")):(r(),a("div",va,[i.error?(r(),a("div",ba,c(i.error),1)):m("",!0),e("div",ka,[e("h2",null,c(i.displayName),1),Da,$a]),o.haveResults?(r(),a("div",Ca,[e("div",Ra,[e("ul",Sa,[(r(!0),a(d,null,v(o.expertCats,n=>(r(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:u=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,wa)]))),128))]),e("ul",Ta,[(r(!0),a(d,null,v(o.sportCats,n=>(r(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:u=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,xa)]))),128))]),e("ul",Na,[(r(!0),a(d,null,v(o.beginnerCats,n=>(r(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:u=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,Pa)]))),128))]),e("ul",Ea,[(r(!0),a(d,null,v(o.gromCats,n=>(r(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:u=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,Ba)]))),128))])]),e("div",Ma,[(r(!0),a(d,null,v(o.sortedCats,n=>(r(),a("div",{key:n.id,class:"mt-5"},[e("h3",{id:n.id},c(n.catdispname),9,Fa),e("table",La,[e("thead",null,[e("tr",null,[(r(!0),a(d,null,v(n.columns,(u,g)=>(r(),a("th",{scope:"col",key:g},c(u),1))),128))])]),e("tbody",null,[(r(!0),a(d,null,v(n.results,(u,g)=>(r(),a("tr",{key:g},[y(_,{Pos:g,data:u},null,8,["Pos","data"])]))),128))])]),e("a",{role:"button",onClick:t[0]||(t[0]=u=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(r(),a("div",Oa,Va))]))],64)}const I=$(ga,[["render",Ua]]),Aa={props:["data","Pos","dates"],data(){return{count:0}},computed:{}};function qa(s,t,l,f,i,o){return r(),a(d,null,[e("td",null,c(l.data.Name),1),e("td",null,c(l.data.Cat),1),(r(!0),a(d,null,v(l.dates,(p,_)=>(r(),a("td",{key:_},c(l.data[p]||"-"),1))),128))],64)}const j=$(Aa,[["render",qa]]);const ja={components:{ResultRow:j,SeriesNavBar:B},data(){return{teamResults:{},loading:!1,error:null,series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(s){var t=document.querySelector(`#${s}`);t.scrollIntoView({behavior:"smooth"})},fetchData(){if(!this.$route.params.seriesid)return;this.error=null,this.loading=!0;let s=`/api/team-comp?series=${this.$route.params.seriesid}`;C(s).then(({data:t})=>{this.loading=!1,this.series=this.$route.params.seriesid,this.teamResults=t,this.teamDates=t.teamCompDates}).catch(t=>{console.error(t),this.teamResults={},this.error=t.toString()})}},computed:{dates:()=>{}}},Ya={key:0,class:"loading"},Ha={key:1},Wa={key:0,class:"error"},Ka=e("h2",{class:"mt-5"},"Team Standings",-1),Ga={class:"container-fluid mt-5"},za={class:"table table-striped table-hover"},Ja=e("thead",null,[e("tr",null,[e("th",null,"Position"),e("th",null,"Team"),e("th",null,"Total Score")])],-1),Qa=e("h2",{class:"mt-5"},"Team Results",-1),Xa={class:"container-fluid"},Za={class:"table table-striped table-hover"},ei=e("thead",null,[e("tr",null,[e("th",{style:{width:"25%"}},"Racer Name"),e("th",{style:{width:"25%"}},"Class"),e("th",{style:{width:"12.5%"}},"5/4"),e("th",{style:{width:"12.5%"}},"5/11"),e("th",{style:{width:"12.5%"}},"5/18"),e("th",{style:{width:"12.5%"}},"5/25")])],-1),ti={class:"table table-striped table-hover"},si=e("th",{style:{width:"50%","text-align":"right"}},"Score (Avg of individual results):",-1),ri={style:{width:"12.5%"}},ai={style:{width:"12.5%"}},ii={style:{width:"12.5%"}},oi={style:{width:"12.5%"}};function ni(s,t,l,f,i,o){const p=k("SeriesNavBar"),_=k("ResultRow");return r(),a(d,null,[y(p,{series:i.series},null,8,["series"]),i.loading?(r(),a("div",Ya,"Loading...")):(r(),a("div",Ha,[i.error?(r(),a("div",Wa,c(i.error),1)):m("",!0),Ka,e("div",Ga,[e("table",za,[Ja,e("tbody",null,[(r(!0),a(d,null,v(i.teamResults.result,(n,u)=>(r(),a("tr",{key:u},[e("td",null,c(u+1),1),e("td",null,c(n.teamName),1),e("td",null,c(n.totalScore),1)]))),128))])])]),Qa,(r(!0),a(d,null,v(i.teamResults.result,(n,u)=>(r(),a("div",{class:"mt-5",key:u},[e("h3",null,c(n.teamName),1),e("div",Xa,[e("table",Za,[ei,e("tbody",null,[(r(!0),a(d,null,v(i.teamResults.teamDets[n.teamName],(g,b)=>(r(),a("tr",{key:b},[y(_,{data:g,dates:s.teamDates},null,8,["data","dates"])]))),128))])]),e("table",ti,[e("thead",null,[e("tr",null,[si,e("th",ri,c(n.results["5/4"]?n.results["5/4"].avg:"-"),1),e("th",ai,c(n.results["5/11"]?n.results["5/11"].avg:"-"),1),e("th",ii,c(n.results["5/18"]?n.results["5/18"].avg:"-"),1),e("th",oi,c(n.results["5/25"]?n.results["5/25"].avg:"-"),1)])])])])]))),128))]))],64)}const li=$(ja,[["render",ni]]);const ci={components:{ResultRow:j,SeriesNavBar:M},data(){return{teamResults:{},teamDates:[],loading:!1,error:null,series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(s){var t=document.querySelector(`#${s}`);t.scrollIntoView({behavior:"smooth"})},fetchData(){if(!this.$route.params.seriesid)return;this.error=null,this.loading=!0;let s=`/api/team-comp?series=${this.$route.params.seriesid}`;C(s).then(({data:t})=>{this.loading=!1,this.series=this.$route.params.seriesid,this.teamResults=t,this.teamDates=t.teamCompDates}).catch(t=>{console.error(t),this.teamResults={},this.error=t.toString()})}},computed:{dates:()=>{},fivePlusTeams(){var s;return h.filter((s=this.teamResults)==null?void 0:s.result,t=>t.count>4)},threeFourTeams(){var s;return h.filter((s=this.teamResults)==null?void 0:s.result,t=>t.count<5)},sortedResults(){return h.sortBy(this.teamResults.result,"teamName")}}},di={key:0,class:"loading"},ui={key:1},hi={key:0,class:"error"},mi=e("h2",{class:"mt-5"}," 5+ Team Standings",-1),_i={class:"container-fluid mt-5"},pi={class:"table table-striped table-hover"},yi=e("thead",null,[e("tr",null,[e("th",null,"Position"),e("th",null,"Team"),e("th",null,"Total Score")])],-1),gi=e("h2",{class:"mt-5"}," 3 Person Team Standings",-1),fi={class:"container-fluid mt-5"},vi={class:"table table-striped table-hover"},bi=e("thead",null,[e("tr",null,[e("th",null,"Position"),e("th",null,"Team"),e("th",null,"Total Score")])],-1),ki=e("h2",{class:"mt-5"},"Team Results",-1),Di={class:"container-fluid"},$i={class:"table table-striped table-hover"},Ci=e("th",{style:{width:"25%"}},"Racer Name",-1),Ri=e("th",{style:{width:"25%"}},"Class",-1),Si=e("td",{colspan:"2",style:{"text-align":"right"}},"Score (Avg of individual results):",-1);function wi(s,t,l,f,i,o){const p=k("SeriesNavBar"),_=k("ResultRow");return r(),a(d,null,[y(p,{series:i.series},null,8,["series"]),i.loading?(r(),a("div",di,"Loading...")):(r(),a("div",ui,[i.error?(r(),a("div",hi,c(i.error),1)):m("",!0),mi,e("div",_i,[e("table",pi,[yi,e("tbody",null,[(r(!0),a(d,null,v(o.fivePlusTeams,(n,u)=>(r(),a("tr",{key:u},[e("td",null,c(u+1),1),e("td",null,c(n.teamName),1),e("td",null,c(n.totalScore),1)]))),128))])])]),gi,e("div",fi,[e("table",vi,[bi,e("tbody",null,[(r(!0),a(d,null,v(o.threeFourTeams,(n,u)=>(r(),a("tr",{key:u},[e("td",null,c(u+1),1),e("td",null,c(n.teamName),1),e("td",null,c(n.totalScore),1)]))),128))])])]),ki,(r(!0),a(d,null,v(o.sortedResults,(n,u)=>(r(),a("div",{class:"mt-5",key:u},[e("h3",null,c(n.teamName),1),e("div",Di,[e("table",$i,[e("thead",null,[e("tr",null,[Ci,Ri,(r(!0),a(d,null,v(i.teamDates,g=>(r(),a("th",null,c(g),1))),256))])]),e("tbody",null,[(r(!0),a(d,null,v(i.teamResults.teamDets[n.teamName],(g,b)=>(r(),a("tr",{key:b},[y(_,{data:g,dates:i.teamDates},null,8,["data","dates"])]))),128)),e("tr",null,[Si,(r(!0),a(d,null,v(i.teamDates,g=>(r(),a("td",null,c(n.results[g]?n.results[g].avg:"-"),1))),256))])])])])]))),128))]))],64)}const Ti=$(ci,[["render",wi]]);const xi={components:{EventDetailsComponent:x,MainNav:N},data(){return{categories:{},loading:!1,error:null,formattedStartDate:"",series:null,stageFilter:"all",racers:[],raceData:{}}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(s){var t=document.querySelector(`#${s}`);t.scrollIntoView({behavior:"smooth"})},fetchData(){this.error=null,this.loading=!0,this.$route.params.raceid&&C(`/api/races/roster/${this.$route.params.raceid}`).then(({data:s})=>{this.raceData=s,this.series=s.series,this.loading=!1,this.categories=s.regCategories,this.racers=s.registeredRacers}).catch(s=>{var t;if(this.loading=!1,((t=s.response)==null?void 0:t.status)===404){this.error="Race not found";return}console.error(s),this.categories={},this.error=s.toString()})},replacePlusSymbol(s){return s.replace("+","Plus")},payTypeToStage(s){const t=h.find(this.raceData.paymentOptions,{type:s});return t?t.name:""}},computed:{showPaytype(){var s;return!!((s=this.raceData)!=null&&s.showPaytypeOnRoster)},filterOptions(){let s={all:"All Stages"};return h.forEach(this.raceData.paymentOptions,t=>{s[t.type]=t.name}),s},filteredRacers(){return this.showPaytype&&this.stageFilter!=="all"?h.filter(this.racers,s=>s.paytype==this.stageFilter||s.paytype=="season"):this.racers},groupedRacers(){return h.groupBy(this.filteredRacers,"category")},sortedCats(){return h.filter(h.orderBy(this.categories,"disporder"),s=>h.includes(Object.keys(this.groupedRacers),s.id))},raceDate(){return D(this.raceData.eventDate).format("ddd, MMM D")}}},Ni={key:0,class:"loading"},Pi={key:1},Ei={key:0,class:"error"},Bi={key:1,id:"top"},Mi={key:0},Fi={class:"row"},Li={key:0,class:"col-md-6"},Oi={class:"container text-center mt-5"},Ii={class:"list-inline"},Vi=["onClick"],Ui={class:"container-fluid"},Ai=["id"],qi={class:"table table-striped table-hover"},ji=e("th",null," First Name ",-1),Yi=e("th",null," Last Name ",-1),Hi=e("th",null," Team/Sponsor ",-1),Wi={key:0},Ki={key:0},Gi={key:1},zi=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No registrations yet...")],-1),Ji=[zi];function Qi(s,t,l,f,i,o){const p=k("MainNav"),_=k("EventDetailsComponent"),n=k("FormKit");return r(),a(d,null,[y(p),i.loading?(r(),a("div",Ni,"Loading...")):(r(),a("div",Pi,[i.error?(r(),a("div",Ei,c(i.error),1)):(r(),a("div",Bi,[y(_,{details:i.raceData.eventDetails,raceid:i.raceData.raceid},null,8,["details","raceid"]),Object.keys(i.racers).length?(r(),a("div",Mi,[e("div",Fi,[e("div",{class:w({"col-md-6":o.showPaytype})},[e("h4",null,c(o.filteredRacers.length)+" Registered for "+c(i.raceData.displayName)+" on "+c(o.raceDate),1)],2),o.showPaytype?(r(),a("div",Li,[y(n,{type:"select",label:"Show registrations for:",name:"stageFilter",modelValue:i.stageFilter,"onUpdate:modelValue":t[0]||(t[0]=u=>i.stageFilter=u),default:"all",options:o.filterOptions},null,8,["modelValue","options"])])):m("",!0)]),e("div",Oi,[e("ul",Ii,[(r(!0),a(d,null,v(o.sortedCats,u=>(r(),a("li",{key:u.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:g=>o.scrollMeTo(o.replacePlusSymbol(u.id)),class:"link-primary"},c(u.catdispname),9,Vi)]))),128))])]),e("div",Ui,[(r(!0),a(d,null,v(o.sortedCats,u=>(r(),a("div",{key:u.id,class:"mt-5"},[e("h3",{id:o.replacePlusSymbol(u.id)},c(u.catdispname),9,Ai),e("table",qi,[e("thead",null,[e("tr",null,[ji,Yi,Hi,o.showPaytype?(r(),a("th",Wi," Stages ")):m("",!0)])]),e("tbody",null,[(r(!0),a(d,null,v(o.groupedRacers[u.id],(g,b)=>(r(),a("tr",{key:b},[e("td",null,c(g.first_name),1),e("td",null,c(g.last_name),1),e("td",null,c(g.sponsor),1),o.showPaytype?(r(),a("td",Ki,c(o.payTypeToStage(g.paytype)),1)):m("",!0)]))),128))])]),e("a",{role:"button",onClick:t[1]||(t[1]=g=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(r(),a("div",Gi,Ji))]))]))],64)}const Xi=$(xi,[["render",Qi]]),Zi=W({history:K("/"),routes:[{path:"/",name:"home",component:O},{path:"/results/",name:"results",component:O},{path:"/race/:raceid",component:Nt},{path:"/result/:id",name:"raceResult",component:is},{path:"/result/series/:seriesid",name:"seriesResults",component:Ts},{path:"/result/series/:seriesid/team",name:"teamCompResults",component:Ti},{path:"/register/:raceid",name:"register",component:Or},{path:"/regconfirmation/:raceid/:payment_id",component:ya},{path:"/roster/:raceid",name:"roster",component:Xi},{path:"/series/:seriesid",component:I},{path:"/series/grom/:seriesid",component:I},{path:"/teamcomp/:seriesid",component:li}]});G.init({clientToken:"pub5b9b0cfce30b3b609b588d9f3ac85ebb",site:"datadoghq.com",env:"production",service:"public-site",version:"1.0.1",forwardErrorsToLogs:!0,sampleRate:100});const F=z(te);F.use(J,Q);F.use(Zi);F.mount("#app");
//# sourceMappingURL=main-b621fbc2.js.map
