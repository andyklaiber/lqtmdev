import{R as N,_ as k,o as s,c as a,a as _,r as b,b as e,t as l,F as u,d as g,e as y,f as C,w as D,g as $,n as S,h,i as x,j as w,k as B,l as O,m as V,p as U,q as M}from"./theme.4cdf3cba.js";const L={components:{RouterView:N},data(){return{races:[]}},mounted:function(){window.location.hash=="#/"&&this.$router.push("/series/pcrs_2022")},computed:{}},j={class:"container"};function A(t,r,c,f,i,o){const p=b("RouterView");return s(),a("div",j,[_(p)])}const I=k(L,[["render",A]]);let q=t=>{const r=new Date(Date.UTC(0,0,0,0,0,0,t));let f=[r.getUTCMinutes(),r.getUTCSeconds()].map(i=>String(i).padStart(2,"0")).join(":");return r.getUTCHours()&&(f=r.getUTCHours()+":"+f),f};const Y={props:["data","Pos","totLaps"],data(){return{count:0}},computed:{incompleteLaps(){return new Array(this.totLaps-this.data.laps.length).fill("-")},formattedTime(){return q(this.data.duration)}}};function K(t,r,c,f,i,o){return s(),a(u,null,[e("td",null,l(c.Pos+1),1),e("td",null,l(c.data.Bib),1),e("td",null,l(c.data.Name),1),e("td",null,l(c.data.Sponsor),1),(s(!0),a(u,null,g(c.data.laps,(p,d)=>(s(),a("td",{key:d},l(p.timeString),1))),128)),c.totLaps-c.data.laps.length>0?(s(!0),a(u,{key:0},g(o.incompleteLaps,p=>(s(),a("td",null,l(p),1))),256)):y("",!0),e("td",null,l(o.formattedTime),1),e("td",null,l(c.data.back||"-"),1)],64)}const H=k(Y,[["render",K]]),G={props:["series"],data(){return{count:0,seriesData:{}}},created(){this.$watch(()=>this.series,function(){if(!this.series)return;let t=`/api/series/${this.series}/races`;C(t).then(({data:r})=>{this.seriesData=r})})},computed:{isPcrs(){return this.series&&this.series.indexOf("pcrs")>-1}}},W={id:"top",class:"navbar navbar-light bg-light"},z={class:"container-fluid"},X={class:"navbar-brand",href:"#"},J={key:0,class:"nav-item"},Q=["href"],Z=e("p",{class:"mt-3"},"View Weekly lap times:",-1),ee={class:"nav nav-tabs mt-1 justify-content-center"},te={key:0,class:"nav-item"},se=$("Series Standings"),re={key:1,class:"nav-item"},ae=$("Grom Series Standings"),oe={key:2,class:"nav-item"},ie=$("Team Competition");function ne(t,r,c,f,i,o){const p=b("RouterLink");return s(),a(u,null,[e("nav",W,[e("div",z,[e("div",X,l(i.seriesData.displayName),1),i.seriesData.homepage?(s(),a("div",J,[e("a",{class:"nav-link active","aria-current":"page",href:i.seriesData.homepage.url},l(i.seriesData.homepage.linkString),9,Q)])):y("",!0)])]),Z,e("ul",ee,[(s(!0),a(u,null,g(i.seriesData.races,d=>(s(),a("li",{key:d.raceid,class:"nav-item"},[_(p,{class:S(["nav-link",{active:t.$route.params.raceid===d.raceid}]),to:`/race/${d.raceid}`},{default:D(()=>[$(l(d.displayName+` - ${d.formattedStartDate}`),1)]),_:2},1032,["class","to"])]))),128)),o.isPcrs?(s(),a("li",te,[_(p,{class:S(["nav-link",{active:t.$route.path=="/series/pcrs_2022"}]),to:"/series/pcrs_2022"},{default:D(()=>[se]),_:1},8,["class"])])):y("",!0),o.isPcrs?(s(),a("li",re,[_(p,{class:S(["nav-link",{active:t.$route.path=="/series/grom/pcrs_2022"}]),to:"/series/grom/pcrs_2022"},{default:D(()=>[ae]),_:1},8,["class"])])):y("",!0),o.isPcrs?(s(),a("li",oe,[_(p,{class:S(["nav-link",{active:t.$route.path=="/teamcomp/pcrs_2022"}]),to:"/teamcomp/pcrs_2022"},{default:D(()=>[ie]),_:1},8,["class"])])):y("",!0)])],64)}const T=k(G,[["render",ne]]);const le={components:{ResultRow:H,SeriesNavBar:T},data(){return{categories:{},loading:!1,error:null,formattedStartDate:"",series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(t){var r=document.querySelector(`#${t}`);r.scrollIntoView({behavior:"smooth"})},fetchData(){if(this.error=null,this.loading=!0,this.$route.params.raceid){let t=`/api/races/results/${this.$route.params.raceid}`;C(t).then(({data:r})=>{this.formattedStartDate=r.raceMeta.formattedStartDate,this.series=r.series,this.loading=!1,this.categories=r.categories}).catch(r=>{console.error(r),this.categories={},this.error=r.toString()})}}},computed:{sortedCats(){return h.orderBy(this.categories,"disporder")},expertCats(){return h.filter(this.sortedCats,{laps:4})},sportCats(){return h.filter(this.sortedCats,{laps:3})},beginnerCats(){return h.filter(this.sortedCats,{laps:2})},gromCats(){return h.filter(this.categories,t=>t.id.indexOf("grom")>-1)},haveResults(){return this.categories?Object.keys(this.categories).length>0:!1}}},ce={key:0,class:"text-center"},de={class:"mt-5"},ue={key:1,class:"loading"},he={key:2},me={key:0,class:"error"},_e={key:1},pe={class:"container text-center mt-5"},ye={class:"list-inline"},ge=["onClick"],fe={class:"list-inline"},ve=["onClick"],be={class:"list-inline"},ke=["onClick"],Ce={class:"list-inline"},$e=["onClick"],De={class:"container-fluid"},Se=["id"],Re={class:"table table-striped table-hover"},we={key:2},xe=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No results yet...")],-1),Te=[xe];function Pe(t,r,c,f,i,o){const p=b("SeriesNavBar"),d=b("ResultRow");return s(),a(u,null,[_(p,{series:i.series},null,8,["series"]),i.formattedStartDate?(s(),a("div",ce,[e("h2",de,"Race Results - "+l(i.formattedStartDate),1)])):y("",!0),i.loading?(s(),a("div",ue,"Loading...")):(s(),a("div",he,[i.error?(s(),a("div",me,l(i.error),1)):y("",!0),o.haveResults?(s(),a("div",_e,[e("div",pe,[e("ul",ye,[(s(!0),a(u,null,g(o.expertCats,(n,m)=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:v=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,ge)]))),128))]),e("ul",fe,[(s(!0),a(u,null,g(o.sportCats,(n,m)=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:v=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,ve)]))),128))]),e("ul",be,[(s(!0),a(u,null,g(o.beginnerCats,(n,m)=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:v=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,ke)]))),128))]),e("ul",Ce,[(s(!0),a(u,null,g(o.gromCats,(n,m)=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:v=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,$e)]))),128))])]),e("div",De,[(s(!0),a(u,null,g(o.sortedCats,(n,m)=>(s(),a("div",{key:n.id,class:"mt-5"},[e("h3",{id:n.id},l(n.catdispname),9,Se),e("table",Re,[e("thead",null,[e("tr",null,[(s(!0),a(u,null,g(n.columns,(v,R)=>(s(),a("th",{scope:"col",key:R},l(v),1))),128))])]),e("tbody",null,[(s(!0),a(u,null,g(n.results,(v,R)=>(s(),a("tr",{key:R},[_(d,{totLaps:n.laps,Pos:R,data:v},null,8,["totLaps","Pos","data"])]))),128))])]),e("a",{role:"button",onClick:r[0]||(r[0]=v=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(s(),a("div",we,Te))]))],64)}const Ee=k(le,[["render",Pe]]),Fe={props:["url"],created(){(function(t,r,c){var f,i=t.getElementsByTagName(r)[0];t.getElementById(c)||(f=t.createElement(r),f.id=c,f.src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0",i.parentNode.insertBefore(f,i))})(document,"script","facebook-jssdk")},mounted(){FB.XFBML.parse()}},Ne={id:"1"},Be=e("div",{id:"fb-root"},null,-1),Oe=["data-href"];function Ve(t,r,c,f,i,o){return s(),a("div",Ne,[Be,e("div",{class:"fb-share-button","data-href":this.url,"data-layout":"button","data-size":"large"},null,8,Oe)])}const Ue=k(Fe,[["render",Ve]]),Me={components:{FbShareComponent:Ue},props:["details"],data(){return{}},computed:{isRosterPage(){return this.$route.path.includes("/roster/")}}},Le={class:"container mb-4"},je={class:"row p-4 pb-0 pe-lg-0 pt-lg-3 align-items-center rounded-3 border shadow"},Ae={class:"col-lg-3 offset-lg-1 p-0"},Ie=["src"],qe={class:"col-lg-7 p-3 p-lg-3 pt-lg-3"},Ye={class:"display-5 fw-bold lh-3"},Ke={class:"lead"},He={key:0,class:"d-grid gap-2 d-md-flex justify-content-md-between mb-4 mb-lg-3"},Ge=["href"],We={key:0},ze=$("See who is signed up");function Xe(t,r,c,f,i,o){const p=b("FbShareComponent"),d=b("RouterLink");return s(),a("div",Le,[e("div",je,[e("div",Ae,[e("img",{class:"pb-3",src:c.details.logoUrl,alt:"",width:"200"},null,8,Ie)]),e("div",qe,[e("h3",Ye,l(c.details.name),1),e("p",Ke,l(c.details.tagline),1),c.details.homepageUrl?(s(),a("div",He,[e("a",{href:c.details.homepageUrl},"Event Homepage",8,Ge),c.details.facebookShare?(s(),a("div",We,[_(p,{url:c.details.homepageUrl},null,8,["url"])])):y("",!0)])):y("",!0),o.isRosterPage?y("",!0):(s(),x(d,{key:1,to:`/roster/${t.$route.params.raceid}`},{default:D(()=>[ze]),_:1},8,["to"]))])])])}const P=k(Me,[["render",Xe]]),Je={props:["categories","raceDate"],data(){return{}},methods:{formatStartTime(t){return w(`${w(this.raceDate).format("YYYY-MM-DD")} ${t}`).format("h:mm A")}},computed:{groupByStartTimes(){return h.groupBy(h.orderBy(this.categories,["startTime","disporder"]),"startTime")},hasStartTimes(){return!!h.some(this.categories,"startTime")}}},Qe={key:0},Ze=e("h5",null,"Race Start Times:",-1),et={class:"row gap-5 mb-3"},tt={class:""},st={class:"row g-2 px-4 gx-4 border bg-light"};function rt(t,r,c,f,i,o){return c.categories.length&&o.hasStartTimes?(s(),a("div",Qe,[Ze,e("div",et,[(s(!0),a(u,null,g(o.groupByStartTimes,(p,d)=>(s(),a("div",{key:d,class:"col-md-5"},[e("h6",tt,l(o.formatStartTime(d))+":",1),e("div",st,[(s(!0),a(u,null,g(o.groupByStartTimes[d],n=>(s(),a("div",{key:n.id,class:"col-lg text-nowrap my-1"},l(n.catdispname),1))),128))])]))),128))])])):y("",!0)}const at=k(Je,[["render",rt]]);const ot={components:{EventDetailsComponent:P,EventCategoryScheduleComponent:at},data(){return{categories:{},loading:!1,error:null,formError:[],formInputData:{},raceData:{},payment:"",birthdate:"",submitted:!1,couponError:[]}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{dollas(t){return t.toLocaleString("en-US",{style:"currency",currency:"USD"})},fetchData(){this.error=null,this.loading=!0,this.$route.params.raceid&&C(`/api/races/${this.$route.params.raceid}`).then(t=>{this.raceData=t.data,this.loading=!1,this.payment=this.raceData.paymentOptions[0].type}).catch(t=>{this.loading=!1,this.error=t.toString(),console.error(t)})},getCouponPricing(t){C.post("/api/payments/pricing",{raceid:`${this.$route.params.raceid}`,couponCode:t}).then(({data:r})=>{this.raceData.paymentOptions=r.paymentOptions,r.validCoupon?this.couponError=[]:this.couponError=["Invalid Coupon Code"]})},onCouponChange(t){t?this.getCouponPricing(t):this.couponError=[]},submitForm(t){t.preventDefault(),this.$formkit.submit("race-registration")},async submit(t){console.log(t),t.birthdate=void 0,t.racerAge=this.racerAge,t.paytype=this.payment,await C.post(`/api/payments/start-registration?race=${this.raceData.raceid}`,t).then(r=>{if(r.data)return this.submitted=!0,console.log(r.data),new Promise(c=>setTimeout(()=>{window.location.href=r.data,c()},2e3))}).catch(r=>{this.formError=["Error submitting request"],console.log(r)})}},computed:{sortedCats(){if(!this.racerAge&&this.formInputData.category==null)return[];const t=h.filter(this.raceData.regCategories,c=>!(c.minAge&&this.racerAge<c.minAge||c.maxAge&&this.racerAge>c.maxAge));let r={};return h.forEach(h.orderBy(t,"disporder"),c=>{r[c.id]=c.catdispname}),r},loaded(){return!!this.raceData},paymentOptions(){let t={};return h.forEach(this.raceData.paymentOptions,r=>{t[r.type]=r.name}),t},paymentCostDets(){var i;if(this.sponsoredCategorySelected)return this.payment="season",{cost:this.dollas(0),regFee:this.dollas(0),tot:this.dollas(0)};const t=h.find((i=this.raceData)==null?void 0:i.paymentOptions,o=>o.type===this.payment);if(!t)return null;const r=parseFloat(t.amount);let c=0;r>0&&(c=(t.regFee+t.stripeFee)/100);const f={};return h.assign(f,t,{name:t.name,cost:this.dollas(r),regFee:this.dollas(c),tot:this.dollas(parseFloat(t.amount)+parseFloat(c))}),f},showPaymentOption(){return!(this.sponsoredCategorySelected||this.raceData.paymentOptions&&this.raceData.paymentOptions.length<2)},sponsoredCategorySelected(){var t;return!!((t=this.selectedCategory)!=null&&t.sponsored)},selectedCategory(){var t,r;return this.formInputData&&this.formInputData.category?h.find((t=this.raceData)==null?void 0:t.regCategories,{id:(r=this.formInputData)==null?void 0:r.category}):null},racerAge(){if(this.birthdate){const t=w(),r=w(this.birthdate);return t.year()-r.year()}}}},it={key:0,class:"loading"},nt={key:1},lt={key:0,class:"error"},ct={key:1},dt={class:"row"},ut={class:"col-md-6 order-md-1 mb-3"},ht=e("h4",{class:"d-flex justify-content-between align-items-center mb-3"},[e("h5",null,"Registration Info"),e("span",{class:"badge badge-secondary badge-pill"},"3")],-1),mt={class:"col"},_t={class:"form-group pt-3"},pt={class:"form-group pt-3"},yt={key:0,class:"col-md-5 order-md-2 mb-4"},gt=e("h4",{class:"d-flex justify-content-between align-items-center mb-3"},[e("h5",null,"Payment Detail"),e("span",{class:"badge badge-secondary badge-pill"},"3")],-1),ft={class:"list-group mb-3"},vt={class:"list-group mb-3"},bt={class:"list-group mb-3 formkit-fieldset"},kt={class:"list-group-item d-flex justify-content-between lh-condensed"},Ct=e("h6",{class:"my-0"},"Race Entry:",-1),$t={class:"text-muted"},Dt={key:0,class:"mx-3 text-decoration-line-through text-danger"},St={class:"list-group-item d-flex justify-content-between lh-condensed"},Rt=e("div",null,[e("h6",{class:"my-0"},"Online Processing Fee:"),e("small",{class:"text-muted"},"Credit Card and Online Registration")],-1),wt={class:"text-muted"},xt={class:"list-group-item d-flex justify-content-between"},Tt=e("span",null,"Total (USD)",-1),Pt={key:0},Et={key:0},Ft=e("h2",null,"Submission successful, redirecting to payment",-1),Nt=[Ft],Bt={key:2},Ot=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"Race not available for registration...")],-1),Vt=[Ot];function Ut(t,r,c,f,i,o){const p=b("EventDetailsComponent"),d=b("FormKit"),n=b("EventCategoryScheduleComponent");return i.loading?(s(),a("div",it,"Loading...")):(s(),a("div",nt,[i.error?(s(),a("div",lt,l(i.error),1)):y("",!0),o.loaded?(s(),a("div",ct,[_(p,{details:i.raceData.eventDetails},null,8,["details"]),_(d,{type:"form",id:"race-registration",modelValue:i.formInputData,"onUpdate:modelValue":r[2]||(r[2]=m=>i.formInputData=m),"form-class":i.submitted?"hide":"show",errors:i.formError,actions:!1,onSubmit:o.submit},{default:D(()=>[e("div",dt,[e("div",ut,[ht,e("div",mt,[_(d,{type:"text",name:"first_name",label:"First name",help:"What is your first name",validation:"required"}),_(d,{type:"text",name:"last_name",label:"Last name",help:"What is your last name",validation:"required"})]),e("div",_t,[_(d,{type:"email",name:"email",label:"Your email",help:"Enter an email address",validation:"required|email"})]),_(d,{type:"text",name:"sponsor",label:"Your Team or Sponsor",help:"Enter an optional Team or Sponsor name"}),_(d,{type:"date",value:"2001-01-01",name:"birthdate",label:"Birthday",modelValue:i.birthdate,"onUpdate:modelValue":r[0]||(r[0]=m=>i.birthdate=m),help:"Enter your birthday to see Race Categories",validation:"required|before:2020-01-01","validation-visibility":"live"},null,8,["modelValue"]),e("div",pt,[_(d,{type:"select",id:"category",label:"Race Category:",placeholder:"Select a category",name:"category",options:o.sortedCats,validation:"required","validation-visibility":"dirty","validation-messages":{is:"You must select a race category"}},null,8,["options"])])]),o.paymentCostDets?(s(),a("div",yt,[gt,e("fieldset",ft,[e("div",null,[i.raceData.couponsEnabled?(s(),x(d,{key:0,type:"text",name:"coupon",label:"Coupon Code",help:"",delay:1500,onInput:o.onCouponChange,errors:i.couponError},null,8,["onInput","errors"])):y("",!0)])]),e("fieldset",vt,[e("div",null,[o.showPaymentOption?(s(),x(d,{key:0,type:"radio",name:"paytype",label:"Payment option",options:o.paymentOptions,validation:"required",modelValue:i.payment,"onUpdate:modelValue":r[1]||(r[1]=m=>i.payment=m)},null,8,["options","modelValue"])):y("",!0)])]),e("ul",bt,[e("li",kt,[e("div",null,[Ct,e("small",$t,l(o.paymentCostDets.name),1)]),e("div",null,[o.paymentCostDets.discounted?(s(),a("span",Dt,l(o.dollas(o.paymentCostDets.orig)),1)):y("",!0),e("span",{class:S({"text-success":o.paymentCostDets.discounted})},l(o.paymentCostDets.cost),3)])]),e("li",St,[Rt,e("span",wt,l(o.paymentCostDets.regFee),1)]),e("li",xt,[Tt,e("strong",null,l(o.paymentCostDets.tot),1)])])])):y("",!0)]),o.sponsoredCategorySelected?(s(),a("div",Pt,[e("h5",null,"Your "+l(o.selectedCategory.catdispname)+" race entry is sponsored by "+l(o.selectedCategory.sponsorName),1),_(d,{type:"submit",label:"Sign Up!",onClick:o.submitForm},null,8,["onClick"])])):y("",!0),o.sponsoredCategorySelected?y("",!0):(s(),x(d,{key:1,type:"submit",label:"Go To Payment",onClick:o.submitForm},null,8,["onClick"]))]),_:1},8,["modelValue","form-class","errors","onSubmit"]),i.submitted?(s(),a("div",Et,Nt)):y("",!0),_(n,{categories:i.raceData.regCategories,raceDate:i.raceData.eventDate},null,8,["categories","raceDate"])])):(s(),a("div",Bt,Vt))]))}const Mt=k(ot,[["render",Ut]]);const Lt={components:{EventDetailsComponent:P},data(){return{categories:{},loading:!1,error:null,raceData:{},regData:{},payment:"",payStatus:!1}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{fetchData(){this.error=null,this.loading=!0,this.$route.params.raceid&&this.$route.params.payment_id&&C(`/api/races/${this.$route.params.raceid}`).then(t=>(this.raceData=t.data,C(`/api/payments/status?payment_id=${this.$route.params.payment_id}`).then(r=>{var c;this.loading=!1,this.payStatus=r.data.status,this.paymentUrl=(c=r.data.stripePayment)==null?void 0:c.url,this.regData=r.data.regData,this.payment=r.data.regData.paytype}))).catch(t=>{this.error="Failed to load race "+this.$route.params.raceid,console.error(t)})}},computed:{sortedCats(){let t={};return h.forEach(h.orderBy(this.raceData.regCategories,"disporder"),r=>{t[r.id]=r.catdispname}),t},loaded(){return!!this.raceData},paymentOptions(){let t={};return h.forEach(this.raceData.paymentOptions,r=>{t[r.type]=r.name}),t},pendingPayment(){return!!(this.payStatus&&this.payStatus!="paid")},sponsoredCategorySelected(){var t;return!!((t=this.selectedCategory)!=null&&t.sponsored)},selectedCategory(){return h.find(this.raceData.regCategories,{id:this.regData.category})}}},jt={key:0,class:"loading"},At={key:1},It={key:0,class:"error"},qt={key:1},Yt={class:"row"},Kt={class:"col-md-6 order-md-1"},Ht={key:0},Gt=e("div",{class:"d-flex justify-content-between align-items-center mb-3"},[e("h4",null,"Your Registration is Confirmed")],-1),Wt=[Gt],zt={key:1,class:"mb-5"},Xt=e("div",{class:"d-flex justify-content-between align-items-center mb-3"},[e("h4",null,"Your Payment is Incomplete")],-1),Jt=["href"],Qt={class:"col"},Zt={class:"row"},es={class:"form-group pt-3"},ts={class:"form-group pt-3"},ss={key:2},rs=$(" Please send any corrections or questions to "),as=e("a",{href:"mailto:support@signup.bike"},"support@signup.bike",-1),os={key:2},is={class:"text-center"},ns={class:"mt-5"};function ls(t,r,c,f,i,o){const p=b("EventDetailsComponent"),d=b("FormKit");return i.loading?(s(),a("div",jt,"Loading...")):(s(),a("div",At,[i.error?(s(),a("div",It,l(i.error),1)):y("",!0),o.loaded?(s(),a("div",qt,[_(p,{details:i.raceData.eventDetails},null,8,["details"]),_(d,{type:"form",id:"race-registration",disabled:"",actions:!1,modelValue:i.regData,"onUpdate:modelValue":r[0]||(r[0]=n=>i.regData=n)},{default:D(()=>[e("div",Yt,[e("div",Kt,[o.pendingPayment?y("",!0):(s(),a("div",Ht,Wt)),o.pendingPayment?(s(),a("div",zt,[Xt,e("a",{href:t.paymentUrl},"Complete your payment",8,Jt)])):y("",!0),e("div",Qt,[e("div",Zt,[_(d,{type:"text",name:"first_name",label:"First name"}),_(d,{type:"text",name:"last_name",label:"Last name"})])]),e("div",es,[_(d,{type:"email",name:"email",label:"Email"})]),e("div",ts,[_(d,{type:"text",name:"sponsor",label:"Your Team or Sponsor"}),_(d,{type:"select",label:"Race Category:",name:"category",options:o.sortedCats},null,8,["options"])]),o.sponsoredCategorySelected?(s(),a("div",ss,[e("h5",null," Your "+l(o.selectedCategory.catdispname)+" race entry is sponsored by "+l(o.selectedCategory.sponsorName),1)])):y("",!0)])])]),_:1},8,["modelValue"]),rs,as])):(s(),a("div",os,[e("div",is,[e("h2",ns," Unable to load requested information "+l(t.$route.params.raceid)+" payment: "+l(t.$route.params.payment_id),1)])]))]))}const cs=k(Lt,[["render",ls]]);const ds={props:["data","Pos"],data(){return{count:0}},computed:{}};function us(t,r,c,f,i,o){return s(),a(u,null,[e("td",null,l(c.Pos+1),1),e("td",null,l(c.data.Bib),1),e("td",null,l(c.data.Name),1),e("td",null,l(c.data.Age),1),e("td",null,l(c.data.Sponsor),1),(s(!0),a(u,null,g(c.data.results,(p,d)=>(s(),a("td",{class:S({"text-danger":p.dropped}),key:d},l(p.resultString),3))),128)),e("td",null,l(c.data.seriesPoints),1)],64)}const hs=k(ds,[["render",us]]);const ms={components:{SeriesResultRow:hs,SeriesNavBar:T},data(){return{categories:{},loading:!1,error:null,displayName:"",series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(t){var r=document.querySelector(`#${t}`);r.scrollIntoView({behavior:"smooth"})},fetchData(){if(!this.$route.params.seriesid)return;this.error=null,this.loading=!0;let t=`/api/series/results/${this.$route.params.seriesid}`;C(t).then(({data:r})=>{this.loading=!1,this.categories=r.categories,this.displayName=r.displayName,this.series=this.$route.params.seriesid}).catch(r=>{console.error(r),this.categories={},this.error=r.toString()})}},computed:{sortedCats(){let t;return this.$route.path.indexOf("grom")>-1?t=h.filter(this.categories,r=>r.id.indexOf("grom")>-1):t=h.filter(this.categories,r=>r.id.indexOf("grom")==-1),h.orderBy(t,"disporder")},expertCats(){return h.filter(this.sortedCats,{laps:4})},sportCats(){return h.filter(this.sortedCats,{laps:3})},beginnerCats(){return h.filter(this.sortedCats,{laps:2})},gromCats(){return this.$route.path.indexOf("grom")>-1?h.filter(this.categories,t=>t.id.indexOf("grom")>-1):[]},haveResults(){return this.categories?Object.keys(this.categories).length>0:!1}}},_s={key:0,class:"loading"},ps={key:1},ys={key:0,class:"error"},gs={class:"container-fluid text-center mt-5"},fs=e("h3",null,"Series Standings",-1),vs=e("p",null,[$("Glossary of terms below:"),e("br"),$(" 1/50 = 1st Place/50 Points -/- = Did not race")],-1),bs={key:1},ks={class:"container-fluid text-center mt-5"},Cs={class:"list-inline"},$s=["onClick"],Ds={class:"list-inline"},Ss=["onClick"],Rs={class:"list-inline"},ws=["onClick"],xs={class:"list-inline"},Ts=["onClick"],Ps={class:"container-fluid"},Es=["id"],Fs={class:"table table-striped table-hover"},Ns={key:2},Bs=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No results yet...")],-1),Os=[Bs];function Vs(t,r,c,f,i,o){const p=b("SeriesNavBar"),d=b("SeriesResultRow");return s(),a(u,null,[_(p,{series:i.series},null,8,["series"]),i.loading?(s(),a("div",_s,"Loading...")):(s(),a("div",ps,[i.error?(s(),a("div",ys,l(i.error),1)):y("",!0),e("div",gs,[e("h2",null,l(i.displayName),1),fs,vs]),o.haveResults?(s(),a("div",bs,[e("div",ks,[e("ul",Cs,[(s(!0),a(u,null,g(o.expertCats,n=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:m=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,$s)]))),128))]),e("ul",Ds,[(s(!0),a(u,null,g(o.sportCats,n=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:m=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,Ss)]))),128))]),e("ul",Rs,[(s(!0),a(u,null,g(o.beginnerCats,n=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:m=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,ws)]))),128))]),e("ul",xs,[(s(!0),a(u,null,g(o.gromCats,n=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:m=>o.scrollMeTo(n.id),class:"link-primary"},l(n.catdispname),9,Ts)]))),128))])]),e("div",Ps,[(s(!0),a(u,null,g(o.sortedCats,n=>(s(),a("div",{key:n.id,class:"mt-5"},[e("h3",{id:n.id},l(n.catdispname),9,Es),e("table",Fs,[e("thead",null,[e("tr",null,[(s(!0),a(u,null,g(n.columns,(m,v)=>(s(),a("th",{scope:"col",key:v},l(m),1))),128))])]),e("tbody",null,[(s(!0),a(u,null,g(n.results,(m,v)=>(s(),a("tr",{key:v},[_(d,{Pos:v,data:m},null,8,["Pos","data"])]))),128))])]),e("a",{role:"button",onClick:r[0]||(r[0]=m=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(s(),a("div",Ns,Os))]))],64)}const F=k(ms,[["render",Vs]]),Us={props:["data","Pos"],data(){return{count:0,dates:["5/4","5/11","5/18","5/25"]}},computed:{}};function Ms(t,r,c,f,i,o){return s(),a(u,null,[e("td",null,l(c.data.Name),1),e("td",null,l(c.data.Cat),1),(s(!0),a(u,null,g(i.dates,(p,d)=>(s(),a("td",{key:d},l(c.data[p]||"-"),1))),128))],64)}const Ls=k(Us,[["render",Ms]]);const js={components:{ResultRow:Ls,SeriesNavBar:T},data(){return{teamResults:{},loading:!1,error:null,series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(t){var r=document.querySelector(`#${t}`);r.scrollIntoView({behavior:"smooth"})},fetchData(){if(!this.$route.params.seriesid)return;this.error=null,this.loading=!0;let t=`/api/team-comp?series=${this.$route.params.seriesid}`;C(t).then(({data:r})=>{this.loading=!1,this.series=this.$route.params.seriesid,this.teamResults=r}).catch(r=>{console.error(r),this.teamResults={},this.error=r.toString()})}},computed:{dates:()=>{}}},As={key:0,class:"loading"},Is={key:1},qs={key:0,class:"error"},Ys=e("h2",{class:"mt-5"},"Team Standings",-1),Ks={class:"container-fluid mt-5"},Hs={class:"table table-striped table-hover"},Gs=e("thead",null,[e("tr",null,[e("th",null,"Position"),e("th",null,"Team"),e("th",null,"Total Score")])],-1),Ws=e("h2",{class:"mt-5"},"Team Results",-1),zs={class:"container-fluid"},Xs={class:"table table-striped table-hover"},Js=e("thead",null,[e("tr",null,[e("th",{style:{width:"25%"}},"Racer Name"),e("th",{style:{width:"25%"}},"Class"),e("th",{style:{width:"12.5%"}},"5/4"),e("th",{style:{width:"12.5%"}},"5/11"),e("th",{style:{width:"12.5%"}},"5/18"),e("th",{style:{width:"12.5%"}},"5/25")])],-1),Qs={class:"table table-striped table-hover"},Zs=e("th",{style:{width:"50%","text-align":"right"}},"Score (Avg of individual results):",-1),er={style:{width:"12.5%"}},tr={style:{width:"12.5%"}},sr={style:{width:"12.5%"}},rr={style:{width:"12.5%"}};function ar(t,r,c,f,i,o){const p=b("SeriesNavBar"),d=b("ResultRow");return s(),a(u,null,[_(p,{series:i.series},null,8,["series"]),i.loading?(s(),a("div",As,"Loading...")):(s(),a("div",Is,[i.error?(s(),a("div",qs,l(i.error),1)):y("",!0),Ys,e("div",Ks,[e("table",Hs,[Gs,e("tbody",null,[(s(!0),a(u,null,g(i.teamResults.result,(n,m)=>(s(),a("tr",{key:m},[e("td",null,l(m+1),1),e("td",null,l(n.teamName),1),e("td",null,l(n.totalScore),1)]))),128))])])]),Ws,(s(!0),a(u,null,g(i.teamResults.result,(n,m)=>(s(),a("div",{class:"mt-5",key:m},[e("h3",null,l(n.teamName),1),e("div",zs,[e("table",Xs,[Js,e("tbody",null,[(s(!0),a(u,null,g(i.teamResults.teamDets[n.teamName],(v,R)=>(s(),a("tr",{key:R},[_(d,{data:v},null,8,["data"])]))),128))])]),e("table",Qs,[e("thead",null,[e("tr",null,[Zs,e("th",er,l(n.results["5/4"]?n.results["5/4"].avg:"-"),1),e("th",tr,l(n.results["5/11"]?n.results["5/11"].avg:"-"),1),e("th",sr,l(n.results["5/18"]?n.results["5/18"].avg:"-"),1),e("th",rr,l(n.results["5/25"]?n.results["5/25"].avg:"-"),1)])])])])]))),128))]))],64)}const or=k(js,[["render",ar]]);const ir={components:{EventDetailsComponent:P},data(){return{categories:{},loading:!1,error:null,formattedStartDate:"",series:null,stageFilter:"all",racers:[],raceData:{}}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(t){var r=document.querySelector(`#${t}`);r.scrollIntoView({behavior:"smooth"})},fetchData(){this.error=null,this.loading=!0,this.$route.params.raceid&&C(`/api/races/roster/${this.$route.params.raceid}`).then(({data:t})=>{this.raceData=t,this.series=t.series,this.loading=!1,this.categories=t.regCategories,this.racers=t.registeredRacers}).catch(t=>{var r;if(this.loading=!1,((r=t.response)==null?void 0:r.status)===404){this.error="Race not found";return}console.error(t),this.categories={},this.error=t.toString()})},replacePlusSymbol(t){return t.replace("+","Plus")},payTypeToStage(t){const r=h.find(this.raceData.paymentOptions,{type:t});return r?r.name:""}},computed:{showPaytype(){var t;return!!((t=this.raceData)!=null&&t.showPaytypeOnRoster)},filterOptions(){let t={all:"All Stages"};return h.forEach(this.raceData.paymentOptions,r=>{t[r.type]=r.name}),t},filteredRacers(){return this.showPaytype&&this.stageFilter!=="all"?h.filter(this.racers,{paytype:this.stageFilter}):this.racers},groupedRacers(){return h.groupBy(this.filteredRacers,"category")},sortedCats(){return h.filter(h.orderBy(this.categories,"disporder"),t=>h.includes(Object.keys(this.groupedRacers),t.id))},raceDate(){return w(this.raceData.eventDate).format("ddd, MMM D")}}},nr={key:0,class:"loading"},lr={key:1},cr={key:0,class:"error"},dr={key:1,id:"top"},ur={key:0},hr={class:"row"},mr={key:0,class:"col-md-6"},_r={class:"container text-center mt-5"},pr={class:"list-inline"},yr=["onClick"],gr={class:"container-fluid"},fr=["id"],vr={class:"table table-striped table-hover"},br=e("th",null," First Name ",-1),kr=e("th",null," Last Name ",-1),Cr=e("th",null," Team/Sponsor ",-1),$r={key:0},Dr={key:0},Sr={key:1},Rr=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No registrations yet...")],-1),wr=[Rr];function xr(t,r,c,f,i,o){const p=b("EventDetailsComponent"),d=b("FormKit");return i.loading?(s(),a("div",nr,"Loading...")):(s(),a("div",lr,[i.error?(s(),a("div",cr,l(i.error),1)):(s(),a("div",dr,[_(p,{details:i.raceData.eventDetails},null,8,["details"]),Object.keys(i.racers).length?(s(),a("div",ur,[e("div",hr,[e("div",{class:S({"col-md-6":o.showPaytype})},[e("h4",null,l(i.raceData.count)+" Registered for "+l(i.raceData.displayName)+" on "+l(o.raceDate),1)],2),o.showPaytype?(s(),a("div",mr,[_(d,{type:"select",label:"Show registrations for:",name:"stageFilter",modelValue:i.stageFilter,"onUpdate:modelValue":r[0]||(r[0]=n=>i.stageFilter=n),default:"all",options:o.filterOptions},null,8,["modelValue","options"])])):y("",!0)]),e("div",_r,[e("ul",pr,[(s(!0),a(u,null,g(o.sortedCats,n=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:m=>o.scrollMeTo(o.replacePlusSymbol(n.id)),class:"link-primary"},l(n.catdispname),9,yr)]))),128))])]),e("div",gr,[(s(!0),a(u,null,g(o.sortedCats,n=>(s(),a("div",{key:n.id,class:"mt-5"},[e("h3",{id:o.replacePlusSymbol(n.id)},l(n.catdispname),9,fr),e("table",vr,[e("thead",null,[e("tr",null,[br,kr,Cr,o.showPaytype?(s(),a("th",$r," Stages ")):y("",!0)])]),e("tbody",null,[(s(!0),a(u,null,g(o.groupedRacers[n.id],(m,v)=>(s(),a("tr",{key:v},[e("td",null,l(m.first_name),1),e("td",null,l(m.last_name),1),e("td",null,l(m.sponsor),1),o.showPaytype?(s(),a("td",Dr,l(o.payTypeToStage(m.paytype)),1)):y("",!0)]))),128))])]),e("a",{role:"button",onClick:r[1]||(r[1]=m=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(s(),a("div",Sr,wr))]))]))}const Tr=k(ir,[["render",xr]]),Pr=B({history:O("/"),routes:[{path:"/race/:raceid",component:Ee},{path:"/register/:raceid",component:Mt},{path:"/regconfirmation/:raceid/:payment_id",component:cs},{path:"/roster/:raceid",component:Tr},{path:"/series/:seriesid",component:F},{path:"/series/grom/:seriesid",component:F},{path:"/teamcomp/:seriesid",component:or}]});const E=V(I);E.use(U,M);E.use(Pr);E.mount("#app");
