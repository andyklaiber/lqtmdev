import{_ as C,R as A,r as b,o as s,c as a,a as y,b as e,d as k,e as h,t as c,w as S,f as w,n as T,p as K,g as G,h as R,i as m,F as d,j as v,k as N,l as z,m as J,q as Q,s as X,u as Z,v as ee}from"./main-ba68b533.js";const te={components:{RouterView:A},data(){return{races:[]}},mounted:function(){},computed:{}},se={class:"container"};function re(r,t,l,f,i,o){const _=b("RouterView");return s(),a("div",se,[y(_)])}const ae=C(te,[["render",re]]),ie={props:["url"],created(){(function(r,t,l){var f,i=r.getElementsByTagName(t)[0];r.getElementById(l)||(f=r.createElement(t),f.id=l,f.src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v15.0",i.parentNode.insertBefore(f,i))})(document,"script","facebook-jssdk")},mounted(){window.FB&&FB.XFBML.parse()}},oe={id:"1"},ne=e("div",{id:"fb-root"},null,-1),le=["data-href"];function ce(r,t,l,f,i,o){return s(),a("div",oe,[ne,e("div",{class:"fb-share-button","data-href":this.url,"data-layout":"button","data-size":"large"},null,8,le)])}const de=C(ie,[["render",ce]]),ue={components:{FbShareComponent:de},props:["details","raceid","compactMode"],data(){return{}},computed:{isRosterPage(){return this.$route.path.includes("/roster/")},isRegPage(){return this.$route.name==="register"},regDisabled(){return k().isBefore(this.details.regOpenDate)},regEnded(){return k().isAfter(this.details.regCloseDate)},regTimeToOpen(){return k().to(this.details.regOpenDate)},regTimeToClose(){return k().to(this.details.regCloseDate)},imgWidth(){return this.compactMode?150:225}}},he={class:"container mb-4"},me=["src"],_e={class:"row p-1 px-3 pb-0 pe-lg-0 pt-lg-3 align-items-center rounded-3 border shadow"},pe={key:0,class:"col-md-3 px-3"},ye={class:"d-flex justify-content-center"},ge=["href"],fe=["src","width"],ve={class:"col-md-7 p-3 p-lg-3 pt-lg-3"},be={class:"row"},ke={class:"col col-md-auto"},De={class:"display-7 fw-bold lh-3"},$e={key:0,class:"lead mb-0 fw-bold"},Ce={class:"display-9"},Re={key:0,class:"d-grid gap-2 d-md-flex justify-content-md mb-4 mb-lg-3"},Se={class:"col-md-auto"},we=["href"],Te={class:"col col-lg-2"},xe={key:0},Ne={key:1,class:"fw-bold"},Pe={key:2,class:"row"},Ee={key:0,class:"fw-bold"},Me={key:0,class:"fw-bold"},Be={key:1,class:"fw-bold"},Fe={key:1,class:"col col-md-auto"},Le={key:2,class:"col"};function Oe(r,t,l,f,i,o){var n;const _=b("FbShareComponent"),p=b("RouterLink");return s(),a("div",he,[o.isRegPage?(s(),a("img",{key:0,class:"img-fluid",src:l.details.headerPhoto,alt:""},null,8,me)):h("",!0),e("div",_e,[l.details.logoUrl?(s(),a("div",pe,[e("div",ye,[e("a",{href:l.details.homepageUrl},[e("img",{class:"pb-1",src:l.details.logoUrl,alt:"",width:o.imgWidth},null,8,fe)],8,ge)])])):h("",!0),e("div",ve,[e("div",be,[e("div",ke,[e("h3",De,c(l.details.name),1),l.compactMode?h("",!0):(s(),a("p",$e,c(l.details.tagline),1))])]),e("p",Ce,c(l.details.formattedDates),1),l.details.homepageUrl&&!l.compactMode?(s(),a("div",Re,[e("div",Se,[e("a",{class:"btn btn-sm btn-success",href:l.details.homepageUrl},"Event Homepage",8,we)]),e("div",Te,[l.details.facebookShare?(s(),a("div",xe,[y(_,{url:l.details.homepageUrl},null,8,["url"])])):h("",!0)])])):h("",!0),o.regDisabled?(s(),a("div",Ne," Registration will open "+c(o.regTimeToOpen),1)):(s(),a("div",Pe,[(n=l.details)!=null&&n.regCloseDate?(s(),a("div",Ee,[o.regEnded?(s(),a("div",Me," Registration is closed ")):(s(),a("div",Be," Registration will close "+c(o.regTimeToClose),1))])):h("",!0),!o.isRegPage&&!o.regEnded?(s(),a("div",Fe,[y(p,{class:"btn btn-success",to:{name:"register",params:{raceid:l.raceid}}},{default:S(()=>[w("Register")]),_:1},8,["to"])])):h("",!0),o.isRosterPage?h("",!0):(s(),a("div",Le,[y(p,{class:"btn btn-secondary",to:{name:"roster",params:{raceid:l.raceid}}},{default:S(()=>[w("See who is signed up ")]),_:1},8,["to"])]))]))])])])}const E=C(ue,[["render",Oe]]);const Ie={props:["races"],data(){return{count:0,loggedIn:!1}},computed:{}},j=r=>(K("data-v-2f3c77b1"),r=r(),G(),r),Ve={class:"navbar navbar-expand-md navbar-dark bg-dark fixed-top"},Ue={class:"container-fluid"},Ae=j(()=>e("a",{class:"navbar-brand",href:"/"},"Signup.bike",-1)),je=j(()=>e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarsExample04","aria-controls":"navbarsExample04","aria-expanded":"false","aria-label":"Toggle navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),qe={class:"collapse navbar-collapse",id:"navbarsExample04"},Ye={class:"navbar-nav me-auto mb-4 mb-md-0 px-5"},He={class:"nav-item"};function We(r,t,l,f,i,o){const _=b("RouterLink");return s(),a("nav",Ve,[e("div",Ue,[Ae,je,e("div",qe,[e("ul",Ye,[e("li",He,[y(_,{class:T(["nav-link",{active:r.$route.name=="home"}]),to:{name:"home"}},{default:S(()=>[w(" Upcoming Races ")]),_:1},8,["class"])])]),i.loggedIn?(s(),a("button",{key:0,type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=p=>r.$emit("logout"))},"Logout")):h("",!0)])])])}const M=C(Ie,[["render",We],["__scopeId","data-v-2f3c77b1"]]);const Ke={emits:["logout"],components:{MainNav:M,RouterView:A,EventDetailsComponent:E},data(){return{count:0,races:[],loading:!0}},created(){this.$watch(()=>this.$route.query,()=>{this.fetchData()},{immediate:!0})},methods:{fetchData(){if(this.error=null,this.loading=!0,console.log("fetch plz"),this.$route)return R("/api/races/").then(r=>{this.races=r.data,this.loading=!1,console.log("fetched"),console.log(this.races)}).catch(r=>{this.loading=!1,this.error=r.toString(),console.error(r)})}},computed:{displayRaces(){let r={},t=m.filter(this.races,l=>{if(l.series&&r[l.series]&&!l.disableSeriesRedirect)return!1;let f=k().isBefore(k(l.eventDate));return console.log("isInFuture"+f+" "+l.displayName),l.isTestData&&!this.$route.query.test||!f&&!this.$route.query.past?!1:(typeof l.series=="string"&&l.series.length>1&&(console.log("set as shown "+l.raceid),r[l.series]=!0),!0)});return m.sortBy(t,[function(l){return k(l.eventDate)}])},loggedIn(){return!1}}},Ge={key:0},ze={key:1};function Je(r,t,l,f,i,o){const _=b("MainNav"),p=b("EventDetailsComponent");return s(),a(d,null,[y(_),i.loading?(s(),a("div",Ge," Plz wait, loading... ")):(s(),a("div",ze,[(s(!0),a(d,null,v(o.displayRaces,(n,u)=>(s(),a("div",{key:u},[y(p,{details:n.eventDetails,raceid:n.raceid,"compact-mode":"true"},null,8,["details","raceid"])]))),128))]))],64)}const I=C(Ke,[["render",Je],["__scopeId","data-v-4d87531b"]]);let B=(r,t=!1)=>{const l=new Date(Date.UTC(0,0,0,0,0,0,r));let i=[l.getUTCMinutes(),l.getUTCSeconds()].map(o=>String(o).padStart(2,"0")).join(":");return t&&(i=i.concat("."+`${l.getUTCMilliseconds()}`.padStart(3,"0"))),l.getUTCHours()&&(i=l.getUTCHours()+":"+i),i};const Qe={props:["data","Pos","totLaps","showMillis"],data(){return{count:0}},methods:{msToTimeString(r){return B(r,this.showMillis)}},computed:{incompleteLaps(){return new Array(this.totLaps-this.data.laps.length).fill("-")},formattedTime(){return B(this.data.duration,this.showMillis)},trailingTime(){return this.data.back?this.showMillis?B(this.data.backMs,!0):this.data.back:"-"}}};function Xe(r,t,l,f,i,o){return s(),a(d,null,[e("td",null,c(l.Pos+1),1),e("td",null,c(l.data.Bib),1),e("td",null,c(l.data.Name),1),e("td",null,c(l.data.Sponsor),1),(s(!0),a(d,null,v(l.data.laps,(_,p)=>(s(),a("td",{key:p},c(o.msToTimeString(_.duration)),1))),128)),l.totLaps-l.data.laps.length>0?(s(!0),a(d,{key:0},v(o.incompleteLaps,_=>(s(),a("td",null,c(_),1))),256)):h("",!0),e("td",null,c(o.formattedTime),1),e("td",null,c(o.trailingTime),1)],64)}const q=C(Qe,[["render",Xe]]),Ze={props:["series"],data(){return{count:0,seriesData:{}}},created(){this.$watch(()=>this.series,function(){if(!this.series)return;let r=`/api/series/${this.series}/races`;R(r).then(({data:t})=>{this.seriesData=t})})},computed:{isPcrs(){return this.series&&this.series.indexOf("pcrs")>-1}}},et={id:"top",class:"navbar navbar-light bg-light"},tt={class:"container-fluid"},st={class:"navbar-brand",href:"#"},rt={key:0,class:"nav-item"},at=["href"],it=e("p",{class:"mt-3"},"View Weekly lap times:",-1),ot={class:"nav nav-tabs mt-1 justify-content-center"},nt={key:0,class:"nav-item"},lt={key:1,class:"nav-item"},ct={key:2,class:"nav-item"};function dt(r,t,l,f,i,o){const _=b("RouterLink");return s(),a(d,null,[e("nav",et,[e("div",tt,[e("div",st,c(i.seriesData.displayName),1),i.seriesData.homepage?(s(),a("div",rt,[e("a",{class:"nav-link active","aria-current":"page",href:i.seriesData.homepage.url},c(i.seriesData.homepage.linkString),9,at)])):h("",!0)])]),it,e("ul",ot,[(s(!0),a(d,null,v(i.seriesData.races,p=>(s(),a("li",{key:p.raceid,class:"nav-item"},[y(_,{class:T(["nav-link",{active:r.$route.params.raceid===p.raceid}]),to:`/race/${p.raceid}`},{default:S(()=>[w(c(p.displayName+` - ${p.formattedStartDate}`),1)]),_:2},1032,["class","to"])]))),128)),o.isPcrs?(s(),a("li",nt,[y(_,{class:T(["nav-link",{active:r.$route.path=="/series/pcrs_2022"}]),to:"/series/pcrs_2022"},{default:S(()=>[w("Series Standings")]),_:1},8,["class"])])):h("",!0),o.isPcrs?(s(),a("li",lt,[y(_,{class:T(["nav-link",{active:r.$route.path=="/series/grom/pcrs_2022"}]),to:"/series/grom/pcrs_2022"},{default:S(()=>[w("Grom Series Standings")]),_:1},8,["class"])])):h("",!0),o.isPcrs?(s(),a("li",ct,[y(_,{class:T(["nav-link",{active:r.$route.path=="/teamcomp/pcrs_2022"}]),to:"/teamcomp/pcrs_2022"},{default:S(()=>[w("Team Competition")]),_:1},8,["class"])])):h("",!0)])],64)}const F=C(Ze,[["render",dt]]);const ut={components:{ResultRow:q,SeriesNavBar:F},data(){return{categories:{},loading:!1,error:null,formattedStartDate:"",series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(r){var t=document.querySelector(`#${r}`);t.scrollIntoView({behavior:"smooth"})},fetchData(){if(this.error=null,this.loading=!0,this.$route.params.raceid){let r=`/api/races/results/${this.$route.params.raceid}`;R(r).then(({data:t})=>{this.formattedStartDate=t.raceMeta.formattedStartDate,this.series=t.series,this.loading=!1,this.categories=t.categories}).catch(t=>{console.error(t),this.categories={},this.error=t.toString()})}}},computed:{sortedCats(){return m.orderBy(this.categories,"disporder")},expertCats(){return m.filter(this.sortedCats,{laps:4})},sportCats(){return m.filter(this.sortedCats,{laps:3})},beginnerCats(){return m.filter(this.sortedCats,{laps:2})},gromCats(){return m.filter(this.categories,r=>r.id.indexOf("grom")>-1)},haveResults(){return this.categories?Object.keys(this.categories).length>0:!1}}},ht={key:0,class:"text-center"},mt={class:"mt-5"},_t={key:1,class:"loading"},pt={key:2},yt={key:0,class:"error"},gt={key:1},ft={class:"container text-center mt-5"},vt={class:"list-inline"},bt=["onClick"],kt={class:"list-inline"},Dt=["onClick"],$t={class:"list-inline"},Ct=["onClick"],Rt={class:"list-inline"},St=["onClick"],wt={class:"container-fluid"},Tt=["id"],xt={class:"table table-striped table-hover"},Nt={key:2},Pt=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No results yet...")],-1),Et=[Pt];function Mt(r,t,l,f,i,o){const _=b("SeriesNavBar"),p=b("ResultRow");return s(),a(d,null,[y(_,{series:i.series},null,8,["series"]),i.formattedStartDate?(s(),a("div",ht,[e("h2",mt,"Race Results - "+c(i.formattedStartDate),1)])):h("",!0),i.loading?(s(),a("div",_t,"Loading...")):(s(),a("div",pt,[i.error?(s(),a("div",yt,c(i.error),1)):h("",!0),o.haveResults?(s(),a("div",gt,[e("div",ft,[e("ul",vt,[(s(!0),a(d,null,v(o.expertCats,(n,u)=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:g=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,bt)]))),128))]),e("ul",kt,[(s(!0),a(d,null,v(o.sportCats,(n,u)=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:g=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,Dt)]))),128))]),e("ul",$t,[(s(!0),a(d,null,v(o.beginnerCats,(n,u)=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:g=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,Ct)]))),128))]),e("ul",Rt,[(s(!0),a(d,null,v(o.gromCats,(n,u)=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:g=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,St)]))),128))])]),e("div",wt,[(s(!0),a(d,null,v(o.sortedCats,(n,u)=>(s(),a("div",{key:n.id,class:"mt-5"},[e("h3",{id:n.id},c(n.catdispname),9,Tt),e("table",xt,[e("thead",null,[e("tr",null,[(s(!0),a(d,null,v(n.columns,(g,D)=>(s(),a("th",{scope:"col",key:D},c(g),1))),128))])]),e("tbody",null,[(s(!0),a(d,null,v(n.results,(g,D)=>(s(),a("tr",{key:D},[y(p,{totLaps:n.laps,Pos:D,data:g},null,8,["totLaps","Pos","data"])]))),128))])]),e("a",{role:"button",onClick:t[0]||(t[0]=g=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(s(),a("div",Nt,Et))]))],64)}const Bt=C(ut,[["render",Mt]]),Ft={props:["series","displayName"],data(){return{count:0,seriesData:{},races:[]}},created(){this.$watch(()=>this.series,function(){if(!this.series)return;let r=`/api/results/?series=${this.series}`;R(r).then(({data:t})=>(this.races=t,R(`api/results/series/?series=${this.series}`))).then(({data:t})=>{this.seriesData=t})})},computed:{isPcrs(){return this.series&&this.series.indexOf("pcrs")>-1},hasTeamComp(){var r,t;return((t=(r=this.seriesData)==null?void 0:r.teamCompDates)==null?void 0:t.length)>1},headerName(){var r;return this.displayName||((r=this.seriesData)==null?void 0:r.eventName)},isSeriesResultPage(){return this.$route.name=="seriesResults"}}},Lt={key:0,id:"top",class:"navbar navbar-light bg-light"},Ot={class:"container-fluid"},It={class:"navbar-brand h2",href:"#"},Vt={key:1},Ut=e("p",{class:"mt-3"},"View Individual Event Times:",-1),At={class:"nav nav-tabs mt-1 justify-content-center"},jt={key:0},qt={key:1};function Yt(r,t,l,f,i,o){const _=b("RouterLink");return s(),a(d,null,[o.headerName?(s(),a("nav",Lt,[e("div",Ot,[e("div",It,c(o.headerName),1)])])):h("",!0),i.races.length>1?(s(),a("div",Vt,[Ut,e("ul",At,[(s(!0),a(d,null,v(i.races,p=>(s(),a("li",{key:p.raceid,class:"nav-item"},[y(_,{class:T(["nav-link",{active:r.$route.params.id===p.raceid&&r.$route.name=="raceResult"}]),to:`/result/${p.raceid}`},{default:S(()=>[w(c(p.eventName+` - ${p.formattedStartDate}`),1)]),_:2},1032,["class","to"])]))),128)),o.isSeriesResultPage?h("",!0):(s(),a("li",jt,[y(_,{class:T(["nav-link",{active:r.$route.name=="seriesResults"}]),to:{name:"seriesResults",params:{seriesid:l.series}}},{default:S(()=>[w("Overall Standings")]),_:1},8,["class","to"])])),o.hasTeamComp?(s(),a("li",qt,[y(_,{class:T(["nav-link",{active:r.$route.name=="teamCompResults"}]),to:{name:"teamCompResults",params:{seriesid:l.series}}},{default:S(()=>[w("Team Competition Standings")]),_:1},8,["class","to"])])):h("",!0)])])):h("",!0)],64)}const L=C(Ft,[["render",Yt]]);const Ht={components:{ResultRow:q,SeriesNavBar:L},data(){return{resultData:{},categories:{},loading:!1,error:null,formattedStartDate:"",series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(r){var t=document.querySelector(`#${r}`);t.scrollIntoView({behavior:"smooth"})},fetchData(){if(this.error=null,this.loading=!0,this.$route.params.id){let r=`/api/results/${this.$route.params.id}`;R(r).then(({data:t})=>{this.formattedStartDate=t.formattedStartDate,this.series=t.series,this.resultData=t,this.loading=!1,this.categories=t.categories}).catch(t=>{console.error(t),this.categories={},t.response.status==404?this.error="":this.error=t.toString(),this.loading=!1})}else this.$router.push("")},metaColumns(r){return r.slice(0,4)},lapColumns(r){let t=[];for(let l=1;l<=r.length;l++)t.push(`Lap ${l}`);return this.fastestLapScoring?t.push("Fastest Lap:"):t.push("Total"),t.push("Time Behind Leader"),t}},computed:{fastestLapScoring(){return this.resultData.scoringType=="fastestlap"},sortedCats(){return m.orderBy(this.categories,"disporder")},haveResults(){return this.categories?Object.keys(this.categories).length>0:!1}}},Wt={key:0,class:"text-center"},Kt={class:"mt-5"},Gt={key:1,class:"text-center"},zt={class:"mt-5"},Jt={key:2,class:"loading"},Qt={key:3},Xt={key:0,class:"error"},Zt={key:1},es={id:"top",class:"container text-center mt-5"},ts={class:"list-inline"},ss=["onClick"],rs={class:"container-fluid"},as=["id"],is={class:"table table-striped table-hover"},os={key:2},ns=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No results yet...")],-1),ls=[ns];function cs(r,t,l,f,i,o){const _=b("SeriesNavBar"),p=b("ResultRow");return s(),a(d,null,[y(_,{series:i.series},null,8,["series"]),i.resultData.eventName?(s(),a("div",Wt,[e("h2",Kt,"Race Results - "+c(i.resultData.eventName),1)])):h("",!0),i.formattedStartDate?(s(),a("div",Gt,[e("h2",zt,c(i.formattedStartDate),1)])):h("",!0),i.loading?(s(),a("div",Jt,"Loading...")):(s(),a("div",Qt,[i.error?(s(),a("div",Xt,c(i.error),1)):h("",!0),o.haveResults?(s(),a("div",Zt,[e("div",es,[e("ul",ts,[(s(!0),a(d,null,v(o.sortedCats,(n,u)=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:g=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,ss)]))),128))])]),e("div",rs,[(s(!0),a(d,null,v(o.sortedCats,(n,u)=>(s(),a("div",{key:n.id,class:"mt-5"},[e("h3",{id:n.id},c(n.catdispname),9,as),e("table",is,[e("thead",null,[e("tr",null,[(s(!0),a(d,null,v(o.metaColumns(n.columns),(g,D)=>(s(),a("th",{scope:"col",key:D},c(g),1))),128)),(s(!0),a(d,null,v(o.lapColumns(n.results[0].laps),(g,D)=>(s(),a("th",{scope:"col",key:D},c(g),1))),128))])]),e("tbody",null,[(s(!0),a(d,null,v(n.results,(g,D)=>(s(),a("tr",{key:D},[y(p,{totLaps:n.results[0].laps.length,Pos:D,data:g,showMillis:i.resultData.showMillis||o.fastestLapScoring},null,8,["totLaps","Pos","data","showMillis"])]))),128))])]),e("a",{role:"button",onClick:t[0]||(t[0]=g=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(s(),a("div",os,ls))]))],64)}const ds=C(Ht,[["render",cs]]);const us={props:["data","Pos"],data(){return{count:0}},computed:{}};function hs(r,t,l,f,i,o){return s(),a(d,null,[e("td",null,c(l.Pos+1),1),e("td",null,c(l.data.Bib),1),e("td",null,c(l.data.Name),1),e("td",null,c(l.data.Age),1),e("td",null,c(l.data.Sponsor),1),(s(!0),a(d,null,v(l.data.results,(_,p)=>(s(),a("td",{class:T({"text-danger":_.dropped}),key:p},c(_.resultString),3))),128)),e("td",null,c(l.data.seriesPoints),1)],64)}const Y=C(us,[["render",hs]]);const ms={components:{SeriesResultRow:Y,SeriesNavBar:L},data(){return{categories:{},loading:!1,error:null,displayName:"",series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(r){var t=document.querySelector(`#${r}`);t.scrollIntoView({behavior:"smooth"})},fetchData(){if(!this.$route.params.seriesid)return;this.error=null,this.loading=!0;let r=`/api/series/results/${this.$route.params.seriesid}`;R(r).then(({data:t})=>{this.loading=!1,this.categories=t.categories,this.displayName=t.eventName,this.series=this.$route.params.seriesid,m.map(t.categories,l=>m.omit(l,["results","columns"]))}).catch(t=>{console.error(t),this.categories={},this.error=t.toString()})}},computed:{sortedCats(){return m.orderBy(this.categories,"disporder")},haveResults(){return this.categories?Object.keys(this.categories).length>0:!1},isPCRS(){return m.isString(this.series)&&this.series.indexOf("pcrs")>-1}}},_s={key:0,class:"loading"},ps={key:1},ys={key:0,class:"error"},gs={class:"container-fluid text-center mt-5"},fs=e("h3",null,"Series Standings",-1),vs=e("p",null,"Glossary of terms below:",-1),bs={key:0},ks={key:1},Ds={key:1},$s={class:"container-fluid text-center mt-5"},Cs={class:"list-inline"},Rs=["onClick"],Ss={class:"container-fluid"},ws=["id"],Ts={class:"table table-striped table-hover"},xs={key:2},Ns=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No results yet...")],-1),Ps=[Ns];function Es(r,t,l,f,i,o){const _=b("SeriesNavBar"),p=b("SeriesResultRow");return s(),a(d,null,[y(_,{series:i.series,displayName:i.displayName},null,8,["series","displayName"]),i.loading?(s(),a("div",_s,"Loading...")):(s(),a("div",ps,[i.error?(s(),a("div",ys,c(i.error),1)):h("",!0),e("div",gs,[fs,vs,o.isPCRS?(s(),a("p",bs,"1/50 = 1st Place/50 Points   -/- = Did not race")):(s(),a("p",ks,"1/100 = 1st Place/100 Points   -/- = Did not race"))]),o.haveResults?(s(),a("div",Ds,[e("div",$s,[e("ul",Cs,[(s(!0),a(d,null,v(o.sortedCats,n=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:u=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,Rs)]))),128))])]),e("div",Ss,[(s(!0),a(d,null,v(o.sortedCats,n=>(s(),a("div",{key:n.id,class:"mt-5"},[e("h3",{id:n.id},c(n.catdispname),9,ws),e("table",Ts,[e("thead",null,[e("tr",null,[(s(!0),a(d,null,v(n.columns,(u,g)=>(s(),a("th",{scope:"col",key:g},c(u),1))),128))])]),e("tbody",null,[(s(!0),a(d,null,v(n.results,(u,g)=>(s(),a("tr",{key:g},[y(p,{Pos:g,data:u},null,8,["Pos","data"])]))),128))])]),e("a",{role:"button",onClick:t[0]||(t[0]=u=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(s(),a("div",xs,Ps))]))],64)}const Ms=C(ms,[["render",Es]]),Bs={props:["categories","raceDate"],data(){return{}},methods:{formatStartTime(r){return k(`${k(this.raceDate).format("YYYY-MM-DD")} ${r}`).format("h:mm A")}},computed:{groupByStartTimes(){let r=this.categories.toSorted((t,l)=>k(t.startTime,"H:mm").diff(k(l.startTime,"H:mm")));return m.groupBy(r,"startTime")},hasStartTimes(){return!!m.some(this.categories,"startTime")}}},Fs={key:0},Ls=e("h5",null,"Race Start Times:",-1),Os={class:"row gap-5 mb-3"},Is={class:""},Vs={class:"row g-2 px-4 gx-4 border bg-light"};function Us(r,t,l,f,i,o){return l.categories.length&&o.hasStartTimes?(s(),a("div",Fs,[Ls,e("div",Os,[(s(!0),a(d,null,v(o.groupByStartTimes,(_,p)=>(s(),a("div",{key:p,class:"col-md-5"},[e("h6",Is,c(o.formatStartTime(p))+":",1),e("div",Vs,[(s(!0),a(d,null,v(o.groupByStartTimes[p],n=>(s(),a("div",{key:n.id,class:"col-lg text-nowrap my-1"},c(n.catdispname),1))),128))])]))),128))])])):h("",!0)}const As=C(Bs,[["render",Us]]);let js=m.debounce((r,t)=>{window.localStorage.setItem(`race-reg-form-data-${t}`,JSON.stringify(r))},3500),qs=r=>{let t=window.localStorage.getItem(`race-reg-form-data-${r}`);if(t){let l={};try{l=JSON.parse(t)}catch{}return l}return null},Ys=r=>{window.localStorage.removeItem(`race-reg-form-data-${r}`)};function Hs(r){if(r===0)return 0;let t=r*100,l=t*.04;return l>600&&(l=600),Math.round((t+l+30)/(1-.029))-t}const Ws={components:{MainNav:M,EventDetailsComponent:E,EventCategoryScheduleComponent:As},data(){return{categories:{},loading:!1,error:null,formError:[],formInputData:{},raceData:null,payment:"",birthdate:"",submitted:!1,waiverAccepted:!1,couponError:[],prevBibError:[],seriesRaces:{},seriesRaceIdx:0,previousReg:!1,prevAge:null}},created(){this.$watch(()=>this.$route.params.raceid,()=>{this.fetchData()},{immediate:!0})},watch:{formInputData:{handler(r,t){this.previousReg==!1&&js(r,this.$route.params.raceid)},deep:!0}},methods:{dollas(r){return r.toLocaleString("en-US",{style:"currency",currency:"USD"})},fetchData(){this.error=null,this.loading=!0,this.$route.params.raceid&&R(`/api/races/${this.$route.params.raceid}`).then(async r=>{var l;this.raceData=r.data;let t=qs(this.$route.params.raceid);t&&(m.find((l=this.raceData)==null?void 0:l.regCategories,{id:t.category})||delete t.category,t.waiverAccepted=!1,this.formInputData=t),!this.raceData.disableSeriesRedirect&&this.raceData.series&&this.raceData.toString().length>1&&this.$route.name!=="register-test"&&await R(`/api/series/${this.raceData.series}/registration`).then(({data:f})=>{this.seriesRaces=f;let i=k();this.seriesRaceIdx=0,m.some(f,({eventDate:o,raceid:_},p)=>k(o).isBefore(i)?!1:(this.seriesRaceIdx=p,this.$route.params.raceid!==_&&this.$router.push(`/register/${_}`),!0))}),this.loading=!1,this.payment=this.raceData.paymentOptions[0].type}).catch(r=>{if(this.raceData=null,this.loading=!1,this.error=r.toString(),r.code=="ERR_BAD_REQUEST")return console.warn("tried to load raceid: "+this.$route.params.raceid),console.warn(r.message);console.error(r)})},findPrevBib(r){R.post("/api/racers/bib",{series:`${this.raceData.series}`,bibNumber:r}).then(({data:t})=>{if(console.log("prevbib"),t.paytype==="season"){this.prevBibError=["You are already registered for the whole season. You do not need to register every week."];return}t.prevPaymentId=t.paymentId,delete t.optionalPurchases,delete t.paymentId,this.formInputData=t,this.prevAge=t.racerAge}).catch(({response:t})=>{console.dir(t),t.status==404&&(this.prevBibError=[t.data.message])})},onPrevBibChange(r){r?this.findPrevBib(r):(this.prevBibError=[],this.prevAge=null)},getCouponPricing(r){R.post("/api/payments/pricing",{raceid:`${this.$route.params.raceid}`,couponCode:r}).then(({data:t})=>{if(this.raceData.paymentOptions=t.paymentOptions,t.validCoupon)this.couponError=[];else{if(t.reason)return this.couponError=[t.reason];this.couponError=["Invalid Coupon Code"]}})},onCouponChange(r){r?this.getCouponPricing(r):this.couponError=[]},submitForm(r){r.preventDefault(),this.$formkit.submit("race-registration")},async submit(r){console.log(r),r.birthdate=void 0,r.racerAge=this.racerAge,r.paytype=this.payment,r.timestamp=k().format(),await R.post(`/api/payments/start-registration?race=${this.raceData.raceid}`,r).then(t=>{if(t.data){if(console.log("response data"),console.log(t.data),t.data.redirect)return this.submitted=!0,Ys(this.$route.params.raceid),new Promise(l=>setTimeout(()=>{window.location.href=t.data.redirect,l()},2e3));t.data.message&&(this.formError=[t.data.message])}}).catch(t=>{var l,f;if((f=(l=t.response)==null?void 0:l.data)!=null&&f.message)return this.formError=[t.response.data.message];this.formError=["Error submitting request"]})},getEventTimeObj(r){return k(`${k(this.raceData.eventDate).format("YYYY-MM-DD")} ${r}`)}},computed:{startTimes(){return this.hasStartTimes?m.map(m.uniqBy(this.raceData.regCategories,"startTime"),"startTime"):null},hasStartTimes(){return!!m.some(this.raceData.regCategories,"startTime")},currentTime(){return k().local().format()},firstRaceTime(){return this.hasStartTimes?k.min(m.map(this.startTimes,r=>k(`${this.eventDateFormatted} ${r}`))):null},lastRaceTime(){return this.hasStartTimes?k.max(m.map(this.startTimes,r=>k(`${this.eventDateFormatted} ${r}`))):null},sortedCats(){const r=m.filter(this.raceData.regCategories,l=>!0);let t={};return m.forEach(m.orderBy(r,"disporder"),l=>{t[l.id]=l.catdispname}),t},loaded(){return!!this.raceData},submitLabel(){return this.payment=="cash"||this.sponsoredCategorySelected?"Sign Up!":"Go to Payment"},cashEnabled(){return!!this.raceData.cashPaymentsEnabled},eventDateFormatted(){return k(this.raceData.eventDate).format("YYYY-MM-DD")},regDisabled(){return this.$route.name=="register-test"?!1:this.eventFull||k().isBefore(this.raceData.eventDetails.regOpenDate)||this.raceData.eventDetails.regCloseDate&&k().isAfter(this.raceData.eventDetails.regCloseDate)?!0:this.lastRaceTime?k().isAfter(this.lastRaceTime.subtract(5,"minute")):!1},eventFull(){return!!(this.raceData.entryCountMax&&this.raceData.entryCountMax>1&&this.raceData.entryCount>=this.raceData.entryCountMax)},paymentOptions(){let r={};return m.forEach(this.raceData.paymentOptions,t=>{r[t.type]=t.name}),this.cashEnabled&&(r.cash="Cash Payment (This Race Only)"),r},paymentCostDets(){var o,_,p,n;if(!this.selectedCategory)return{};if(this.paymenttypeRequiredCategorySelected&&(this.payment=(o=this.selectedCategory)==null?void 0:o.paytype),this.sponsoredCategorySelected)return this.payment="season",{cost:this.dollas(0),regFee:this.dollas(0),tot:this.dollas(0)};let r;this.payment==="cash"?r="single":r=this.payment;let t=m.find((_=this.raceData)==null?void 0:_.paymentOptions,u=>u.type===r);t||(this.payment="single",t=m.find((p=this.raceData)==null?void 0:p.paymentOptions,u=>u.type===this.payment));const l=parseFloat(t.amount);let f=0;l>0&&this.payment!=="cash"&&(f=(t.regFee+t.stripeFee)/100);const i={};if(m.assign(i,t,{name:t.name,cost:this.dollas(l),regFee:this.dollas(f),tot:this.dollas(parseFloat(t.amount)+parseFloat(f))}),(n=this.raceData)!=null&&n.optionalPurchases&&this.formInputData.optionalPurchases){let u=l;this.raceData.optionalPurchases.forEach(({id:g,label:D,description:x,amount:P})=>{this.formInputData.optionalPurchases[g]&&(i.options||(i.options=[]),i.options.push({description:x,label:D,id:g,amount:this.dollas(parseFloat(P))}),u+=parseFloat(P))}),f=Hs(u)/100,i.regFee=this.dollas(f),i.tot=this.dollas(u+f)}return i},showPaymentOption(){return this.paymenttypeRequiredCategorySelected||this.sponsoredCategorySelected?!1:this.cashEnabled?!0:!(this.raceData.paymentOptions&&this.raceData.paymentOptions.length<2)},paymenttypeRequiredCategorySelected(){var r;return!!(!this.selectedCategory||(r=this.selectedCategory)!=null&&r.paytype)},sponsoredCategorySelected(){var r;return!!((r=this.selectedCategory)!=null&&r.sponsored)},selectedCategory(){var r,t;return this.formInputData&&this.formInputData.category?m.find((r=this.raceData)==null?void 0:r.regCategories,{id:(t=this.formInputData)==null?void 0:t.category}):null},racerAge(){if(this.prevAge)return this.prevAge;if(this.birthdate){const r=k(),t=k(this.birthdate);return r.year()-t.year()}}}},Ks={key:0,class:"loading"},Gs={key:1},zs={key:0,class:"error"},Js={key:1},Qs={key:0,class:"h5"},Xs={key:1},Zs=e("h3",null,"Registration is closed.",-1),er=[Zs],tr={key:2,class:"mb-5"},sr=["innerHTML"],rr={key:1},ar={class:"row"},ir={class:"col-md-6 order-md-1 mb-3"},or=e("h4",{class:"d-flex justify-content-between align-items-center mb-3"},[e("h5",null,"Registration Info"),e("span",{class:"badge badge-secondary badge-pill"},"3")],-1),nr={class:"form-group pt-3"},lr={key:1,class:"fw-bolder"},cr={class:"form-group pt-3"},dr={key:0,class:"col-md-5 order-md-2 mb-4"},ur=e("h4",{class:"d-flex justify-content-between align-items-center mb-3"},[e("h5",null,"Payment Detail")],-1),hr={class:"list-group mb-3"},mr={class:"list-group mb-3"},_r={key:0},pr={class:"list-group mb-3"},yr=["innerHTML"],gr={class:"list-group mb-3 formkit-fieldset"},fr={class:"list-group-item d-flex justify-content-between lh-condensed"},vr=e("h6",{class:"my-0"},"Event Entry:",-1),br={class:"text-muted"},kr={key:0,class:"mx-3 text-decoration-line-through text-danger"},Dr={class:"list-group-item d-flex justify-content-between lh-condensed"},$r={class:"my-0"},Cr={key:0,class:"text-muted"},Rr={class:"list-group-item d-flex justify-content-between lh-condensed"},Sr=e("div",null,[e("h6",{class:"my-0"},"Online Processing Fee:"),e("small",{class:"text-muted"},"Credit Card Processing and Online Registration")],-1),wr={class:"text-muted"},Tr={class:"list-group-item d-flex justify-content-between"},xr=e("span",null,"Total (USD)",-1),Nr={key:0},Pr={class:"mb-5"},Er={key:1},Mr=e("h2",{class:"text-danger"},"Your registration will not be active until payment is received at the event",-1),Br=[Mr],Fr={key:2},Lr=["innerHTML"],Or={key:1},Ir={key:2},Vr=e("h2",null,"Submission successful, redirecting",-1),Ur=[Vr],Ar={key:2},jr=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"Race not found...")],-1),qr=[jr];function Yr(r,t,l,f,i,o){var g,D;const _=b("MainNav"),p=b("EventDetailsComponent"),n=b("FormKit"),u=b("EventCategoryScheduleComponent");return s(),a(d,null,[y(_),i.loading?(s(),a("div",Ks,"Loading...")):(s(),a("div",Gs,[i.error?(s(),a("div",zs,c(i.error),1)):h("",!0),o.loaded?(s(),a("div",Js,[y(p,{details:i.raceData.eventDetails,raceid:i.raceData.raceid},null,8,["details","raceid"]),o.eventFull?(s(),a("div",Qs,"This event has reached the registration entry max of "+c(i.raceData.entryCountMax),1)):h("",!0),o.regDisabled?(s(),a("div",Xs,er)):(s(),a("div",tr,[(g=i.raceData)!=null&&g.headerContent?(s(),a("div",{key:0,class:"mb-3",innerHTML:i.raceData.headerContent},null,8,sr)):h("",!0),((D=i.raceData)==null?void 0:D.seriesRaceNumber)>1?(s(),a("div",rr,[y(n,{"label-class":"text-danger fw-bold fs-5",type:"checkbox",name:"prevBibLookup",label:"I have a bib number!",help:"Look up your information from a previous race in this series",modelValue:i.previousReg,"onUpdate:modelValue":t[0]||(t[0]=x=>i.previousReg=x)},null,8,["modelValue"]),i.previousReg?(s(),N(n,{key:0,type:"number",name:"bibNumber",label:"Bib Number:",help:"Enter your Bib Number from your previous race to pre-fill your info",delay:1500,onInput:o.onPrevBibChange,errors:i.prevBibError,validation:"required"},null,8,["onInput","errors"])):h("",!0)])):h("",!0),y(n,{type:"form",id:"race-registration",modelValue:i.formInputData,"onUpdate:modelValue":t[4]||(t[4]=x=>i.formInputData=x),"form-class":i.submitted?"hide":"show",errors:i.formError,actions:!1,onSubmit:o.submit},{default:S(()=>{var x,P;return[e("div",ar,[e("div",ir,[or,y(n,{type:"text",name:"first_name",label:"First name",help:"What is your first name",validation:"required"}),y(n,{type:"text",name:"last_name",label:"Last name",help:"What is your last name",validation:"required"}),e("div",nr,[i.previousReg?h("",!0):(s(),N(n,{key:0,type:"email",name:"email",label:"Your email",help:"Enter an email address",validation:"required|email"}))]),y(n,{type:"text",name:"sponsor",label:"Your Team or Sponsor",help:"Enter an optional Team or Sponsor name",maxlength:"25"}),!((x=i.raceData)!=null&&x.disableAge)&&!i.previousReg?(s(),N(n,{key:0,type:"date",name:"birthdate",label:"Birthday",modelValue:i.birthdate,"onUpdate:modelValue":t[1]||(t[1]=$=>i.birthdate=$),help:"Tap on the year at the top of the popup to change it",validation:"required|before:2020-01-01","validation-visibility":"live"},null,8,["modelValue"])):h("",!0),(P=i.raceData)!=null&&P.disableAge?h("",!0):(s(),a("p",lr,"Racing Age (as of Dec 31): "+c(o.racerAge),1)),e("div",cr,[y(n,{type:"select",id:"category",label:"Category:",placeholder:"Select a category",name:"category",options:o.sortedCats,validation:"required","validation-visibility":"dirty","validation-messages":{is:"You must select a category"}},null,8,["options"])]),i.previousReg?h("",!0):(s(),N(n,{key:2,type:"text",name:"contactNumber",label:"Phone Number",help:"If there is an issue on race day, we will try to contact you via this number"})),i.previousReg?h("",!0):(s(),N(n,{key:3,type:"text",name:"emergencyNumber",label:"Emergency Contact Name and Number",help:"In case of an emergency, we will contact this person"}))]),o.paymentCostDets?(s(),a("div",dr,[ur,e("fieldset",hr,[e("div",null,[i.raceData.couponsEnabled?(s(),N(n,{key:0,type:"text",name:"coupon",label:"Coupon Code",help:"",delay:1e3,onInput:o.onCouponChange,errors:i.couponError},null,8,["onInput","errors"])):h("",!0)])]),e("fieldset",mr,[e("div",null,[o.showPaymentOption?(s(),N(n,{key:0,type:"radio",name:"paytype",label:"Payment option",options:o.paymentOptions,validation:"required",modelValue:i.payment,"onUpdate:modelValue":t[2]||(t[2]=$=>i.payment=$)},null,8,["options","modelValue"])):h("",!0)])]),i.raceData.optionalPurchases&&(o.showPaymentOption||o.paymentCostDets.name)?(s(),a("div",_r,[y(n,{type:"group",name:"optionalPurchases"},{default:S(()=>[(s(!0),a(d,null,v(i.raceData.optionalPurchases,($,W)=>(s(),a("div",pr,[e("h6",{innerHTML:$.description},null,8,yr),y(n,{type:"checkbox",label:`${$.label} - ${o.dollas(parseFloat($.amount))}`,name:$.id},null,8,["label","name"]),$.options&&i.formInputData.optionalPurchases[$.id]?(s(),N(n,{key:0,type:"select",options:$.options,label:$.optionsLabel,name:`${$.id}-option`},null,8,["options","label","name"])):h("",!0)]))),256))]),_:1})])):h("",!0),e("ul",gr,[e("li",fr,[e("div",null,[vr,e("small",br,c(o.paymentCostDets.name),1)]),e("div",null,[o.paymentCostDets.discounted?(s(),a("span",kr,c(o.dollas(o.paymentCostDets.orig)),1)):h("",!0),e("span",{class:T({"text-success":o.paymentCostDets.discounted})},c(o.paymentCostDets.cost),3)])]),o.paymentCostDets.options?(s(!0),a(d,{key:0},v(o.paymentCostDets.options,($,W)=>(s(),a("li",Dr,[e("div",null,[e("h6",$r,c($.label),1),$.option?(s(),a("small",Cr,c($.option),1)):h("",!0)]),e("div",null,[e("span",null,c($.amount),1)])]))),256)):h("",!0),e("li",Rr,[Sr,e("span",wr,c(o.paymentCostDets.regFee),1)]),e("li",Tr,[xr,e("strong",null,c(o.paymentCostDets.tot),1)])])])):h("",!0)]),o.sponsoredCategorySelected?(s(),a("div",Nr,[e("p",Pr,[e("h5",null,"Your "+c(o.selectedCategory.catdispname)+" race entry is sponsored by "+c(o.selectedCategory.sponsorName),1)])])):h("",!0),i.payment==="cash"?(s(),a("div",Er,Br)):h("",!0),i.raceData.waiver?(s(),a("div",Fr,[i.raceData.waiver.format=="html"?(s(),a("div",{key:0,innerHTML:i.raceData.waiver.text},null,8,Lr)):(s(),a("div",Or,[e("h5",null,c(i.raceData.waiver.header),1),e("p",null,c(i.raceData.waiver.text),1)])),y(n,{type:"checkbox",modelValue:i.waiverAccepted,"onUpdate:modelValue":t[3]||(t[3]=$=>i.waiverAccepted=$),label:"I HAVE READ AND UNDERSTAND THIS WAIVER",help:"I acknowledge that I have read, understand, and accepted the above release of liability.",name:"waiverAccepted",validation:"accepted","validation-messages":{accepted:"You must agree to the terms of the liability release above"},"validation-visibility":"live"},null,8,["modelValue"])])):h("",!0),y(n,{type:"submit",label:o.submitLabel,onClick:o.submitForm},null,8,["label","onClick"])]}),_:1},8,["modelValue","form-class","errors","onSubmit"]),i.submitted?(s(),a("div",Ir,Ur)):h("",!0)])),y(u,{categories:i.raceData.regCategories,raceDate:i.raceData.eventDate},null,8,["categories","raceDate"])])):(s(),a("div",Ar,qr))]))],64)}const V=C(Ws,[["render",Yr]]);const Hr={components:{EventDetailsComponent:E,MainNav:M},data(){return{categories:{},loading:!1,error:null,raceData:{},regData:{},payment:"",payStatus:!1}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{fetchData(){this.error=null,this.loading=!0,this.$route.params.raceid&&this.$route.params.payment_id&&R(`/api/races/${this.$route.params.raceid}`).then(r=>(this.raceData=r.data,R(`/api/payments/status?payment_id=${this.$route.params.payment_id}`).then(t=>{var l;this.loading=!1,this.payStatus=t.data.status,this.paymentUrl=(l=t.data.stripePayment)==null?void 0:l.url,this.regData=t.data.regData,this.payment=t.data.regData.paytype}))).catch(r=>{this.error="Failed to load race "+this.$route.params.raceid,console.error(r)})}},computed:{sortedCats(){let r={};return m.forEach(m.orderBy(this.raceData.regCategories,"disporder"),t=>{r[t.id]=t.catdispname}),r},loaded(){return!!this.raceData},paymentOptions(){let r={};return m.forEach(this.raceData.paymentOptions,t=>{r[t.type]=t.name}),r},pendingPayment(){return!!(this.regData.raceid!=this.$route.params.raceid||this.payStatus&&this.payStatus!="paid")},sponsoredCategorySelected(){var r;return!!((r=this.selectedCategory)!=null&&r.sponsored)},selectedCategory(){return m.find(this.raceData.regCategories,{id:this.regData.category})}}},Wr={key:0,class:"loading"},Kr={key:1},Gr={key:0,class:"error"},zr={key:1},Jr={class:"row"},Qr={class:"col-md-6 order-md-1"},Xr={key:0},Zr=e("div",{class:"d-flex justify-content-between align-items-center mb-3"},[e("h4",null,"Your Registration is Confirmed")],-1),ea=[Zr],ta={key:1,class:"mb-5"},sa=e("div",{class:"d-flex justify-content-between align-items-center mb-3 text-danger"},[e("h4",null,"Your Registration is Incomplete")],-1),ra={key:0},aa=e("p",{class:"text-danger h5"},"Please make your cash payment at the event to complete your registration.",-1),ia=e("p",null,'Your name will not show up on the "Who is signed up" list until payment is completed.',-1),oa=[aa,ia],na={key:1},la=["href"],ca={class:"col"},da={class:"row"},ua={class:"form-group pt-3"},ha={class:"form-group pt-3"},ma={key:2},_a={key:0},pa=["href"],ya={key:1},ga=e("a",{href:"mailto:support@signup.bike"},"support@signup.bike",-1),fa=[ga],va={key:2},ba={class:"text-center"},ka={class:"mt-5"};function Da(r,t,l,f,i,o){const _=b("MainNav"),p=b("EventDetailsComponent"),n=b("FormKit");return s(),a(d,null,[y(_),i.loading?(s(),a("div",Wr,"Loading...")):(s(),a("div",Kr,[i.error?(s(),a("div",Gr,c(i.error),1)):h("",!0),o.loaded?(s(),a("div",zr,[y(p,{details:i.raceData.eventDetails,raceid:i.raceData.raceid},null,8,["details","raceid"]),y(n,{type:"form",id:"race-registration",disabled:"",actions:!1,modelValue:i.regData,"onUpdate:modelValue":t[0]||(t[0]=u=>i.regData=u)},{default:S(()=>[e("div",Jr,[e("div",Qr,[o.pendingPayment?h("",!0):(s(),a("div",Xr,ea)),o.pendingPayment?(s(),a("div",ta,[sa,i.payment==="cash"?(s(),a("div",ra,oa)):(s(),a("div",na,[e("a",{href:r.paymentUrl},"Complete your payment",8,la)]))])):h("",!0),e("div",ca,[e("div",da,[y(n,{type:"text",name:"first_name",label:"First name"}),y(n,{type:"text",name:"last_name",label:"Last name"})])]),e("div",ua,[y(n,{type:"email",name:"email",label:"Email"})]),e("div",ha,[y(n,{type:"text",name:"sponsor",label:"Your Team or Sponsor"}),y(n,{type:"select",label:"Race Category:",name:"category",options:o.sortedCats},null,8,["options"])]),o.sponsoredCategorySelected?(s(),a("div",ma,[e("h5",null," Your "+c(o.selectedCategory.catdispname)+" race entry is sponsored by "+c(o.selectedCategory.sponsorName),1)])):h("",!0)])])]),_:1},8,["modelValue"]),w(" Please send any corrections or questions to "),i.raceData.contactEmail?(s(),a("div",_a,[e("a",{href:`mailto:${i.raceData.contactEmail}`},c(i.raceData.contactEmail),9,pa)])):(s(),a("div",ya,fa))])):(s(),a("div",va,[e("div",ba,[e("h2",ka," Unable to load requested information "+c(r.$route.params.raceid)+" payment: "+c(r.$route.params.payment_id),1)])]))]))],64)}const $a=C(Hr,[["render",Da]]);const Ca={components:{SeriesResultRow:Y,SeriesNavBar:F},data(){return{categories:{},loading:!1,error:null,displayName:"",series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(r){var t=document.querySelector(`#${r}`);t.scrollIntoView({behavior:"smooth"})},fetchData(){if(!this.$route.params.seriesid)return;this.error=null,this.loading=!0;let r=`/api/series/results/${this.$route.params.seriesid}`;R(r).then(({data:t})=>{this.loading=!1,this.categories=t.categories,this.displayName=t.displayName,this.series=this.$route.params.seriesid;let l=m.map(t.categories,f=>m.omit(f,["results","columns"]));console.log("temp:",m.orderBy(l,"disporder"))}).catch(t=>{console.error(t),this.categories={},this.error=t.toString()})}},computed:{sortedCats(){let r;return this.$route.path.indexOf("grom")>-1?r=m.filter(this.categories,t=>t.id.indexOf("grom")>-1):r=m.filter(this.categories,t=>t.id.indexOf("grom")==-1),m.orderBy(r,"disporder")},expertCats(){return m.filter(this.sortedCats,{laps:4})},sportCats(){return m.filter(this.sortedCats,{laps:3})},beginnerCats(){return m.filter(this.sortedCats,{laps:2})},gromCats(){return this.$route.path.indexOf("grom")>-1?m.filter(this.categories,r=>r.id.indexOf("grom")>-1):[]},haveResults(){return this.categories?Object.keys(this.categories).length>0:!1}}},Ra={key:0,class:"loading"},Sa={key:1},wa={key:0,class:"error"},Ta={class:"container-fluid text-center mt-5"},xa=e("h3",null,"Series Standings",-1),Na=e("p",null,[w("Glossary of terms below:"),e("br"),w(" 1/50 = 1st Place/50 Points -/- = Did not race")],-1),Pa={key:1},Ea={class:"container-fluid text-center mt-5"},Ma={class:"list-inline"},Ba=["onClick"],Fa={class:"list-inline"},La=["onClick"],Oa={class:"list-inline"},Ia=["onClick"],Va={class:"list-inline"},Ua=["onClick"],Aa={class:"container-fluid"},ja=["id"],qa={class:"table table-striped table-hover"},Ya={key:2},Ha=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No results yet...")],-1),Wa=[Ha];function Ka(r,t,l,f,i,o){const _=b("SeriesNavBar"),p=b("SeriesResultRow");return s(),a(d,null,[y(_,{series:i.series},null,8,["series"]),i.loading?(s(),a("div",Ra,"Loading...")):(s(),a("div",Sa,[i.error?(s(),a("div",wa,c(i.error),1)):h("",!0),e("div",Ta,[e("h2",null,c(i.displayName),1),xa,Na]),o.haveResults?(s(),a("div",Pa,[e("div",Ea,[e("ul",Ma,[(s(!0),a(d,null,v(o.expertCats,n=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:u=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,Ba)]))),128))]),e("ul",Fa,[(s(!0),a(d,null,v(o.sportCats,n=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:u=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,La)]))),128))]),e("ul",Oa,[(s(!0),a(d,null,v(o.beginnerCats,n=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:u=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,Ia)]))),128))]),e("ul",Va,[(s(!0),a(d,null,v(o.gromCats,n=>(s(),a("li",{key:n.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:u=>o.scrollMeTo(n.id),class:"link-primary"},c(n.catdispname),9,Ua)]))),128))])]),e("div",Aa,[(s(!0),a(d,null,v(o.sortedCats,n=>(s(),a("div",{key:n.id,class:"mt-5"},[e("h3",{id:n.id},c(n.catdispname),9,ja),e("table",qa,[e("thead",null,[e("tr",null,[(s(!0),a(d,null,v(n.columns,(u,g)=>(s(),a("th",{scope:"col",key:g},c(u),1))),128))])]),e("tbody",null,[(s(!0),a(d,null,v(n.results,(u,g)=>(s(),a("tr",{key:g},[y(p,{Pos:g,data:u},null,8,["Pos","data"])]))),128))])]),e("a",{role:"button",onClick:t[0]||(t[0]=u=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(s(),a("div",Ya,Wa))]))],64)}const U=C(Ca,[["render",Ka]]),Ga={props:["data","Pos","dates"],data(){return{count:0}},computed:{}};function za(r,t,l,f,i,o){return s(),a(d,null,[e("td",null,c(l.data.Name),1),e("td",null,c(l.data.Cat),1),(s(!0),a(d,null,v(l.dates,(_,p)=>(s(),a("td",{key:p},c(l.data[_]||"-"),1))),128))],64)}const H=C(Ga,[["render",za]]);const Ja={components:{ResultRow:H,SeriesNavBar:F},data(){return{teamResults:{},loading:!1,error:null,series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(r){var t=document.querySelector(`#${r}`);t.scrollIntoView({behavior:"smooth"})},fetchData(){if(!this.$route.params.seriesid)return;this.error=null,this.loading=!0;let r=`/api/team-comp?series=${this.$route.params.seriesid}`;R(r).then(({data:t})=>{this.loading=!1,this.series=this.$route.params.seriesid,this.teamResults=t,this.teamDates=t.teamCompDates}).catch(t=>{console.error(t),this.teamResults={},this.error=t.toString()})}},computed:{dates:()=>{}}},Qa={key:0,class:"loading"},Xa={key:1},Za={key:0,class:"error"},ei=e("h2",{class:"mt-5"},"Team Standings",-1),ti={class:"container-fluid mt-5"},si={class:"table table-striped table-hover"},ri=e("thead",null,[e("tr",null,[e("th",null,"Position"),e("th",null,"Team"),e("th",null,"Total Score")])],-1),ai=e("h2",{class:"mt-5"},"Team Results",-1),ii={class:"container-fluid"},oi={class:"table table-striped table-hover"},ni=e("thead",null,[e("tr",null,[e("th",{style:{width:"25%"}},"Racer Name"),e("th",{style:{width:"25%"}},"Class"),e("th",{style:{width:"12.5%"}},"5/4"),e("th",{style:{width:"12.5%"}},"5/11"),e("th",{style:{width:"12.5%"}},"5/18"),e("th",{style:{width:"12.5%"}},"5/25")])],-1),li={class:"table table-striped table-hover"},ci=e("th",{style:{width:"50%","text-align":"right"}},"Score (Avg of individual results):",-1),di={style:{width:"12.5%"}},ui={style:{width:"12.5%"}},hi={style:{width:"12.5%"}},mi={style:{width:"12.5%"}};function _i(r,t,l,f,i,o){const _=b("SeriesNavBar"),p=b("ResultRow");return s(),a(d,null,[y(_,{series:i.series},null,8,["series"]),i.loading?(s(),a("div",Qa,"Loading...")):(s(),a("div",Xa,[i.error?(s(),a("div",Za,c(i.error),1)):h("",!0),ei,e("div",ti,[e("table",si,[ri,e("tbody",null,[(s(!0),a(d,null,v(i.teamResults.result,(n,u)=>(s(),a("tr",{key:u},[e("td",null,c(u+1),1),e("td",null,c(n.teamName),1),e("td",null,c(n.totalScore),1)]))),128))])])]),ai,(s(!0),a(d,null,v(i.teamResults.result,(n,u)=>(s(),a("div",{class:"mt-5",key:u},[e("h3",null,c(n.teamName),1),e("div",ii,[e("table",oi,[ni,e("tbody",null,[(s(!0),a(d,null,v(i.teamResults.teamDets[n.teamName],(g,D)=>(s(),a("tr",{key:D},[y(p,{data:g,dates:r.teamDates},null,8,["data","dates"])]))),128))])]),e("table",li,[e("thead",null,[e("tr",null,[ci,e("th",di,c(n.results["5/4"]?n.results["5/4"].avg:"-"),1),e("th",ui,c(n.results["5/11"]?n.results["5/11"].avg:"-"),1),e("th",hi,c(n.results["5/18"]?n.results["5/18"].avg:"-"),1),e("th",mi,c(n.results["5/25"]?n.results["5/25"].avg:"-"),1)])])])])]))),128))]))],64)}const pi=C(Ja,[["render",_i]]);const yi={components:{ResultRow:H,SeriesNavBar:L},data(){return{teamResults:{},teamDates:[],loading:!1,error:null,series:null}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(r){var t=document.querySelector(`#${r}`);t.scrollIntoView({behavior:"smooth"})},fetchData(){if(!this.$route.params.seriesid)return;this.error=null,this.loading=!0;let r=`/api/team-comp?series=${this.$route.params.seriesid}`;R(r).then(({data:t})=>{this.loading=!1,this.series=this.$route.params.seriesid,this.teamResults=t,this.teamDates=t.teamCompDates}).catch(t=>{console.error(t),this.teamResults={},this.error=t.toString()})}},computed:{dates:()=>{},fivePlusTeams(){var r;return m.filter((r=this.teamResults)==null?void 0:r.result,t=>t.count>4)},threeFourTeams(){var r;return m.filter((r=this.teamResults)==null?void 0:r.result,t=>t.count<5)},sortedResults(){return m.sortBy(this.teamResults.result,"teamName")}}},gi={key:0,class:"loading"},fi={key:1},vi={key:0,class:"error"},bi=e("h2",{class:"mt-5"}," 5+ Team Standings",-1),ki={class:"container-fluid mt-5"},Di={class:"table table-striped table-hover"},$i=e("thead",null,[e("tr",null,[e("th",null,"Position"),e("th",null,"Team"),e("th",null,"Total Score")])],-1),Ci=e("h2",{class:"mt-5"}," 3 Person Team Standings",-1),Ri={class:"container-fluid mt-5"},Si={class:"table table-striped table-hover"},wi=e("thead",null,[e("tr",null,[e("th",null,"Position"),e("th",null,"Team"),e("th",null,"Total Score")])],-1),Ti=e("h2",{class:"mt-5"},"Team Results",-1),xi={class:"container-fluid"},Ni={class:"table table-striped table-hover"},Pi=e("th",{style:{width:"25%"}},"Racer Name",-1),Ei=e("th",{style:{width:"25%"}},"Class",-1),Mi=e("td",{colspan:"2",style:{"text-align":"right"}},"Score (Avg of individual results):",-1);function Bi(r,t,l,f,i,o){const _=b("SeriesNavBar"),p=b("ResultRow");return s(),a(d,null,[y(_,{series:i.series},null,8,["series"]),i.loading?(s(),a("div",gi,"Loading...")):(s(),a("div",fi,[i.error?(s(),a("div",vi,c(i.error),1)):h("",!0),bi,e("div",ki,[e("table",Di,[$i,e("tbody",null,[(s(!0),a(d,null,v(o.fivePlusTeams,(n,u)=>(s(),a("tr",{key:u},[e("td",null,c(u+1),1),e("td",null,c(n.teamName),1),e("td",null,c(n.totalScore),1)]))),128))])])]),Ci,e("div",Ri,[e("table",Si,[wi,e("tbody",null,[(s(!0),a(d,null,v(o.threeFourTeams,(n,u)=>(s(),a("tr",{key:u},[e("td",null,c(u+1),1),e("td",null,c(n.teamName),1),e("td",null,c(n.totalScore),1)]))),128))])])]),Ti,(s(!0),a(d,null,v(o.sortedResults,(n,u)=>(s(),a("div",{class:"mt-5",key:u},[e("h3",null,c(n.teamName),1),e("div",xi,[e("table",Ni,[e("thead",null,[e("tr",null,[Pi,Ei,(s(!0),a(d,null,v(i.teamDates,g=>(s(),a("th",null,c(g),1))),256))])]),e("tbody",null,[(s(!0),a(d,null,v(i.teamResults.teamDets[n.teamName],(g,D)=>(s(),a("tr",{key:D},[y(p,{data:g,dates:i.teamDates},null,8,["data","dates"])]))),128)),e("tr",null,[Mi,(s(!0),a(d,null,v(i.teamDates,g=>(s(),a("td",null,c(n.results[g]?n.results[g].avg:"-"),1))),256))])])])])]))),128))]))],64)}const Fi=C(yi,[["render",Bi]]);const Li={components:{EventDetailsComponent:E,MainNav:M},data(){return{categories:{},loading:!1,error:null,formattedStartDate:"",series:null,stageFilter:"all",racers:[],raceData:{}}},created(){this.$watch(()=>this.$route.params,()=>{this.fetchData()},{immediate:!0})},methods:{scrollMeTo(r){var t=document.querySelector(`#${r}`);t.scrollIntoView({behavior:"smooth"})},fetchData(){this.error=null,this.loading=!0,this.$route.params.raceid&&R(`/api/races/roster/${this.$route.params.raceid}`).then(({data:r})=>{this.raceData=r,this.series=r.series,this.loading=!1,this.categories=r.regCategories,this.racers=r.registeredRacers}).catch(r=>{var t;if(this.loading=!1,((t=r.response)==null?void 0:t.status)===404){this.error="Race not found";return}console.error(r),this.categories={},this.error=r.toString()})},replacePlusSymbol(r){return r.replace("+","Plus")},payTypeToStage(r){const t=m.find(this.raceData.paymentOptions,{type:r});return t?t.name:""}},computed:{showPaytype(){var r;return!!((r=this.raceData)!=null&&r.showPaytypeOnRoster)},filterOptions(){let r={all:"All Stages"};return m.forEach(this.raceData.paymentOptions,t=>{r[t.type]=t.name}),r},filteredRacers(){return this.showPaytype&&this.stageFilter!=="all"?m.filter(this.racers,r=>r.paytype==this.stageFilter||r.paytype=="season"):this.racers},groupedRacers(){return m.groupBy(this.filteredRacers,"category")},sortedCats(){return m.filter(m.orderBy(this.categories,"disporder"),r=>m.includes(Object.keys(this.groupedRacers),r.id))},raceDate(){return k(this.raceData.eventDate).format("ddd, MMM D")}}},Oi={key:0,class:"loading"},Ii={key:1},Vi={key:0,class:"error"},Ui={key:1,id:"top"},Ai={key:0},ji={class:"row"},qi={key:0,class:"col-md-6"},Yi={class:"container text-center mt-5"},Hi={class:"list-inline"},Wi=["onClick"],Ki={class:"container-fluid"},Gi=["id"],zi={class:"table table-striped table-hover"},Ji=e("th",null," First Name ",-1),Qi=e("th",null," Last Name ",-1),Xi=e("th",null," Team/Sponsor ",-1),Zi={key:0},eo={key:0},to={key:1},so=e("div",{class:"text-center"},[e("h2",{class:"mt-5"},"No registrations yet...")],-1),ro=[so];function ao(r,t,l,f,i,o){const _=b("MainNav"),p=b("EventDetailsComponent"),n=b("FormKit");return s(),a(d,null,[y(_),i.loading?(s(),a("div",Oi,"Loading...")):(s(),a("div",Ii,[i.error?(s(),a("div",Vi,c(i.error),1)):(s(),a("div",Ui,[y(p,{details:i.raceData.eventDetails,raceid:i.raceData.raceid},null,8,["details","raceid"]),Object.keys(i.racers).length?(s(),a("div",Ai,[e("div",ji,[e("div",{class:T({"col-md-6":o.showPaytype})},[e("h4",null,c(o.filteredRacers.length)+" Registered for "+c(i.raceData.displayName)+" on "+c(o.raceDate),1)],2),o.showPaytype?(s(),a("div",qi,[y(n,{type:"select",label:"Show registrations for:",name:"stageFilter",modelValue:i.stageFilter,"onUpdate:modelValue":t[0]||(t[0]=u=>i.stageFilter=u),default:"all",options:o.filterOptions},null,8,["modelValue","options"])])):h("",!0)]),e("div",Yi,[e("ul",Hi,[(s(!0),a(d,null,v(o.sortedCats,u=>(s(),a("li",{key:u.id,class:"list-inline-item mx-2"},[e("a",{role:"button",onClick:g=>o.scrollMeTo(o.replacePlusSymbol(u.id)),class:"link-primary"},c(u.catdispname),9,Wi)]))),128))])]),e("div",Ki,[(s(!0),a(d,null,v(o.sortedCats,u=>(s(),a("div",{key:u.id,class:"mt-5"},[e("h3",{id:o.replacePlusSymbol(u.id)},c(u.catdispname),9,Gi),e("table",zi,[e("thead",null,[e("tr",null,[Ji,Qi,Xi,o.showPaytype?(s(),a("th",Zi," Stages ")):h("",!0)])]),e("tbody",null,[(s(!0),a(d,null,v(o.groupedRacers[u.id],(g,D)=>(s(),a("tr",{key:D},[e("td",null,c(g.first_name),1),e("td",null,c(g.last_name),1),e("td",null,c(g.sponsor),1),o.showPaytype?(s(),a("td",eo,c(o.payTypeToStage(g.paytype)),1)):h("",!0)]))),128))])]),e("a",{role:"button",onClick:t[1]||(t[1]=g=>o.scrollMeTo("top")),class:"link-primary"},"Back to Top")]))),128))])])):(s(),a("div",to,ro))]))]))],64)}const io=C(Li,[["render",ao]]),oo=z({history:J("/"),routes:[{path:"/",name:"home",component:I},{path:"/results/",name:"results",component:I},{path:"/race/:raceid",component:Bt},{path:"/result/:id",name:"raceResult",component:ds},{path:"/result/series/:seriesid",name:"seriesResults",component:Ms},{path:"/result/series/:seriesid/team",name:"teamCompResults",component:Fi},{path:"/register/:raceid",name:"register",component:V},{path:"/register/test/:raceid",name:"register-test",component:V},{path:"/regconfirmation/:raceid/:payment_id",component:$a},{path:"/roster/:raceid",name:"roster",component:io},{path:"/series/:seriesid",component:U},{path:"/series/grom/:seriesid",component:U},{path:"/teamcomp/:seriesid",component:pi}]});Q.init({clientToken:"pub5b9b0cfce30b3b609b588d9f3ac85ebb",site:"datadoghq.com",env:"production",service:"public-site",version:"1.0.1",forwardErrorsToLogs:!0,sampleRate:100});const O=X(ae);O.use(Z,ee);O.use(oo);O.mount("#app");
//# sourceMappingURL=main-a8f720a2.js.map
